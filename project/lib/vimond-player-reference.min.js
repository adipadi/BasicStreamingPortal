!function(e){function t(e){var t=document.getElementsByTagName("head")[0],n=document.createElement("script");n.type="text/javascript",n.charset="utf-8",n.src=f.p+""+e+"."+w+".hot-update.js",t.appendChild(n)}function n(e){if("undefined"==typeof XMLHttpRequest)return e(new Error("No browser support"));try{var t=new XMLHttpRequest,n=f.p+""+w+".hot-update.json";t.open("GET",n,!0),t.timeout=1e4,t.send(null)}catch(r){return e(r)}t.onreadystatechange=function(){if(4===t.readyState)if(0===t.status)e(new Error("Manifest request to "+n+" timed out."));else if(404===t.status)e();else if(200!==t.status&&304!==t.status)e(new Error("Manifest request to "+n+" failed."));else{try{var r=JSON.parse(t.responseText)}catch(i){return void e(i)}e(null,r)}}}function r(e){function t(e,t){"ready"===T&&o("prepare"),P++,f.e(e,function(){function n(){P--,"prepare"===T&&(x[e]||u(e),0===P&&0===A&&l())}try{t.call(null,r)}finally{n()}})}var n=O[e];if(!n)return f;var r=function(t){return n.hot.active?O[t]?(O[t].parents.indexOf(e)<0&&O[t].parents.push(e),n.children.indexOf(t)<0&&n.children.push(t)):k=[e]:(console.warn("[HMR] unexpected require("+t+") from disposed module "+e),k=[]),f(t)};for(var i in f)Object.prototype.hasOwnProperty.call(f,i)&&(h?Object.defineProperty(r,i,function(e){return{configurable:!0,enumerable:!0,get:function(){return f[e]},set:function(t){f[e]=t}}}(i)):r[i]=f[i]);return h?Object.defineProperty(r,"e",{enumerable:!0,value:t}):r.e=t,r}function i(e){var t={_acceptedDependencies:{},_declinedDependencies:{},_selfAccepted:!1,_selfDeclined:!1,_disposeHandlers:[],active:!0,accept:function(e,n){if("undefined"==typeof e)t._selfAccepted=!0;else if("function"==typeof e)t._selfAccepted=e;else if("object"==typeof e)for(var r=0;r<e.length;r++)t._acceptedDependencies[e[r]]=n;else t._acceptedDependencies[e]=n},decline:function(e){if("undefined"==typeof e)t._selfDeclined=!0;else if("number"==typeof e)t._declinedDependencies[e]=!0;else for(var n=0;n<e.length;n++)t._declinedDependencies[e[n]]=!0},dispose:function(e){t._disposeHandlers.push(e)},addDisposeHandler:function(e){t._disposeHandlers.push(e)},removeDisposeHandler:function(e){var n=t._disposeHandlers.indexOf(e);n>=0&&t._disposeHandlers.splice(n,1)},check:s,apply:d,status:function(e){return e?void S.push(e):T},addStatusHandler:function(e){S.push(e)},removeStatusHandler:function(e){var t=S.indexOf(e);t>=0&&S.splice(t,1)},data:E[e]};return t}function o(e){T=e;for(var t=0;t<S.length;t++)S[t].call(null,e)}function a(e){var t=+e+""===e;return t?+e:e}function s(e,t){if("idle"!==T)throw new Error("check() is only allowed in idle status");"function"==typeof e?(b=!1,t=e):(b=e,t=t||function(e){if(e)throw e}),o("check"),n(function(e,n){if(e)return t(e);if(!n)return o("idle"),void t(null,null);C={},R={},x={};for(var r=0;r<n.c.length;r++)R[n.c[r]]=!0;y=n.h,o("prepare"),v=t,g={};var i=0;u(i),"prepare"===T&&0===P&&0===A&&l()})}function c(e,t){if(R[e]&&C[e]){C[e]=!1;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(g[n]=t[n]);0===--A&&0===P&&l()}}function u(e){R[e]?(C[e]=!0,A++,t(e)):x[e]=!0}function l(){o("ready");var e=v;if(v=null,e)if(b)d(b,e);else{var t=[];for(var n in g)Object.prototype.hasOwnProperty.call(g,n)&&t.push(a(n));e(null,t)}}function d(t,n){function r(e){for(var t=[e],n={},r=t.slice();r.length>0;){var o=r.pop(),e=O[o];if(e&&!e.hot._selfAccepted){if(e.hot._selfDeclined)return new Error("Aborted because of self decline: "+o);if(0===o)return;for(var a=0;a<e.parents.length;a++){var s=e.parents[a],c=O[s];if(c.hot._declinedDependencies[o])return new Error("Aborted because of declined dependency: "+o+" in "+s);t.indexOf(s)>=0||(c.hot._acceptedDependencies[o]?(n[s]||(n[s]=[]),i(n[s],[o])):(delete n[s],t.push(s),r.push(s)))}}}return[t,n]}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];e.indexOf(r)<0&&e.push(r)}}if("ready"!==T)throw new Error("apply() is only allowed in ready status");"function"==typeof t?(n=t,t={}):t&&"object"==typeof t?n=n||function(e){if(e)throw e}:(t={},n=n||function(e){if(e)throw e});var s={},c=[],u={};for(var l in g)if(Object.prototype.hasOwnProperty.call(g,l)){var d=a(l),p=r(d);if(!p){if(t.ignoreUnaccepted)continue;return o("abort"),n(new Error("Aborted because "+d+" is not accepted"))}if(p instanceof Error)return o("abort"),n(p);u[d]=g[d],i(c,p[0]);for(var d in p[1])Object.prototype.hasOwnProperty.call(p[1],d)&&(s[d]||(s[d]=[]),i(s[d],p[1][d]))}for(var h=[],m=0;m<c.length;m++){var d=c[m];O[d]&&O[d].hot._selfAccepted&&h.push({module:d,errorHandler:O[d].hot._selfAccepted})}o("dispose");for(var v=c.slice();v.length>0;){var d=v.pop(),b=O[d];if(b){for(var S={},A=b.hot._disposeHandlers,P=0;P<A.length;P++){var x=A[P];x(S)}E[d]=S,b.hot.active=!1,delete O[d];for(var P=0;P<b.children.length;P++){var C=O[b.children[P]];if(C){var R=C.parents.indexOf(d);R>=0&&C.parents.splice(R,1)}}}}for(var d in s)if(Object.prototype.hasOwnProperty.call(s,d))for(var b=O[d],M=s[d],P=0;P<M.length;P++){var L=M[P],R=b.children.indexOf(L);R>=0&&b.children.splice(R,1)}o("apply"),w=y;for(var d in u)Object.prototype.hasOwnProperty.call(u,d)&&(e[d]=u[d]);var _=null;for(var d in s)if(Object.prototype.hasOwnProperty.call(s,d)){for(var b=O[d],M=s[d],N=[],m=0;m<M.length;m++){var L=M[m],x=b.hot._acceptedDependencies[L];N.indexOf(x)>=0||N.push(x)}for(var m=0;m<N.length;m++){var x=N[m];try{x(s)}catch(I){_||(_=I)}}}for(var m=0;m<h.length;m++){var D=h[m],d=D.module;k=[d];try{f(d)}catch(I){if("function"==typeof D.errorHandler)try{D.errorHandler(I)}catch(I){_||(_=I)}else _||(_=I)}}return _?(o("fail"),n(_)):(o("idle"),void n(null,c))}function f(t){if(O[t])return O[t].exports;var n=O[t]={exports:{},id:t,loaded:!1,hot:i(t),parents:k,children:[]};return e[t].call(n.exports,n,n.exports,r(t)),n.loaded=!0,n.exports}var p=this.webpackHotUpdate;this.webpackHotUpdate=function(e,t){c(e,t),p&&p(e,t)};var h=!1;try{Object.defineProperty({},"x",{get:function(){}}),h=!0}catch(m){}var v,g,y,b=!0,w="1a561a4c5305df32a471",E={},k=[],S=[],T="idle",A=0,P=0,x={},C={},R={},O={};return f.m=e,f.c=O,f.p="",f.h=function(){return w},r(0)(0)}([function(e,t,n){(function(t){t.vimond||(t.vimond={}),e.exports=t.vimond.player=n(1)}).call(t,function(){return this}())},function(e,t,n){"use strict";var r=n(2),i=n(30),o=n(200),a=n(201),s={sdk:"5.6.795",build:"1.0.0"};e.exports=r.getPlayer(a,i,o,s)},function(e,t,n){"use strict";function r(e,t,n,d){function f(){return a.queryStringToObject(window.location.search)}function p(a,f,p,h){function m(){P||(T.hasModules("start")?(i.debug("currentPromise.isPending: ",A.isPending()),A.then(function(){i.debug("currentPromise.isPending: ",A.isPending()),A=T.cleanAndInitModules("start").fail(function(e){i.error("failed to initialize start"),k(O.errorTracker.types.INIT_START_POSTER_ERROR,e),S(e,S.types.fatal)})})["catch"](function(e){i.error(e),k(O.errorTracker.types.INIT_START_POSTER_ERROR,e)})):v())}function v(){P||A.then(function(){i.debug("currentPromise.isPending: ",A.isPending()),A=T.cleanAndInitModules("playback").fail(function(e){i.error("failed to initialize playback"),k(O.errorTracker.types.INIT_PLAYBACK_ERROR,e),S(e,S.types.fatal)})})["catch"](function(e){i.error(e),k(O.errorTracker.types.INIT_PLAYBACK_ERROR,e)})}function g(){P||(T.hasModules("end")?A.then(function(){i.debug("currentPromise.isPending: ",A.isPending()),A=T.cleanAndInitModules("end").fail(function(e){i.error("failed to initialize end"),k(O.errorTracker.types.INIT_END_POSTER_ERROR,e),S(e,S.types.fatal)})})["catch"](function(e){i.error(e),k(O.errorTracker.types.INIT_END_POSTER_ERROR,e)}):T.hasModules("start")?m():(i.debug("currentPromise.isPending: ",A.isPending()),A=T.clearCurrentState()))}function y(){return A.then(function(){return T.clearCurrentState()}).then(function(){return T.destroyModules("lifecycle")})["catch"](console.error.bind(console))}function b(e,t){t&&T.overrideConfiguration(t),isNaN(e)||(e={assetId:e}),T.hasDependency("model")&&T.getDependency("model").setPlaybackSpecification(e);try{i.debug("Starting player with with specification "+JSON.stringify(e))}catch(n){}e&&e.autoplay?v():m(),T.hasDependency("playerApi")&&T.getDependency("playerApi").setPlaybackSession(e)}function w(e){i.debug("showing loading screen"),T.hasDependency("loadingScreen")&&T.getDependency("loadingScreen").showLoadingscreen(e)}function E(e){i.debug("hiding loading screen"),T.hasDependency("loadingScreen")&&T.getDependency("loadingScreen").hideLoadingscreen(e)}function k(e,t){O.errorTracker.track({type:e,severity:O.errorTracker.severity.FATAL,originalError:t})}function S(e,t,n){i.error(t,e);var r=e&&e.message||e;t===S.types.fatal&&(r&&"NOT_STARTED"===r&&T.hasDependency("notStartedPoster")?T.getDependency("notStartedPoster").showPoster():T.hasDependency("errorScreen")&&T.getDependency("errorScreen").showMessage(r,t,n),P=!0,A=T.clearCurrentState().then(function(){P=!1})["catch"](console.error.bind(console)))}var T,A,P=!1;S.types={fatal:"fatal",retryable:"retryable",info:"info",picnic:"picnic"},h&&h.i18nStrings&&Object.getOwnPropertyNames(h.i18nStrings).forEach(function(e){n[e]=h.i18nStrings[e]}),T=new o(e,n,t),T.overrideConfiguration(p),l.configureLogging(T.getConfiguration("logging")),i=u.get("player"),i.debug("Player init",a,f,p,h);var x,C;if("string"==typeof f||f.tagName?x=f:f.mainContainer&&(x=f.mainContainer,f.videoElement&&(C=f.videoElement)),!C){C=document.createElement("video");var R=C.play();R&&R.then?R.then(function(){C.pause()})["catch"](function(e){i.debug(e)}):C.pause()}var O={appContainer:new c(x,C,T.getConfiguration("classNamePrefix")),loadStart:m,loadPlayback:v,loadEnd:g,loading:{show:w,hide:E},handleError:S,errorTracker:s.getErrorTracker(),configOverrider:T.overrideConfiguration,cease:y,playerInserter:t.instance&&r(T.getConfiguration("all"),t.instance,n,d),change:b,getDependency:T.getDependency,getCurrentModules:T.getCurrentModules};h&&Object.getOwnPropertyNames(h).forEach(function(e){O[e]=h[e]}),T.updateDependencies(O);var M=T.cleanAndInitModules("lifecycle");return A=M.then(function(){b(a)}).fail(function(e){S("Failed to initialize lifecycle components "+e,S.types.fatal),O.errorTracker.track({type:O.errorTracker.types.INIT_LIFECYCLE_COMPONENTS_ERROR,severity:O.errorTracker.severity.FATAL,originalError:e})}),M.then(function(){return T.hasDependency("playerApi")?T.getDependency("playerApi").exposed:null})}return{getQueryParametersAsObject:f,insert:p,version:d}}var i,o=n(3),a=n(21),s=n(22),c=n(25),u=n(7),l=n(29);e.exports={getPlayer:r}},function(e,t,n){"use strict";function r(e,t,n){function r(e){S.override(e)}function o(e){return S.getFor(e)}function c(e){return A.getFor(e).length>0}function u(e){var t=[];if(!e.dependencies)throw new Error(e.moduleName+" tried to initialize but module is missing dependencies property ");return Object.getOwnPropertyNames(e.dependencies).forEach(function(n){if("configuration"===n)t[n]=S.getFor(e.dependencies[n]);else if("strings"===n)t[n]=T.getFor(e.dependencies[n]);else{if("optional"!==e.dependencies[n]&&!E.hasOwnProperty(n))throw new Error(e.moduleName+" tried to initialize with missing dependency: "+n);t[n]=E[n]}}),e.init(t)}function l(){return"lifecycle"!=k?v(k):i()}function d(e){e&&(Object.getOwnPropertyNames(e).forEach(function(t){E[t]=e[t]}),Object.getOwnPropertyNames(x).forEach(function(t){x[t].forEach(function(t){t(e)})}))}function f(e){P[k]||(P[k]=[]),P[k].push(e)}function p(e){x[k]||(x[k]=[]),x[k].push(e),e(E)}function h(e){return s.debug("Started initializing "+e),l()["finally"](function(){return k=e,m(e)})["finally"](function(){s.debug("Finished initializing "+e)})}function m(e){function t(e){if(!e||"STOP"!==e&&(!e.api||!e.cleanup))throw new Error(o[r]+" did not return required properties, module should return: {api: {}, cleanup: function()}");"STOP"!==e&&(d(e.api),f(e.cleanup),e.newDependenciesCallback&&p(e.newDependenciesCallback))}function n(e,n){return e.then(function(e){return t(e),r++,i(u(n))})}var r=0,o=[];if(A.getFor(e).length>0){o.push(A.getFor(e)[0].moduleName);for(var a=i(u(A.getFor(e)[0])),s=1;s<A.getFor(e).length;s++)o.push(A.getFor(e)[s].moduleName),a=n(a,A.getFor(e)[s]);return a.then(function(e){t(e),r++})}return i()}function v(e){function t(e,t){return e.then(function(e){e&&d(e)})["finally"](function(){return i(t())})}if(P[e]&&P[e].length>0){var n=i();for(delete x[e];P[e].length>0;)n=t(n,P[e].pop());return n=n.then(function(e){d(e)})}return i()}function g(){return k}function y(e){return E[e]}function b(){return E}function w(e){return E.hasOwnProperty(e)}s.debug("init",e,t,n);var E={},k="lifecycle",S=a.create(e),T=a.create(t),A=a.create(n),P={},x={};return{hasModules:c,updateDependencies:d,getDependency:y,getCurrentModules:b,hasDependency:w,overrideConfiguration:r,getConfiguration:o,cleanAndInitModules:h,destroyModules:v,getCurrentState:g,clearCurrentState:l}}var i=n(4),o=n(7),a=n(8),s=o.get("moduleHandler");i.longStackSupport=!0,e.exports=r},function(e,t,n){(function(t,n){/*!
	 *
	 * Copyright 2009-2012 Kris Kowal under the terms of the MIT
	 * license found at http://github.com/kriskowal/q/raw/master/LICENSE
	 *
	 * With parts by Tyler Close
	 * Copyright 2007-2009 Tyler Close under the terms of the MIT X license found
	 * at http://www.opensource.org/licenses/mit-license.html
	 * Forked at ref_send.js version: 2009-05-11
	 *
	 * With parts by Mark Miller
	 * Copyright (C) 2011 Google Inc.
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 *
	 */
!function(t){"use strict";if("function"==typeof bootstrap)bootstrap("promise",t);else{e.exports=t()}}(function(){"use strict";function e(e){return function(){return X.apply(e,arguments)}}function r(e){return e===Object(e)}function i(e){return"[object StopIteration]"===ie(e)||e instanceof Y}function o(e,t){if(H&&t.stack&&"object"==typeof e&&null!==e&&e.stack&&e.stack.indexOf(oe)===-1){for(var n=[],r=t;r;r=r.source)r.stack&&n.unshift(r.stack);n.unshift(e.stack);var i=n.join("\n"+oe+"\n");e.stack=a(i)}}function a(e){for(var t=e.split("\n"),n=[],r=0;r<t.length;++r){var i=t[r];u(i)||s(i)||!i||n.push(i)}return n.join("\n")}function s(e){return e.indexOf("(module.js:")!==-1||e.indexOf("(node.js:")!==-1}function c(e){var t=/at .+ \((.+):(\d+):(?:\d+)\)$/.exec(e);if(t)return[t[1],Number(t[2])];var n=/at ([^ ]+):(\d+):(?:\d+)$/.exec(e);if(n)return[n[1],Number(n[2])];var r=/.*@(.+):(\d+)$/.exec(e);return r?[r[1],Number(r[2])]:void 0}function u(e){var t=c(e);if(!t)return!1;var n=t[0],r=t[1];return n===z&&r>=K&&r<=le}function l(){if(H)try{throw new Error}catch(e){var t=e.stack.split("\n"),n=t[0].indexOf("@")>0?t[1]:t[2],r=c(n);if(!r)return;return z=r[0],r[1]}}function d(e,t,n){return function(){return"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(t+" is deprecated, use "+n+" instead.",new Error("").stack),e.apply(e,arguments)}}function f(e){return e instanceof v?e:w(e)?R(e):C(e)}function p(){function e(e){t=e,o.source=e,$(n,function(t,n){f.nextTick(function(){e.promiseDispatch.apply(e,n)})},void 0),n=void 0,r=void 0}var t,n=[],r=[],i=te(p.prototype),o=te(v.prototype);if(o.promiseDispatch=function(e,i,o){var a=Z(arguments);n?(n.push(a),"when"===i&&o[1]&&r.push(o[1])):f.nextTick(function(){t.promiseDispatch.apply(t,a)})},o.valueOf=function(){if(n)return o;var e=y(t);return b(e)&&(t=e),e},o.inspect=function(){return t?t.inspect():{state:"pending"}},f.longStackSupport&&H)try{throw new Error}catch(a){o.stack=a.stack.substring(a.stack.indexOf("\n")+1)}return i.promise=o,i.resolve=function(n){t||e(f(n))},i.fulfill=function(n){t||e(C(n))},i.reject=function(n){t||e(x(n))},i.notify=function(e){t||$(r,function(t,n){f.nextTick(function(){n(e)})},void 0)},i}function h(e){if("function"!=typeof e)throw new TypeError("resolver must be a function.");var t=p();try{e(t.resolve,t.reject,t.notify)}catch(n){t.reject(n)}return t.promise}function m(e){return h(function(t,n){for(var r=0,i=e.length;r<i;r++)f(e[r]).then(t,n)})}function v(e,t,n){void 0===t&&(t=function(e){return x(new Error("Promise does not support operation: "+e))}),void 0===n&&(n=function(){return{state:"unknown"}});var r=te(v.prototype);if(r.promiseDispatch=function(n,i,o){var a;try{a=e[i]?e[i].apply(r,o):t.call(r,i,o)}catch(s){a=x(s)}n&&n(a)},r.inspect=n,n){var i=n();"rejected"===i.state&&(r.exception=i.reason),r.valueOf=function(){var e=n();return"pending"===e.state||"rejected"===e.state?r:e.value}}return r}function g(e,t,n,r){return f(e).then(t,n,r)}function y(e){if(b(e)){var t=e.inspect();if("fulfilled"===t.state)return t.value}return e}function b(e){return e instanceof v}function w(e){return r(e)&&"function"==typeof e.then}function E(e){return b(e)&&"pending"===e.inspect().state}function k(e){return!b(e)||"fulfilled"===e.inspect().state}function S(e){return b(e)&&"rejected"===e.inspect().state}function T(){ae.length=0,se.length=0,ue||(ue=!0)}function A(e,n){ue&&("object"==typeof t&&"function"==typeof t.emit&&f.nextTick.runAfter(function(){Q(se,e)!==-1&&(t.emit("unhandledRejection",n,e),ce.push(e))}),se.push(e),n&&"undefined"!=typeof n.stack?ae.push(n.stack):ae.push("(no stack) "+n))}function P(e){if(ue){var n=Q(se,e);n!==-1&&("object"==typeof t&&"function"==typeof t.emit&&f.nextTick.runAfter(function(){var r=Q(ce,e);r!==-1&&(t.emit("rejectionHandled",ae[n],e),ce.splice(r,1))}),se.splice(n,1),ae.splice(n,1))}}function x(e){var t=v({when:function(t){return t&&P(this),t?t(e):this}},function(){return this},function(){return{state:"rejected",reason:e}});return A(t,e),t}function C(e){return v({when:function(){return e},get:function(t){return e[t]},set:function(t,n){e[t]=n},"delete":function(t){delete e[t]},post:function(t,n){return null===t||void 0===t?e.apply(void 0,n):e[t].apply(e,n)},apply:function(t,n){return e.apply(t,n)},keys:function(){return re(e)}},void 0,function(){return{state:"fulfilled",value:e}})}function R(e){var t=p();return f.nextTick(function(){try{e.then(t.resolve,t.reject,t.notify)}catch(n){t.reject(n)}}),t.promise}function O(e){return v({isDef:function(){}},function(t,n){return D(e,t,n)},function(){return f(e).inspect()})}function M(e,t,n){return f(e).spread(t,n)}function L(e){return function(){function t(e,t){var a;if("undefined"==typeof StopIteration){try{a=n[e](t)}catch(s){return x(s)}return a.done?f(a.value):g(a.value,r,o)}try{a=n[e](t)}catch(s){return i(s)?f(s.value):x(s)}return g(a,r,o)}var n=e.apply(this,arguments),r=t.bind(t,"next"),o=t.bind(t,"throw");return r()}}function _(e){f.done(f.async(e)())}function N(e){throw new Y(e)}function I(e){return function(){return M([this,U(arguments)],function(t,n){return e.apply(t,n)})}}function D(e,t,n){return f(e).dispatch(t,n)}function U(e){return g(e,function(e){var t=0,n=p();return $(e,function(r,i,o){var a;b(i)&&"fulfilled"===(a=i.inspect()).state?e[o]=a.value:(++t,g(i,function(r){e[o]=r,0===--t&&n.resolve(e)},n.reject,function(e){n.notify({index:o,value:e})}))},void 0),0===t&&n.resolve(e),n.promise})}function j(e){if(0===e.length)return f.resolve();var t=f.defer(),n=0;return $(e,function(r,i,o){function a(e){t.resolve(e)}function s(){n--,0===n&&t.reject(new Error("Can't get fulfillment value from any promise, all promises were rejected."))}function c(e){t.notify({index:o,value:e})}var u=e[o];n++,g(u,a,s,c)},void 0),t.promise}function F(e){return g(e,function(e){return e=ee(e,f),g(U(ee(e,function(e){return g(e,G,G)})),function(){return e})})}function V(e){return f(e).allSettled()}function B(e,t){return f(e).then(void 0,void 0,t)}function q(e,t){return f(e).nodeify(t)}var H=!1;try{throw new Error}catch(W){H=!!W.stack}var z,Y,K=l(),G=function(){},J=function(){function e(){for(var e,t;i.next;)i=i.next,e=i.task,i.task=void 0,t=i.domain,t&&(i.domain=void 0,t.enter()),r(e,t);for(;u.length;)e=u.pop(),r(e);a=!1}function r(t,n){try{t()}catch(r){if(c)throw n&&n.exit(),setTimeout(e,0),n&&n.enter(),r;setTimeout(function(){throw r},0)}n&&n.exit()}var i={task:void 0,next:null},o=i,a=!1,s=void 0,c=!1,u=[];if(J=function(e){o=o.next={task:e,domain:c&&t.domain,next:null},a||(a=!0,s())},"object"==typeof t&&"[object process]"===t.toString()&&t.nextTick)c=!0,s=function(){t.nextTick(e)};else if("function"==typeof n)s="undefined"!=typeof window?n.bind(window,e):function(){n(e)};else if("undefined"!=typeof MessageChannel){var l=new MessageChannel;l.port1.onmessage=function(){s=d,l.port1.onmessage=e,e()};var d=function(){l.port2.postMessage(0)};s=function(){setTimeout(e,0),d()}}else s=function(){setTimeout(e,0)};return J.runAfter=function(e){u.push(e),a||(a=!0,s())},J}(),X=Function.call,Z=e(Array.prototype.slice),$=e(Array.prototype.reduce||function(e,t){var n=0,r=this.length;if(1===arguments.length)for(;;){if(n in this){t=this[n++];break}if(++n>=r)throw new TypeError}for(;n<r;n++)n in this&&(t=e(t,this[n],n));return t}),Q=e(Array.prototype.indexOf||function(e){for(var t=0;t<this.length;t++)if(this[t]===e)return t;return-1}),ee=e(Array.prototype.map||function(e,t){var n=this,r=[];return $(n,function(i,o,a){r.push(e.call(t,o,a,n))},void 0),r}),te=Object.create||function(e){function t(){}return t.prototype=e,new t},ne=e(Object.prototype.hasOwnProperty),re=Object.keys||function(e){var t=[];for(var n in e)ne(e,n)&&t.push(n);return t},ie=e(Object.prototype.toString);Y="undefined"!=typeof ReturnValue?ReturnValue:function(e){this.value=e};var oe="From previous event:";f.resolve=f,f.nextTick=J,f.longStackSupport=!1,"object"==typeof t&&t&&t.env&&t.env.Q_DEBUG&&(f.longStackSupport=!0),f.defer=p,p.prototype.makeNodeResolver=function(){var e=this;return function(t,n){t?e.reject(t):arguments.length>2?e.resolve(Z(arguments,1)):e.resolve(n)}},f.Promise=h,f.promise=h,h.race=m,h.all=U,h.reject=x,h.resolve=f,f.passByCopy=function(e){return e},v.prototype.passByCopy=function(){return this},f.join=function(e,t){return f(e).join(t)},v.prototype.join=function(e){return f([this,e]).spread(function(e,t){if(e===t)return e;throw new Error("Can't join: not the same: "+e+" "+t)})},f.race=m,v.prototype.race=function(){return this.then(f.race)},f.makePromise=v,v.prototype.toString=function(){return"[object Promise]"},v.prototype.then=function(e,t,n){function r(t){try{return"function"==typeof e?e(t):t}catch(n){return x(n)}}function i(e){if("function"==typeof t){o(e,s);try{return t(e)}catch(n){return x(n)}}return x(e)}function a(e){return"function"==typeof n?n(e):e}var s=this,c=p(),u=!1;return f.nextTick(function(){s.promiseDispatch(function(e){u||(u=!0,c.resolve(r(e)))},"when",[function(e){u||(u=!0,c.resolve(i(e)))}])}),s.promiseDispatch(void 0,"when",[void 0,function(e){var t,n=!1;try{t=a(e)}catch(r){if(n=!0,!f.onerror)throw r;f.onerror(r)}n||c.notify(t)}]),c.promise},f.tap=function(e,t){return f(e).tap(t)},v.prototype.tap=function(e){return e=f(e),this.then(function(t){return e.fcall(t).thenResolve(t)})},f.when=g,v.prototype.thenResolve=function(e){return this.then(function(){return e})},f.thenResolve=function(e,t){return f(e).thenResolve(t)},v.prototype.thenReject=function(e){return this.then(function(){throw e})},f.thenReject=function(e,t){return f(e).thenReject(t)},f.nearer=y,f.isPromise=b,f.isPromiseAlike=w,f.isPending=E,v.prototype.isPending=function(){return"pending"===this.inspect().state},f.isFulfilled=k,v.prototype.isFulfilled=function(){return"fulfilled"===this.inspect().state},f.isRejected=S,v.prototype.isRejected=function(){return"rejected"===this.inspect().state};var ae=[],se=[],ce=[],ue=!0;f.resetUnhandledRejections=T,f.getUnhandledReasons=function(){return ae.slice()},f.stopUnhandledRejectionTracking=function(){T(),ue=!1},T(),f.reject=x,f.fulfill=C,f.master=O,f.spread=M,v.prototype.spread=function(e,t){return this.all().then(function(t){return e.apply(void 0,t)},t)},f.async=L,f.spawn=_,f["return"]=N,f.promised=I,f.dispatch=D,v.prototype.dispatch=function(e,t){var n=this,r=p();return f.nextTick(function(){n.promiseDispatch(r.resolve,e,t)}),r.promise},f.get=function(e,t){return f(e).dispatch("get",[t])},v.prototype.get=function(e){return this.dispatch("get",[e])},f.set=function(e,t,n){return f(e).dispatch("set",[t,n])},v.prototype.set=function(e,t){return this.dispatch("set",[e,t])},f.del=f["delete"]=function(e,t){return f(e).dispatch("delete",[t])},v.prototype.del=v.prototype["delete"]=function(e){return this.dispatch("delete",[e])},f.mapply=f.post=function(e,t,n){return f(e).dispatch("post",[t,n])},v.prototype.mapply=v.prototype.post=function(e,t){return this.dispatch("post",[e,t])},f.send=f.mcall=f.invoke=function(e,t){return f(e).dispatch("post",[t,Z(arguments,2)])},v.prototype.send=v.prototype.mcall=v.prototype.invoke=function(e){return this.dispatch("post",[e,Z(arguments,1)])},f.fapply=function(e,t){return f(e).dispatch("apply",[void 0,t])},v.prototype.fapply=function(e){return this.dispatch("apply",[void 0,e])},f["try"]=f.fcall=function(e){return f(e).dispatch("apply",[void 0,Z(arguments,1)])},v.prototype.fcall=function(){return this.dispatch("apply",[void 0,Z(arguments)])},f.fbind=function(e){var t=f(e),n=Z(arguments,1);return function(){return t.dispatch("apply",[this,n.concat(Z(arguments))])}},v.prototype.fbind=function(){var e=this,t=Z(arguments);return function(){return e.dispatch("apply",[this,t.concat(Z(arguments))])}},f.keys=function(e){return f(e).dispatch("keys",[])},v.prototype.keys=function(){return this.dispatch("keys",[])},f.all=U,v.prototype.all=function(){return U(this)},f.any=j,v.prototype.any=function(){return j(this)},f.allResolved=d(F,"allResolved","allSettled"),v.prototype.allResolved=function(){return F(this)},f.allSettled=V,v.prototype.allSettled=function(){return this.then(function(e){return U(ee(e,function(e){function t(){return e.inspect()}return e=f(e),e.then(t,t)}))})},f.fail=f["catch"]=function(e,t){return f(e).then(void 0,t)},v.prototype.fail=v.prototype["catch"]=function(e){return this.then(void 0,e)},f.progress=B,v.prototype.progress=function(e){return this.then(void 0,void 0,e)},f.fin=f["finally"]=function(e,t){return f(e)["finally"](t)},v.prototype.fin=v.prototype["finally"]=function(e){return e=f(e),this.then(function(t){return e.fcall().then(function(){return t})},function(t){return e.fcall().then(function(){throw t})})},f.done=function(e,t,n,r){return f(e).done(t,n,r)},v.prototype.done=function(e,n,r){var i=function(e){f.nextTick(function(){if(o(e,a),!f.onerror)throw e;f.onerror(e)})},a=e||n||r?this.then(e,n,r):this;"object"==typeof t&&t&&t.domain&&(i=t.domain.bind(i)),a.then(void 0,i)},f.timeout=function(e,t,n){return f(e).timeout(t,n)},v.prototype.timeout=function(e,t){var n=p(),r=setTimeout(function(){t&&"string"!=typeof t||(t=new Error(t||"Timed out after "+e+" ms"),t.code="ETIMEDOUT"),n.reject(t)},e);return this.then(function(e){clearTimeout(r),n.resolve(e)},function(e){clearTimeout(r),n.reject(e)},n.notify),n.promise},f.delay=function(e,t){return void 0===t&&(t=e,e=void 0),f(e).delay(t)},v.prototype.delay=function(e){return this.then(function(t){var n=p();return setTimeout(function(){n.resolve(t)},e),n.promise})},f.nfapply=function(e,t){return f(e).nfapply(t)},v.prototype.nfapply=function(e){var t=p(),n=Z(e);return n.push(t.makeNodeResolver()),this.fapply(n).fail(t.reject),t.promise},f.nfcall=function(e){var t=Z(arguments,1);return f(e).nfapply(t)},v.prototype.nfcall=function(){var e=Z(arguments),t=p();return e.push(t.makeNodeResolver()),this.fapply(e).fail(t.reject),t.promise},f.nfbind=f.denodeify=function(e){var t=Z(arguments,1);return function(){var n=t.concat(Z(arguments)),r=p();return n.push(r.makeNodeResolver()),f(e).fapply(n).fail(r.reject),r.promise}},v.prototype.nfbind=v.prototype.denodeify=function(){var e=Z(arguments);return e.unshift(this),f.denodeify.apply(void 0,e)},f.nbind=function(e,t){var n=Z(arguments,2);return function(){function r(){return e.apply(t,arguments)}var i=n.concat(Z(arguments)),o=p();return i.push(o.makeNodeResolver()),f(r).fapply(i).fail(o.reject),o.promise}},v.prototype.nbind=function(){var e=Z(arguments,0);return e.unshift(this),f.nbind.apply(void 0,e)},f.nmapply=f.npost=function(e,t,n){return f(e).npost(t,n)},v.prototype.nmapply=v.prototype.npost=function(e,t){var n=Z(t||[]),r=p();return n.push(r.makeNodeResolver()),this.dispatch("post",[e,n]).fail(r.reject),r.promise},f.nsend=f.nmcall=f.ninvoke=function(e,t){var n=Z(arguments,2),r=p();return n.push(r.makeNodeResolver()),f(e).dispatch("post",[t,n]).fail(r.reject),r.promise},v.prototype.nsend=v.prototype.nmcall=v.prototype.ninvoke=function(e){var t=Z(arguments,1),n=p();return t.push(n.makeNodeResolver()),this.dispatch("post",[e,t]).fail(n.reject),n.promise},f.nodeify=q,v.prototype.nodeify=function(e){return e?void this.then(function(t){f.nextTick(function(){e(null,t)})},function(t){f.nextTick(function(){e(t)})}):this},f.noConflict=function(){throw new Error("Q.noConflict only works when Q is used as a global")};var le=l();return f})}).call(t,n(5),n(6).setImmediate)},function(e,t){function n(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function i(e){if(l===setTimeout)return setTimeout(e,0);if((l===n||!l)&&setTimeout)return l=setTimeout,setTimeout(e,0);try{return l(e,0)}catch(t){try{return l.call(null,e,0)}catch(t){return l.call(this,e,0)}}}function o(e){if(d===clearTimeout)return clearTimeout(e);if((d===r||!d)&&clearTimeout)return d=clearTimeout,clearTimeout(e);try{return d(e)}catch(t){try{return d.call(null,e)}catch(t){return d.call(this,e)}}}function a(){m&&p&&(m=!1,p.length?h=p.concat(h):v=-1,h.length&&s())}function s(){if(!m){var e=i(a);m=!0;for(var t=h.length;t;){for(p=h,h=[];++v<t;)p&&p[v].run();v=-1,t=h.length}p=null,m=!1,o(e)}}function c(e,t){this.fun=e,this.array=t}function u(){}var l,d,f=e.exports={};!function(){try{l="function"==typeof setTimeout?setTimeout:n}catch(e){l=n}try{d="function"==typeof clearTimeout?clearTimeout:r}catch(e){d=r}}();var p,h=[],m=!1,v=-1;f.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];h.push(new c(e,t)),1!==h.length||m||i(s)},c.prototype.run=function(){this.fun.apply(null,this.array)},f.title="browser",f.browser=!0,f.env={},f.argv=[],f.version="",f.versions={},f.on=u,f.addListener=u,f.once=u,f.off=u,f.removeListener=u,f.removeAllListeners=u,f.emit=u,f.binding=function(e){throw new Error("process.binding is not supported")},f.cwd=function(){return"/"},f.chdir=function(e){throw new Error("process.chdir is not supported")},f.umask=function(){return 0}},function(e,t,n){(function(e,r){function i(e,t){this._id=e,this._clearFn=t}var o=n(5).nextTick,a=Function.prototype.apply,s=Array.prototype.slice,c={},u=0;t.setTimeout=function(){return new i(a.call(setTimeout,window,arguments),clearTimeout)},t.setInterval=function(){return new i(a.call(setInterval,window,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e.close()},i.prototype.unref=i.prototype.ref=function(){},i.prototype.close=function(){this._clearFn.call(window,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},t.setImmediate="function"==typeof e?e:function(e){var n=u++,r=!(arguments.length<2)&&s.call(arguments,1);return c[n]=!0,o(function(){c[n]&&(r?e.apply(null,r):e.call(null),t.clearImmediate(n))}),n},t.clearImmediate="function"==typeof r?r:function(e){delete c[e]}}).call(t,n(6).setImmediate,n(6).clearImmediate)},function(e,t,n){var r,i;/*!
	 * js-logger - http://github.com/jonnyreeves/js-logger
	 * Jonny Reeves, http://jonnyreeves.co.uk/
	 * js-logger may be freely distributed under the MIT license.
	 */
!function(o){"use strict";var a={};a.VERSION="1.3.0";var s,c={},u=function(e,t){return function(){return t.apply(e,arguments)}},l=function(){var e,t,n=arguments,r=n[0];for(t=1;t<n.length;t++)for(e in n[t])e in r||!n[t].hasOwnProperty(e)||(r[e]=n[t][e]);return r},d=function(e,t){return{value:e,name:t}};a.DEBUG=d(1,"DEBUG"),a.INFO=d(2,"INFO"),a.TIME=d(3,"TIME"),a.WARN=d(4,"WARN"),a.ERROR=d(8,"ERROR"),a.OFF=d(99,"OFF");var f=function(e){this.context=e,this.setLevel(e.filterLevel),this.log=this.info};f.prototype={setLevel:function(e){e&&"value"in e&&(this.context.filterLevel=e)},enabledFor:function(e){var t=this.context.filterLevel;return e.value>=t.value},debug:function(){this.invoke(a.DEBUG,arguments)},info:function(){this.invoke(a.INFO,arguments)},warn:function(){this.invoke(a.WARN,arguments)},error:function(){this.invoke(a.ERROR,arguments)},time:function(e){"string"==typeof e&&e.length>0&&this.invoke(a.TIME,[e,"start"])},timeEnd:function(e){"string"==typeof e&&e.length>0&&this.invoke(a.TIME,[e,"end"])},invoke:function(e,t){s&&this.enabledFor(e)&&s(t,l({level:e},this.context))}};var p=new f({filterLevel:a.OFF});!function(){var e=a;e.enabledFor=u(p,p.enabledFor),e.debug=u(p,p.debug),e.time=u(p,p.time),e.timeEnd=u(p,p.timeEnd),e.info=u(p,p.info),e.warn=u(p,p.warn),e.error=u(p,p.error),e.log=e.info}(),a.setHandler=function(e){s=e},a.setLevel=function(e){p.setLevel(e);for(var t in c)c.hasOwnProperty(t)&&c[t].setLevel(e)},a.get=function(e){return c[e]||(c[e]=new f(l({name:e},p.context)))},a.createDefaultHandler=function(e){e=e||{},e.formatter=e.formatter||function(e,t){t.name&&e.unshift("["+t.name+"]")};var t={},n=function(e,t){Function.prototype.apply.call(e,console,t)};return"undefined"==typeof console?function(){}:function(r,i){r=Array.prototype.slice.call(r);var o,s=console.log;i.level===a.TIME?(o=(i.name?"["+i.name+"] ":"")+r[0],"start"===r[1]?console.time?console.time(o):t[o]=(new Date).getTime():console.timeEnd?console.timeEnd(o):n(s,[o+": "+((new Date).getTime()-t[o])+"ms"])):(i.level===a.WARN&&console.warn?s=console.warn:i.level===a.ERROR&&console.error?s=console.error:i.level===a.INFO&&console.info&&(s=console.info),e.formatter(r,i),n(s,r))}},a.useDefaults=function(e){a.setLevel(e&&e.defaultLevel||a.DEBUG),a.setHandler(a.createDefaultHandler(e))},r=a,i="function"==typeof r?r.call(t,n,t,e):r,!(void 0!==i&&(e.exports=i))}(this)},function(e,t,n){"use strict";function r(e,t){return"all"===t?e:"string"==typeof t&&t.length>0?t.split(".").reduce(function(e,t){return e&&e[t]||{}},e):null}function i(e){return{getFor:function(t,n){if(n&&""!==t){var i=o(r(e,"global")),s=o(r(e,t));return a.combine(i,s,!0)}return o(r(e,t))},override:function(t){e=a.combine(e,t,!0)}}}var o=n(9),a=n(21);e.exports={create:i}},function(e,t,n){function r(e,t,n){return"function"==typeof t?i(e,!0,o(t,n,3)):i(e,!0)}var i=n(10),o=n(20);e.exports=r},function(e,t,n){(function(t){function r(e,t,n,o,p,m,g){var y;if(n&&(y=p?n(e,o,p):n(e)),void 0!==y)return y;if(!u(e))return e;var b=h(e);if(b){if(y=a(e),!t)return l(e,y)}else{var w=H.call(e),k=w==E;if(w!=T&&w!=v&&(!k||p))return V[w]?c(e,w,t):p?e:{};if(y=s(k?{}:e),!t)return f(y,e)}m||(m=[]),g||(g=[]);for(var S=m.length;S--;)if(m[S]==e)return g[S];return m.push(e),g.push(y),(b?d:i)(e,function(i,o){y[o]=r(i,t,n,o,e,m,g)}),y}function i(e,t){return p(e,t,m)}function o(e){var t=new W(e.byteLength),n=new z(t);return n.set(new z(e)),t}function a(e){var t=e.length,n=new e.constructor(t);return t&&"string"==typeof e[0]&&q.call(e,"index")&&(n.index=e.index,n.input=e.input),n}function s(e){var t=e.constructor;return"function"==typeof t&&t instanceof t||(t=Object),new t}function c(e,t,n){var r=e.constructor;switch(t){case R:return o(e);case y:case b:return new r((+e));case O:case M:case L:case _:case N:case I:case D:case U:case j:var i=e.buffer;return new r(n?o(i):i,e.byteOffset,e.length);case S:case x:return new r(e);case A:var a=new r(e.source,F.exec(e));a.lastIndex=e.lastIndex}return a}function u(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}var l=n(11),d=n(12),f=n(13),p=n(19),h=n(18),m=n(15),v="[object Arguments]",g="[object Array]",y="[object Boolean]",b="[object Date]",w="[object Error]",E="[object Function]",k="[object Map]",S="[object Number]",T="[object Object]",A="[object RegExp]",P="[object Set]",x="[object String]",C="[object WeakMap]",R="[object ArrayBuffer]",O="[object Float32Array]",M="[object Float64Array]",L="[object Int8Array]",_="[object Int16Array]",N="[object Int32Array]",I="[object Uint8Array]",D="[object Uint8ClampedArray]",U="[object Uint16Array]",j="[object Uint32Array]",F=/\w*$/,V={};V[v]=V[g]=V[R]=V[y]=V[b]=V[O]=V[M]=V[L]=V[_]=V[N]=V[S]=V[T]=V[A]=V[x]=V[I]=V[D]=V[U]=V[j]=!0,V[w]=V[E]=V[k]=V[P]=V[C]=!1;var B=Object.prototype,q=B.hasOwnProperty,H=B.toString,W=t.ArrayBuffer,z=t.Uint8Array;e.exports=r}).call(t,function(){return this}())},function(e,t){function n(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}e.exports=n},function(e,t){function n(e,t){for(var n=-1,r=e.length;++n<r&&t(e[n],n,e)!==!1;);return e}e.exports=n},function(e,t,n){function r(e,t){return null==t?e:i(t,o(t),e)}var i=n(14),o=n(15);e.exports=r},function(e,t){function n(e,t,n){n||(n={});for(var r=-1,i=t.length;++r<i;){var o=t[r];n[o]=e[o]}return n}e.exports=n},function(e,t,n){function r(e){return function(t){return null==t?void 0:t[e]}}function i(e){return null!=e&&a(y(e))}function o(e,t){return e="number"==typeof e||p.test(e)?+e:-1,t=null==t?g:t,e>-1&&e%1==0&&e<t}function a(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=g}function s(e){for(var t=u(e),n=t.length,r=n&&e.length,i=!!r&&a(r)&&(f(e)||d(e)),s=-1,c=[];++s<n;){var l=t[s];(i&&o(l,r)||m.call(e,l))&&c.push(l)}return c}function c(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function u(e){if(null==e)return[];c(e)||(e=Object(e));var t=e.length;t=t&&a(t)&&(f(e)||d(e))&&t||0;for(var n=e.constructor,r=-1,i="function"==typeof n&&n.prototype===e,s=Array(t),u=t>0;++r<t;)s[r]=r+"";for(var l in e)u&&o(l,t)||"constructor"==l&&(i||!m.call(e,l))||s.push(l);return s}var l=n(16),d=n(17),f=n(18),p=/^\d+$/,h=Object.prototype,m=h.hasOwnProperty,v=l(Object,"keys"),g=9007199254740991,y=r("length"),b=v?function(e){var t=null==e?void 0:e.constructor;return"function"==typeof t&&t.prototype===e||"function"!=typeof e&&i(e)?s(e):c(e)?v(e):[]}:s;e.exports=b},function(e,t){function n(e){return!!e&&"object"==typeof e}function r(e,t){var n=null==e?void 0:e[t];return a(n)?n:void 0}function i(e){return o(e)&&f.call(e)==s}function o(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function a(e){return null!=e&&(i(e)?p.test(l.call(e)):n(e)&&c.test(e))}var s="[object Function]",c=/^\[object .+?Constructor\]$/,u=Object.prototype,l=Function.prototype.toString,d=u.hasOwnProperty,f=u.toString,p=RegExp("^"+l.call(d).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=r},function(e,t){function n(e){return i(e)&&h.call(e,"callee")&&(!v.call(e,"callee")||m.call(e)==l)}function r(e){return null!=e&&a(e.length)&&!o(e)}function i(e){return c(e)&&r(e)}function o(e){var t=s(e)?m.call(e):"";return t==d||t==f}function a(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=u}function s(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function c(e){return!!e&&"object"==typeof e}var u=9007199254740991,l="[object Arguments]",d="[object Function]",f="[object GeneratorFunction]",p=Object.prototype,h=p.hasOwnProperty,m=p.toString,v=p.propertyIsEnumerable;e.exports=n},function(e,t){function n(e){return!!e&&"object"==typeof e}function r(e,t){var n=null==e?void 0:e[t];return s(n)?n:void 0}function i(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=g}function o(e){return a(e)&&h.call(e)==u}function a(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function s(e){return null!=e&&(o(e)?m.test(f.call(e)):n(e)&&l.test(e))}var c="[object Array]",u="[object Function]",l=/^\[object .+?Constructor\]$/,d=Object.prototype,f=Function.prototype.toString,p=d.hasOwnProperty,h=d.toString,m=RegExp("^"+f.call(p).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),v=r(Array,"isArray"),g=9007199254740991,y=v||function(e){return n(e)&&i(e.length)&&h.call(e)==c};e.exports=y},function(e,t){function n(e){return function(t,n,r){for(var i=-1,o=Object(t),a=r(t),s=a.length;s--;){var c=a[e?s:++i];if(n(o[c],c,o)===!1)break}return t}}var r=n();e.exports=r},function(e,t){function n(e,t,n){if("function"!=typeof e)return r;if(void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 3:return function(n,r,i){return e.call(t,n,r,i)};case 4:return function(n,r,i,o){return e.call(t,n,r,i,o)};case 5:return function(n,r,i,o,a){return e.call(t,n,r,i,o,a)}}return function(){return e.apply(t,arguments)}}function r(e){return e}e.exports=n},function(e,t,n){"use strict";function r(e){var t=null!=e&&e.constructor==={}.constructor;return t}function i(e,t,n){var o={};if(e)for(var a in e)e.hasOwnProperty(a)&&(o[a]=e[a]);if(t)for(var s in t)t.hasOwnProperty(s)&&(n&&r(e[s])&&r(t[s])?o[s]=i(e[s],t[s],n):o[s]=t[s]);return o}function o(e){return e>9?e:"0"+e.toString()}function a(e,t){var n=e.className.split(" ");return n.indexOf(t)!==-1}function s(e,t){if(t.length>0){var n=e.className.split(" "),r=t.split(" ");r.forEach(function(e){n.indexOf(e)===-1&&n.push(e)}),e.className=n.join(" ")}}function c(e,t){if(t.length>0){var n=e.className.split(" "),r=t.split(" ");r.forEach(function(e){var t=n.indexOf(e);t!==-1&&n.splice(t,1)}),e.className=n.join(" ")}}var u=n(4),l="{([a-zA-Z0-9_]*)}",d=function(e){if(e){var t=navigator&&navigator.userAgent.indexOf("MSIE 8")>0&&navigator.userAgent.indexOf("Trident")>0;if(e.getMonth)return e;if(t){var n=e.lastIndexOf("+");if(n>e.length-7)e=e.substring(0,n);else{var r=e.lastIndexOf("-");r>e.length-7&&(e=e.substring(0,r))}return new Date(Date.parse(e.replace(/\-/gi,"/").replace(/T/gi," ").split(".")[0]))}return new Date(e)}};e.exports={queryStringToObject:function(e){var t={};return e.replace(new RegExp("([^?=&]+)(=([^&]*))?","g"),function(e,n,r,i){t[n]="false"!=i&&("true"==i||i)}),t},enforcePrecision:function(e,t){return+e.toFixed(t)},objectToQueryString:function(e,t){var n=[];if(e)for(var r in e)e.hasOwnProperty(r)&&null!=e[r]&&(e[r].noEscape&&null!=e[r].value?n[n.length]=r+"="+e[r].value:n[n.length]=r+"="+encodeURIComponent(e[r]));var i=n.join("&");return i.length>0&&(i=t+i),i},format:function(e,t){var n=e||"";for(var r in t)if(t.hasOwnProperty(r)){var i=new RegExp("{"+r+"}","ig");n=n.replace(i,t[r])}return n},conditionalFormat:function(e,t,n){for(var r=e||"",i=[],o=new RegExp(l,"g"),a=o.exec(e);null!=a;)i.push(a[1]),a=o.exec(e);i.forEach(function(e){var n=new RegExp("({)(([^}])+?)({"+e+"})(.+?)(})","g");if(null!=t[e]){var i=new RegExp("{"+e+"}","g");r=r.match(n)?r.replace(n,"$2"+t[e]+"$5"):r.replace(i,t[e])}else r=r.replace(n,"")});var s=n?r.indexOf("{"):-1;return s!=-1&&r.indexOf("}")>s?"":r},combine:i,completeUrl:function(e,t){return e&&t&&0!==t.indexOf("http")&&0!==t.indexOf("//")?0===t.indexOf("/")&&0!==t.indexOf("http")&&0!==t.indexOf("//")?t:e+t:t},isJson:r,failsafe:function(e,t){try{return e.apply(this,t)}catch(n){return n}},notifyRejection:function(e){return function(e){}},notifyFulfillment:function(e){return function(e){var t=u.defer();return t.fulfill(e),t.promise}},empty:function(e){for(;e.firstChild;)e.removeChild(e.firstChild)},addEventListener:function(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent&&e.attachEvent("on"+t,n)},wrapIn16by9FillContainer:function(e,t){t&&parseInt(t,10)==t&&(t+="px");var n=document.createElement("div");n.style.position="relative",n.style.height="0",n.style.paddingBottom="56.25%",t&&(n.style.paddingTop=t),n.style.border="0",n.style.margin="0";var r=document.createElement("div");return r.style.position="absolute",r.style.width="100%",r.style.height="100%",r.style.left="0",r.style.top="0",r.style.border="0",r.style.margin="0",r.style.padding="0",n.appendChild(r),e.appendChild(n),r},getFullscreenElement:function(){return document.fullScreenElement||document.fullscreenElement||document.webkitFullscreenElement||document.webkitFullScreenElement||document.mozFullScreenElement||document.msFullscreenElement},enterFullscreen:function(e){return e.requestFullscreen?(e.requestFullscreen(),!0):e.mozRequestFullScreen?(e.mozRequestFullScreen(),!0):e.webkitRequestFullscreen?(e.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT),!0):e.webkitRequestFullScreen?(e.webkitRequestFullScreen(),!0):!!e.msRequestFullscreen&&(e.msRequestFullscreen(),!0)},exitFullscreen:function(){document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.webkitExitFullScreen?document.webkitExitFullScreen():document.msExitFullscreen&&document.msExitFullscreen()},notifyFullscreenChange:function(e){var t=["fullscreenchange","mozfullscreenchange","webkitfullscreenchange","MSFullscreenChange"];return t.forEach(function(t){document.addEventListener(t,e)}),function(){t.forEach(function(t){document.removeEventListener(t,e)})}},addClass:s,hasClass:a,removeClass:c,promiseScript:function(e,t,n){function r(){return a.reduce(function(e,t){return e?e[t]:null},window)}var i=u.defer(),o=window.setTimeout(function(){i.reject(new Error("Timed out waiting for promise in script dependency "+e))},9e3),a=e.split("."),s=r();if(s)window.clearTimeout(o),n||i.fulfill(s);else{var c=document.createElement("script");c.readyState?c.onreadystatechange=function(){"loaded"!=c.readyState&&"complete"!=c.readyState||(c.onreadystatechange=null,l())}:c.onload=function(){l()},c.onerror=function(e){i.reject(new Error("Script loading failed. "+(e&e.message)))};var l=function(){if(!n){window.clearTimeout(o);var t=r();t?i.fulfill(t):i.reject(new Error("Script loaded, but global property '"+e+"' not resolved."))}};c.setAttribute("type","text/javascript"),c.setAttribute("src",t),document.getElementsByTagName("head")[0].appendChild(c)}return i.promise},loadGlobalScript:function(e,t,n){if(n=n||function(){},window[e])n(window[e]);else{var r=document.createElement("script");r.readyState?r.onreadystatechange=function(){"loaded"!=r.readyState&&"complete"!=r.readyState||(r.onreadystatechange=null,i())}:r.onload=function(){i()};var i=function(){window[e]&&n(window[e])};r.setAttribute("type","text/javascript"),r.setAttribute("src",t),document.getElementsByTagName("head")[0].appendChild(r)}},formatTimeFromSeconds:function(e,t){if(e=isNaN(e)?0:Math.round(e),t&&0===e)return"";var n="";e<0&&(n="-",e=-e);var r=e>=86400?Math.floor(e/86400)+".":"",i=e>3600||r?Math.floor(e%86400/3600)+":":"",o=(i&&e%3600<600?"0":"")+Math.floor(e%3600/60)+":",a=(e%60<10?"0":"")+e%60;return n+r+i+o+a},formatDate:function(e){return e=d(e),e.getDate()+"."+(e.getMonth()+1)+"."+e.getFullYear()},saferToDate:d,formatDateAndTime:function(e){return e=d(e),o(e.getDate())+"."+o(e.getMonth()+1)+"."+e.getFullYear()+" "+o(e.getHours())+":"+o(e.getMinutes())},formatTime:function(e){return e=d(e),e?o(e.getHours())+":"+o(e.getMinutes())+":"+o(e.getSeconds()):"00:00:00"},formatInteger:function(e){var t=Math.round(e);return t.toString().replace(/\B(?=(\d{3})+(?!\d))/g," ")},getEmbedHost:function(){var e=window.top!==window.self;return e&&document.referrer?document.referrer.match(/:\/\/(.[^\/]+)/)[1]:document.location.hostname},getUnusedId:function(e){for(var t=0;document.getElementById(e+t.toString());)t++;return e+t.toString()},getPageUrl:function(e){var t=e.top!==e.self;return t&&e.document.referrer?e.document.referrer:e.document.location.href},generateGuid:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0,n="x"==e?t:3&t|8;return n.toString(16)})},dateToIsoString:function(e){function t(e){var t=String(e);return 1===t.length&&(t="0"+t),t}return e=e||new Date,e.toISOString?e.toISOString():e.getUTCFullYear()+"-"+t(e.getUTCMonth()+1)+"-"+t(e.getUTCDate())+"T"+t(e.getUTCHours())+":"+t(e.getUTCMinutes())+":"+t(e.getUTCSeconds())+"."+String((e.getUTCMilliseconds()/1e3).toFixed(3)).slice(2,5)+"Z"},getPointerPos:function(e,t){var n,r=t.getBoundingClientRect();return n=e.touches&&e.touches.length>0?e.touches[0]:e.changedTouches&&e.changedTouches.length>0?e.changedTouches[0]:e,{x:n.pageX-(r.left+document.body.scrollLeft),y:n.pageY-(r.top+document.body.scrollTop)}},prefixAllClasses:function(e,t,n){return 0===e.length?"":e.split(" ").map(function(e){var r=e.trim();return n&&0===r.indexOf(t)?r:t+"-"+r}).join(" ")},getPropertyByPath:function(e,t){if(t&&t.split){for(var n=e,r=t.split(".");r.length>0;)n=n[r.shift()];if(n===e)return;return n}},zeroPad:o,noop:function(){}}},function(e,t,n){"use strict";function r(){var e=new i(null,o.playerEventTypes),t={AD_ERROR:"AD_ERROR",ADS_SCRIPT_LOAD_ERROR:"ADS_SCRIPT_LOAD_ERROR",INIT_END_POSTER_ERROR:"INIT_END_POSTER_ERROR",INIT_LIFECYCLE_COMPONENTS_ERROR:"INIT_LIFECYCLE_COMPONENTS_ERROR",INIT_PLAYBACK_ERROR:"INIT_PLAYBACK_ERROR",INIT_START_POSTER_ERROR:"INIT_START_POSTER_ERROR",PLAYBACK_ERROR:"PLAYBACK_ERROR",RESOLVE_AD_METADATA_ERROR:"RESOLVE_AD_METADATA_ERROR",SCRIPT_LOAD_ERROR:"SCRIPT_LOAD_ERROR",START_POSTER_ERROR:"START_POSTER_ERROR",STREAM_ERROR:"STREAM_ERROR",STREAM_WARNING:"STREAM_WARNING",VIDEO_FORMAT_NOT_FOUND:"VIDEO_FORMAT_NOT_FOUND",STREAM_KICKED:"STREAM_KICKED"},n={FATAL:"fatal",INFO:"info",WARNING:"warning"},r=function(t){e.invoke(o.playerEventTypes.error,t),a.debug(o.playerEventTypes.error,t)};return{types:t,severity:n,track:r,addEventListener:e.addEventListener,removeEventListener:e.removeEventListener}}var i=n(23),o=n(24),a=n(7).get("errorTracker");e.exports={getErrorTracker:r}},function(e,t,n){"use strict";function r(e,t){var n={};return{addEventListener:function(e,r){if(!t[e])throw new Error("The event type "+e+" is not recognized.");null==n[e]&&(n[e]=[]),n[e].push(r)},removeEventListener:function(e,r){if(!t[e])throw new Error("The event type "+e+" is not recognized.");if(null!=n[e]){var i=n[e].indexOf(r);i>=0&&n[e].splice(i,1)}},invoke:function(t,r){if(null!=n[t]){Array.isArray(r)||(r=Array.prototype.slice.call(arguments,[1]));for(var o=0;o<n[t].length;o++)try{n[t][o].apply(e,r||[])}catch(a){i.warn("An event handler for the "+t+" event failed",e,r)}}},eventTypes:t}}var i=n(7).get("eventPublisher");e.exports=r},function(e,t){e.exports={playbackEventTypes:{playbackStarted:"playbackStarted",playbackEnded:"playbackEnded",playbackFailed:"playbackFailed",playStateChanged:"playStateChanged"},playerEventTypes:{stateChanged:"stateChanged",playerStateChanged:"playerStateChanged",playbackChanged:"playbackChanged",error:"error",exitRequested:"exitRequested",adError:"adError"},playerSessionStates:{unstarted:"unstarted",unstartedTransmission:"unstartedTransmisson",playing:"playing",ended:"ended"},playStates:{playing:"playing",paused:"paused",stopped:"stopped"}}},function(e,t,n){"use strict";var r=n(21),i=n(26),o=n(7),a=n(4),s=n(28),c=o.get("appContainer"),u=function(e,t,n){function o(e){e&&("string"==typeof e&&(e=document.getElementById(e)),e instanceof HTMLElement||(c.debug("Cannot find supplied video element.",e),e=null)),h=e}function u(){return v.view.dom===r.getFullscreenElement()}function l(e){if(e){if(!r.enterFullscreen(v.view.dom)){var t=h instanceof HTMLVideoElement?h:v.view.dom.getElementsByTagName("video")[0];t&&t.webkitEnterFullscreen&&t.webkitEnterFullscreen()}}else r.exitFullscreen()}function d(e){m.addClass(e)}function f(e){m.removeClass(e)}function p(){y&&y()}s.call(this);var h={},m=new i({prefix:n,classname:n+" aspectratio"}),v=new i({prefix:n});r.notifyFullscreenChange(function(){this.update("isFullscreen",u())}.bind(this)),m.addSubWidgets({baseWidget:v});var g=e;if("string"==typeof e&&(e=document.getElementById(e)),!(e instanceof HTMLElement))return c.error("Couldn't insert player.",g),a.reject("The specified HTML container was not found or valid.",g);o(t),r.empty(e),m.attach(e),this.isFullscreen=u(),this.setIsFullscreen=l,this.baseWidget=v;var y;this.addExitListener=function(e){y=e},this.exit=p,this.videoElement=h,this.setVideoElement=o,this.addClass=d,this.removeClass=f};e.exports=u},function(e,t,n){"use strict";function r(e,t){if(this.dom=document.createElement(e||"div"),t)for(var n in t)this.dom[n]=t[n]}var i=n(27),o=function(e){this.view||(this.view=new r(e.type,e.properties)),i.call(this,e),e.id&&(this.id=e.id),e.key&&(this.key=e.key),e.className&&this.setClassName(e.className),e.classname&&this.setClassName(e.classname),e.html&&(this.view.dom.innerHTML=e.html)};o.prototype=Object.create(i.prototype),e.exports=o},function(e,t){"use strict";var n=function(e){e.prefix&&this.setPrefix(e.prefix),e.children&&this.addSubWidgets(e.children),this.isInitialized=!1};n.prototype.listen=function(e){this.listeners||(this.listeners={}),Object.getOwnPropertyNames(e).forEach(function(t){this.listeners[t]&&this.unListen([t]),this.listeners[t]=e[t].bind(this),t.split(/[ ,]+/).forEach(function(e){this.view.dom.addEventListener(e,this.listeners[t])},this)},this)},n.prototype.unListen=function(e){e.forEach(function(e){this.listeners[e]&&(e.split(/[ ,]+/).forEach(function(t){this.view.dom.removeEventListener(t,this.listeners[e])},this),delete this.listeners[e])},this)},n.prototype.removeAllListeners=function(){this.listeners&&this.unListen(Object.getOwnPropertyNames(this.listeners))},n.prototype.emit=function(e){for(var t,n={},r=Array.prototype.slice.call(arguments,1),i=r.length-1;i>=0;i--){if(r[i]instanceof Node){t=r[i];break}r[i].detail||r[i].cancelable||r[i].bubbles?Object.assign(n,r[i]):n.detail=r[i]}if(t=t?t:this.view.dom,this.events||(this.events=[]),this.events[e]){if(this.events[e]instanceof window.Event)for(var o in n.detail)this.events[e].detail[o]=n.detail[o]}else this.events[e]=new CustomEvent(e,n);t.dispatchEvent(this.events[e])},n.prototype.setPrefix=function(e){this.prefix=e,this.prefix&&(this.setClassName((this.view&&this.view.dom||this.dom).className),this.children&&this.children.forEach(function(t){t.setPrefix(e)}))},n.prototype.getPrefixedClassName=function(e){return(this.prefix?this.prefix+"-":"")+e},n.prototype.addClass=function(e,t){e.split(" ").forEach(function(e){(t||this.view&&this.view.dom||this.dom).classList.add(this.getPrefixedClassName(e))}.bind(this))},n.prototype.removeClass=function(e,t){e.split(" ").forEach(function(e){(t||this.view&&this.view.dom||this.dom).classList.remove(this.getPrefixedClassName(e))}.bind(this))},n.prototype.hasClass=function(e,t){return(t||this.view&&this.view.dom||this.dom).classList.contains(this.getPrefixedClassName(e))},n.prototype.setClassName=function(e,t){t=t||this.view&&this.view.dom||this.dom,this.prefix&&e&&(e=e.split(" ").map(function(e){var t=e.trim();return 0===t.indexOf(this.prefix)?t:this.prefix+"-"+t}.bind(this)).join(" ")),t.className=e},n.prototype.detach=function(){this.view.dom.parentNode&&(this.parentNode=this.view.dom.parentNode,this.siblingNode=this.view.dom.nextSibling,this.parentNode.removeChild(this.view.dom))},n.prototype.reattach=function(e){this.view.dom.parentNode||(e=e?e:this.parentNode,this.siblingNode?e.insertBefore(this.view.dom,this.siblingNode):e.appendChild(this.view.dom))},n.prototype.addSubWidgets=function(e,t){function r(e){i.appendChild(e.view.dom)}var i=t?t:this.view.dom;if(this.children||(this.children=[]),e instanceof n){var o=e;o.setPrefix(this.prefix),o.initComponent(),r(o),this.children.push(o)}else e instanceof Array?e.forEach(function(e){e.setPrefix(this.prefix),e.initComponent(),r(e),this.children.push(e),e.key&&(this[e.key]=e)}.bind(this)):e[Object.getOwnPropertyNames(e)[0]]instanceof n&&Object.getOwnPropertyNames(e).forEach(function(t){e[t].setPrefix(this.prefix),e[t].initComponent(),r(e[t]),this[t]=e[t],e[t].key=t,this.children.push(e[t])}.bind(this))},n.prototype.replaceSubWidget=function(e,t){var r=t?t:this.view.dom,i=function(e){var t=!1;this[e.key]&&(this[e.key]=e,t=!0),this.children=this.children.map(function(n){return e.key==n.key&&(r.replaceChild(e.view.dom,n.view.dom),n=e,t=!0),n}),t&&(e.setPrefix(this.prefix),e.initComponent())}.bind(this);if(e instanceof n)i(e);else if(e instanceof Array){var o=e;o.forEach(function(e){e instanceof n&&i(e)})}else Object.keys(e).length>0&&e[Object.getOwnPropertyNames(e)[0]]instanceof n&&Object.getOwnPropertyNames(e).forEach(function(t){i(e[t])}.bind(this))},n.prototype.replaceSubWidgets=n.prototype.replaceSubWidget,n.prototype.removeSubWidget=function(e,t){function n(e){r.removeChild(e.view.dom)}var r=t?t:this.view.dom;if(this.children){var i=this.children[this.children.indexOf(e)],o=i.key;n(i),o&&delete this[o],this.children.splice(this.children.indexOf(i),1)}},n.prototype.removeAllSubWidgets=function(e,t){function n(e,t){r.removeChild(e.view.dom)}var r=t?t:this.view.dom;this.children&&(this.children.forEach(function(e){var t=e.key;n(e,this.children),t&&delete this[t]}.bind(this)),this.children.length=0)},n.prototype.addSubWidget=n.prototype.addSubWidgets,n.prototype.initComponent=function(){function e(e){for(var t in e.globalListeners){var n=e.globalListeners[t];document.body.addEventListener(t,n.bind(e))}}this.isInitialized||("function"==typeof this.init&&this.init(),this.globalListeners&&e(this),this.isInitialized=!0)},n.prototype.attach=function(e){function t(e){e.children&&e.children.forEach(function(e){t(e)},r);for(var i in e)e[i]instanceof n&&t(e[i]);e.initComponent()}var r=this;e.appendChild(r.view.dom),t(r)},n.prototype.getComponents=function(e){if(!e)var e={};return this.key&&!e[this.key]&&(e[this.key]=this),this.children&&this.children.forEach(function(t){t.getComponents(e)}.bind(this)),e},e.exports=n},function(e,t,n){"use strict";var r=n(7),i=r.get("ObservableModel"),o=function(){this.handlers={},this.props={},this.methods={},this.constants={},this.observe=function(e,t){var n=Array.prototype.slice.call(arguments,0,-1);t=Array.prototype.slice.call(arguments,-1)[0],n.forEach(function(e){this.handlers[e]||(this.handlers[e]=[]),this.handlers[e].push(t),t(this[e])},this)},this.unobserve=function(){if(1===arguments.length)delete this.handlers[arguments[0]];else if(arguments.length>1){var e=Array.prototype.slice.call(arguments,0,-1),t=Array.prototype.slice.call(arguments,-1)[0];e.forEach(function(e){if(t&&this.handlers[e]){var n=this.handlers[e].indexOf(t);n>-1&&this.handlers[e].splice(n,1)}},this)}},this.update=function(e,t){var n,r=e.split(".");if(r.length>1&&"feature"===r[0]?(n=this.feature[r[1]],this.feature[r[1]]=t):(n=this[e],this[e]=t),n!==t)try{this.handlers[e]&&this.handlers[e].forEach(function(e){e(t,n)})}catch(o){i.warn("Error during model observer notification",o)}}};e.exports=o},function(e,t,n){"use strict";function r(e){return e&&o[e]}function i(e){if(o.useDefaults(),e){o.setLevel(r(e.global)||o.OFF);for(var t in e.modules)e.modules.hasOwnProperty(t)&&o.setLevel(r(e.modules[t])||o.INFO)}}var o=n(7);e.exports={configureLogging:i}},function(e,t,n){"use strict";var r=n(31),i=n(89),o=n(108),a=n(109),s=n(110),c=n(111),u=n(113),l=n(115),d=n(116),f=n(117),p=n(119),h=f,m=n(120),v=n(121),g=n(122),y=n(124),b=n(125),w=n(126),E=n(127),k=n(128),S=n(129),T=n(130),A=n(198);n(199),e.exports={lifecycle:[r,a,i,o,s,c,u,l,d,p,v],start:[f],playback:[g,m,y,b,w,E,k,S,T,A],end:[h]}},function(e,t,n){"use strict";function r(){var e,t,n=new o(this,s.playbackEventTypes);return{setInstance:function(t){if(e=t){var r={};r[s.playbackEventTypes.playbackStarted]=function(){n.invoke(s.playbackEventTypes.playbackStarted)},r[s.playbackEventTypes.playbackEnded]=function(){n.invoke(s.playbackEventTypes.playbackEnded)},r[s.playbackEventTypes.playbackFailed]=function(e){n.invoke(s.playbackEventTypes.playbackFailed,[e])},r[s.playbackEventTypes.playStateChanged]=function(e){n.invoke(s.playbackEventTypes.playStateChanged,[e])},e.setCallbacks(r)}},onProgressChange:function(t){e&&e.onProgressChange(t)},updateStartDate:function(e){t=e},exposed:{play:function(){return e&&e.play()},pause:function(){return e&&e.pause()},stop:function(){return e&&e.stop()},getPlayState:function(){return e&&e.getPlayState()||s.playStates.stopped},getPosition:function(){return e&&e.getPosition()||0},setPosition:function(t){return e&&e.setPosition(t)},getDuration:function(){return e&&e.getDuration()||0},getAbsolutePosition:function(){return e&&e.getAbsolutePosition()||new Date(1970,0,1)},setAbsolutePosition:function(t){return e&&e.setAbsolutePosition(t)},getAbsoluteStartPosition:function(){return e&&e.getAbsoluteStartPosition()||new Date(1970,0,1)},gotoNow:function(){return e&&e.gotoNow()},getVolume:function(){return e&&e.getVolume()||0},setVolume:function(t){return e&&e.setVolume(t)},isMuted:function(){return e&&e.isMuted()},mute:function(){return e&&e.mute()},unmute:function(){return e&&e.unmute()},getTextTracks:function(){return e&&e.getTextTracks&&e.getTextTracks()||[]},addEventListener:n.addEventListener,removeEventListener:n.removeEventListener,playbackEvents:s.playbackEventTypes,playStates:s.playStates}}}var i="playerApi",o=n(23),a=n(7),s=n(24),c=n(32),u=a.get(i),l={moduleName:i,dependencies:{configuration:"all"},init:function(e){function t(e){p=e,f.invoke(s.playerEventTypes.stateChanged,[e]),f.invoke(s.playerEventTypes.playerStateChanged,[e])}function n(e){f.invoke(s.playerEventTypes.playbackChanged)}function i(e){Object.getOwnPropertyNames(e).forEach(function(t){switch(t){case"videoEngine":e[t]?(u.debug("Applied videoEngine"),d.setInstance(new c(e[t]))):(u.debug("Removed videoEngine"),d.setInstance(null));break;case"playbackSchedule":e[t]&&(u.debug("Applied playbackSchedule"),e[t].progress(d.onProgressChange));break;case"loadPlayback":u.debug("Applied starter"),v=e[t];break;case"cease":u.debug("Applied ceaser"),h=e[t];break;case"change":u.debug("Applied changer"),m=e[t];break;case"errorTracker":e.errorTracker.addEventListener("error",function(e){f.invoke(s.playerEventTypes.error,e)});break;case"appContainer":u.debug("Applied appContainer"),l=e[t],l.addExitListener(function(){u.debug("requestExit"),f.invoke(s.playerEventTypes.exitRequested,[!0])}.bind(this))}})}u.debug("init",e);var l,d=new r,f=new o(this,s.playerEventTypes),p=s.playerSessionStates.unstarted,h=function(){},m=function(){},v=function(){};return t(s.playerSessionStates.unstarted),d.exposed.addEventListener("playbackEnded",function(){t(s.playerSessionStates.ended)}),d.exposed.addEventListener("playbackStarted",function(){t(s.playerSessionStates.playing)}),{api:{playerApi:{setState:t,setPlaybackSession:n,exposed:{changePlayback:function(e,t,n){m(e,t,n)},start:function(){if("playing"!==p&&"unstartedTransmisson"!==p)return v()},getPlayerState:function(){return p},playback:d.exposed,metadata:{},cease:function(){h()},addEventListener:f.addEventListener,removeEventListener:f.removeEventListener,playerEvents:s.playerEventTypes,playerStates:s.playerSessionStates,setLogHandler:function(e){a.setHandler(e)},refreshClassNamesFromSizeRules:function(){},getRestClient:function(e,t){},version:e.configuration.framework.version}}},cleanup:function(){u.debug("destroy")},newDependenciesCallback:i}}};e.exports=l},function(e,t,n){"use strict";function r(e){function t(e){switch(e.event){case y.playlistEntryStarted:f[i.playbackEventTypes.playbackStarted]&&f[i.playbackEventTypes.playbackStarted]();break;case y.playlistEntryEnded:case y.stopped:f[i.playbackEventTypes.playbackEnded]&&f[i.playbackEventTypes.playbackEnded]();break;case y.adStarted:h=!0;break;case y.mainContentInterrupted:p=e.position,g=e.duration,h=!0;break;case y.mainContentStarted:case y.mainContentResumed:m&&d.setPosition(p),m=!1,h=!1;break;case"streamError":n(e.error)}}function n(e){f[i.playbackEventTypes.playbackFailed]&&f[i.playbackEventTypes.playbackFailed](e)}function r(){return h?p:d.position}function a(e){h?(p=e,m=!0):d.setPosition(e)}function s(){return h?d.absolutePosition:d.absolutePosition}function c(){return h?d.absoluteStartPosition:d.absoluteStartPosition}function u(){return h?g:d.duration}function l(){switch(d.playState){case d.playStates.paused:
return i.playStates.paused;case d.playStates.inactive:return i.playStates.stopped;default:return i.playStates.playing}}var d=e.videoModel,f={},p=0,h=!1,m=!1,v=null,g=0,y=o.scheduleEventTypes;return d.observe(d.props.playState,function(){var e=l();f[i.playbackEventTypes.playStateChanged]&&e!==v&&(v=e,f[i.playbackEventTypes.playStateChanged](e))}),{play:function(){return d.play()},pause:function(){return d.pause()},stop:function(){return e.playbackScheduler.stop()},getPlayState:l,getPosition:function(){return r()},setPosition:function(e){return a(e)},getAbsolutePosition:function(){return s()},getAbsoluteStartPosition:function(){return c()},getDuration:function(){return u()},getVolume:function(){return d.volume},setVolume:function(e){d.setVolume(e)},isMuted:function(){return d.isMuted},mute:function(){return d.setIsMuted(!0)},unmute:function(){return d.setIsMuted(!1)},getTextTracks:function(){return d.textTracks},setCallbacks:function(e){f=e},onProgressChange:t,onError:n}}var i=n(24),o=n(33);e.exports=r},function(e,t,n){"use strict";var r=n(34),i=n(40),o=n(43),a={constructors:o,scheduleEventTypes:i,videoEngineFactory:r};e.exports=a},function(e,t,n){"use strict";function r(e,t,n,r,i,o,a){this.technologyName=e,this.instance=t,this.adInstance=a,this.videoModel=n,this.adVideoModel=r,this.playbackScheduler=i,this.remove=o}function i(e,t){function n(t){var n=e.dash&&e.dash.dashImpl||"dashjs";if(t in l){var r="dash"===t?l[t][n]:l[t];return r.technologyName=t,d(r)}return d.reject(new Error("Found no implementation of the specified technology labeled '"+t+"'."))}function i(e){var t=this;e.length>0&&Object.getOwnPropertyNames(e[0]).forEach(function(n){t[n]=function(){var t=arguments;e.forEach(function(e){"function"==typeof e[n]&&e[n].apply(e[n],t)})}}),this.addUpdater=function(t){e.push(t)}}function o(n,o,l){return l.inserter.applyContext(e).insert(n,o).then(function(n){function o(){return w.stop(),y.unobserve(),h.unobserve&&h.unobserve(),f&&f(),d(n.remove&&n.remove())}var f,h=new l.VideoUpdater(n),m=new i([h]),v=new a(m),g=new s,y=new l.VideoObserver(v,n),b=new c(g),w=new u.PlaybackScheduler(l.getPlaybackScheduler.applyContext(e,{instance:n,streamFailover:t&&t.streamFailover}),b),E=p(v,y,h,m);return f=E.remove,w.setAdEngineAddNotificator(E.onAdEngineAdded),new r(l.technologyName,n,v,g,w,o)})}function f(n,o,l){return l.inserter.applyContext(e).insert(n,o).then(function(o){function f(e){y.setActive(e),g.setActive(!e),S.setActive(e),k.setActive(!e)}function h(){return A.stop(),k.unobserve(),S.unobserve(),g.unobserve&&g.unobserve(),m&&m(),d(o.remove&&o.remove()).then(function(){return d(v.remove&&v.remove())})}var m,v=l.ads.inserter.applyContext(e).insert(n,f),g=new l.VideoUpdater(o),y=new l.ads.VideoUpdater(v.instance),b=new i([g,y]),w=new a(b),E=new s,k=new l.VideoObserver(w,o),S=new l.ads.VideoObserver(w,v.instance),T=new c(E),A=new u.PlaybackScheduler(l.getPlaybackScheduler.applyContext(e,{instance:o,adCuer:v.cuer,streamFailover:t&&t.streamFailover}),T),P=p(w,k,g,b);return m=P.remove,A.setAdEngineAddNotificator(P.onAdEngineAdded),S.setActive(!1),y.setActive(!1),new r(l.technologyName,o,w,E,A,h,v.instance)})}function p(e,t,n,r){function i(e){c.setActive(e),n.setActive(!e),s.setActive(e),t.setActive(!e)}function o(t){s=t.observer,c=t.updater,s.setVideoModel(e),s.setAdActivityNotifier(i),r.addUpdater(c)}function a(){s&&s.unobserve&&s.unobserve(),c&&c.unobserve&&c.unobserve()}var s,c;return{onAdEngineAdded:o,remove:a}}return{create:function(e,t,r){return n(e).then(function(e){return e.ads?f(t,r,e):o(t,r,e)})}}}var o=n(35),a=n(37),s=n(38),c=n(39),u=n(41),l=n(45),d=n(4);e.exports=o(i,"videoEngineFactory")},function(e,t,n){"use strict";function r(e,t){function n(n,r){var o=i.validate(t,n,r);if(!o.isValid)throw o.configuration.isValid||console.error("Configuration didn't validate. Please compare the errors and applied configuration objects:",o.configuration.errors,n),o.dependencies.isValid||console.error("Dependencies didn't validate.  Please compare the errors and applied dependencies objects:",o.dependencies.errors,r),new Error("Dev mode validation of applied context failed. Problems listed in console.");return e(n,r)}return{applyContext:n}}var i=n(36);e.exports=r},function(e,t){"use strict";e.exports={validate:function(){return{isValid:!0,configuration:{isValid:!0,errors:{}},dependencies:{isValid:!0,errors:{}}}}}},function(e,t,n){"use strict";function r(e){i.call(this),this.props=s,this.methods=u,this.constants=c,this.playStates=o,this.playModes=a,this.playState=o.starting,this.playMode=a.ondemand,this.isAtLivePosition=!1,this.volume=0,this.isMuted=!1,this.isPaused=!1,this.duration=0,this.position=0,this.absolutePosition=new Date(0),this.absoluteStartPosition=new Date(0),this.error=null,this.textTracks=[],this.audioTracks=[],this.isWaitingForUserTap=!1,this.bitrate=0,this.bufferedAhead=0,this.play=e&&e.play,this.pause=e&&e.pause,this.gotoLive=e&&e.gotoLive,this.setPosition=e&&e.setPosition,this.setVolume=e&&e.setVolume,this.setIsMuted=e&&e.setIsMuted,this.capBitrate=e&&e.capBitrate}var i=n(28),o={inactive:"inactive",starting:"starting",waitfortap:"waitfortap",playing:"playing",paused:"paused",seeking:"seeking",buffering:"buffering"},a={ondemand:"ondemand",live:"live",livedvr:"livedvr"},s=Object.freeze({playState:"playState",playMode:"playMode",isAtLivePosition:"isAtLivePosition",volume:"volume",isMuted:"isMuted",duration:"duration",isPaused:"isPaused",position:"position",absolutePosition:"absolutePosition",absoluteStartPosition:"absoluteStartPosition",error:"error",bitrate:"bitrate",textTracks:"textTracks",audioTracks:"audioTracks",bufferedAhead:"bufferedAhead",isWaitingForUserTap:"isWaitingForUserTap"}),c=Object.freeze({props:"props",methods:"methods",playStates:"playStates",playModes:"playModes",constants:"constants"}),u=Object.freeze({play:"play",pause:"pause",gotoLive:"gotoLive",setPosition:"setPosition",setVolume:"setVolume",setIsMuted:"setIsMuted",capBitrate:"capBitrate"});e.exports=r},function(e,t,n){"use strict";function r(e){i.call(this),this.props=o,this.constants=a,this.methods=s,this.adCount=0,this.adNumber=0,this.remainingDuration=0,this.isAdsPlaying=!1,this.isAdClicked=!1,this.isAdSkipEnabled=!1,this.scheduleType="",this.url=null,this.isEnteringMidrolls=!1,this.isLeavingMidrolls=!1,this.skipAd=function(){e&&e.skipAd&&e.skipAd()}}var i=n(28),o=Object.freeze({isAdsPlaying:"isAdsPlaying",isAdClicked:"isAdClicked",adCount:"adCount",adsDuration:"adsDuration",adNumber:"adNumber",isAdSkipEnabled:"isAdSkipEnabled",remainingDuration:"remainingDuration",scheduleType:"scheduleType",url:"url",isEnteringMidrolls:"isEnteringMidrolls",isLeavingMidrolls:"isLeavingMidrolls"}),a=Object.freeze({props:"props",methods:"methods",constants:"constants"}),s=Object.freeze({skipAd:"skipAd"});e.exports=r},function(e,t,n){"use strict";function r(e){function t(t){switch(t.event){case i.adStarted:e.update(e.props.isAdClicked,!1);break;case i.mainContentStarted:e.update(e.props.isAdsPlaying,!1),e.update(e.props.isEnteringMidrolls,!1),e.update(e.props.isLeavingMidrolls,!1);break;case i.interstitialStarted:e.update(e.props.isAdsPlaying,!0);break;case i.interstitialEnded:e.update(e.props.isAdsPlaying,!1);break;case i.adEnded:t.ad&&"midroll"===t.ad.type&&t.ad.progress.count===t.ad.progress.number&&(e.update(e.props.isEnteringMidrolls,!1),e.update(e.props.isLeavingMidrolls,!0));break;case i.streamError:e.update(e.props.isAdsPlaying,!1);break;case i.adReady:t.ad&&(e.update(e.props.remainingDuration,t.ad.progress.remainingDuration),e.update(e.props.adCount,t.ad.progress.count),e.update(e.props.adNumber,t.ad.progress.number),e.update(e.props.scheduleType,t.ad.type),e.update(e.props.url,t.ad.data.clickThroughUri)),t.ad&&"midroll"===t.ad.type&&1===t.ad.progress.number&&(e.update(e.props.isEnteringMidrolls,!0),e.update(e.props.isLeavingMidrolls,!1))}}return{notify:t}}var i=n(40);e.exports=r},function(e,t){"use strict";var n={waitingForUserInteraction:"waitingForUserInteraction",playlistStarted:"playlistStarted",playlistEnded:"playlistEnded",playlistEntryStarted:"playlistEntryStarted",playlistEntryEnded:"playlistEntryEnded",mainContentReady:"mainContentReady",mainContentStarted:"mainContentStarted",mainContentInterrupted:"mainContentInterrupted",mainContentResumed:"mainContentResumed",mainContentEnded:"mainContentEnded",interstitialStarted:"interstitialStarted",interstitialEnded:"interstitialEnded",adReady:"adReady",adStarted:"adStarted",adEnded:"adEnded",streamError:"streamError",streamWarning:"streamWarning",streamFailover:"streamFailover",bufferingStarted:"bufferingStarted",bufferingEnded:"bufferingEnded",stopped:"stopped"};e.exports=n},function(e,t,n){"use strict";function r(e,t){return new l.VideoSource(e.url,null,null,null,null,null,null,t.metadata)}function i(e,t,n,r,i){this.event=e,this.position=t||0,this.duration=n||0,this.ad=i,this.error=r}function o(e,t){function n(n,a){function b(e,n,r,o,a){var s=e&&e.event?e:new i(e,n,r,o,a);f.invoke(e,s),H.notify(s),t&&t.notify(s)}function w(e,t,n,r,i){try{switch(e){case m.waitingForTap:b(c.waitingForUserInteraction,t,n);break;case m.bufferingStarted:b(c.bufferingStarted,t,n);break;case m.bufferingEnded:b(c.bufferingEnded,t,n);break;case m.started:D&&(b(c.adStarted,t,n,null,q),Y?s.failsafe(Y.getStartTracker()):h.warn("Expected ad trackers to be present on ad start."));break;case m.positioned:D||(U&&(U=!1),j?b(c.mainContentResumed):(b(c.mainContentStarted),j=!0));break;case m.temporalupdate:K&&K.updatePosition(t);break;case m.interrupted:_=t;break;case m.ended:P(t,n);break;case m.failed:M(i,t,n);break;case m.warning:O(i,t,n);break;case m.failover:U=!0,b(c.streamFailover);break;case m.cuepreroll:V=v.preroll,S(t,n);break;case m.cuemidroll:V=v.midroll,S(t,n);break;case m.cuepostroll:V=v.postroll,S(t,n)}}catch(o){h.error("onNotified error",o)}}function E(e,t){return function(n){try{h.debug("onAdScheduleProgress",n.event,D),D||n.event!==c.adReady||(z(),V===v.midroll&&b(c.mainContentInterrupted,e,t),b(c.interstitialStarted),D=!0),b(n)}catch(r){h.error("Ad schedule progress failed.",r)}}}function k(){V=v.midroll,F=!0,z(),D||S()}function S(e,t){a?a.requestAds?a.requestAds(V,e,t).then(function(n){B=n&&n.playItems||[],x(e,t)}).fail(A):a.scheduleAds?a.scheduleAds(V,e,t).then(T,A,E(e,t)).fail(A):h.warn("Ad provider contains no recognized ways of getting or scheduling video ads.",a):A()}function T(e){V===v.midroll&&e.resumePosition&&(N=e.resumePosition-_,h.debug("Resume position delivered from ad provider",e)),A()}function A(e){try{a&&h.debug("Resume from ad break.",e);var t=D&&V===v.midroll;D&&b(c.interstitialEnded),F=!1,D=!1,V===v.postroll?(b(c.playlistEntryEnded),b(c.playlistEnded),window.setTimeout(function(){H.fulfill()},100)):(V===v.preroll&&b(c.mainContentReady),W(t&&N))}catch(n){h.error("Error when resuming from ad break."),H.reject(n)}}function P(e,t){h.debug("On end"),D?F||(b(c.adEnded,e,t,null,q),Y?s.failsafe(Y.getCompleteTracker()):h.warn("Expected ad trackers to be present on ad end."),R(),x(e,t)):b(c.mainContentEnded,e,t)}function x(e,t){if(B){h.debug(B.length+" ads left to be played for mode "+V);var n=B.shift();if(n)try{D||(V===v.midroll&&b(c.mainContentInterrupted,e,t),b(c.interstitialStarted)),D=!0;var r=C(n);return b(c.adReady,0,0,null,q),void z(r)}catch(i){h.error("Error in ad scheduling.",i)}}h.debug("No ad schedule, resuming."),A()}function C(e){var t=r(e,n);return e.tracker&&e.tracker._attach&&(Y=e.tracker._attach(),K=new d.PositionNotificator((!1)),K.addSubscribers(Y.getPositionTrackers()),y=Y.getClickTracker()),q=e.adData,u.currentAdSource=t,t}function R(){Y=null,K&&K.stop(),K=null,q=null,u.currentAdSource=null}function O(e,t,n){b(c.streamWarning,t,n,e)}function M(e,t,n){D?x():(a&&a.stop&&a.stop(),b(c.streamError,t,n,e))}function L(){b(c.playlistStarted),b(c.playlistEntryStarted);var t=e(w,n,I);W=t.resume,l=function(){t.stop(),b(c.stopped),H.fulfill(!1)},u.stop=l,z=t.scheduleAd}var _,N,I,D=!1,U=!1,j=!1,F=!1,V=null,B=[],q=null,H=p.defer(),W=g,z=g,Y=null,K=null;u.currentMainSource=n;try{if(a){I=a.interstitialSetup,N=a.interstitialSetup&&a.interstitialSetup.resumeOffset||0,a.registerInterstitialBreaker&&a.registerInterstitialBreaker(k);try{a.getAdVideoAdapters&&a.getAdVideoAdapters().then(o)}catch(G){h.error("Tried to get ad video adapters, but failed.",G)}}}catch(J){h.error("Could not retrieve interstitial positions.",J)}return window.setTimeout(L,10),H.promise}var o,u=this,l=function(){},f=new a(this,c),g=function(){},y=null;this.schedule=function(e,t){return n(e,t)},this.currentMainSource=null,this.currentAdSource=null,this.addEventListener=f.addEventListener,this.removeEventListener=f.removeEventListener,this.stop=l,this.trackAdClick=function(){try{y&&y()}catch(e){h.error("Ad click track failed.",e)}},this.setAdEngineAddNotificator=function(e){o=e}}var a=n(23),s=n(21),c=n(40),u=n(42),l=n(43),d=n(44),f=n(7),p=n(4),h=f.get("playbackScheduler"),m=u.basicEventTypes,v=u.adModes;e.exports={PlaybackScheduler:o}},function(e,t){e.exports={basicEventTypes:{waitingForTap:"waitingForTap",bufferingStarted:"bufferingStarted",bufferingEnded:"bufferingEnded",started:"started",positioned:"positioned",temporalupdate:"temporalupdate",interrupted:"interrupted",seekstarted:"seekstarted",seekended:"seekended",ended:"ended",failed:"failed",warning:"warning",failover:"failover",cuepreroll:"cuepreroll",cuemidroll:"cuemidroll",cuepostroll:"cuepostroll"},adModes:{preroll:"preroll",midroll:"midroll",postroll:"postroll"}}},function(e,t){"use strict";function n(e,t,n,r,i,o){this.src=e,this.label=t,this.kind=i||"subtitles",this.language=r,this.contentType=n,this.isDefault=o}function r(){this.alignmentType="",this.trimStart=0,this.trimLength=0}function i(e){this.alignmentType="relativeToStart",this.baseDateTime=e}function o(e){this.alignmentType="relativeToLive",this.centralTimeZoneOffset=e}function a(e){this.alignmentType="timeComponentFromStream",this.centralTimeZoneOffset=e}function s(e,t,n,r,i,o,a,s){this.streamUrl=e,this.startPosition=t||0,this.isLive=n||!1,this.licenseUrl=r,this.fallbackUrls=i,this.tracks=o||[],this.timingModel=a,this.metadata=s}function c(){this.tracker=null,this.url=null,this.duration=0,this.clickThroughUrl=null,this.adData={type:null,data:null,index:0,progress:{number:0,count:0,remainingDuration:0}}}function u(){this.type=null,this.playItems=[]}i.prototype=Object.create(r),i.prototype.constructor=r,o.prototype=Object.create(r),o.prototype.constructor=r,a.prototype=Object.create(r),a.prototype.constructor=r,e.exports={VideoSource:s,Track:n,TimingModel:{Base:r,RelativeToStart:i,RelativeToLive:o,TimeComponentFromStream:a},AdSchedule:u,ScheduledAd:c}},function(e,t,n){"use strict";function r(e,t){this.startPosition=e,this.handler=t}function i(e,t,n){this.startPosition=e,this.endPosition=t,this.handler=n}function o(e){return{startPosition:e.startPosition,endPosition:e.endPosition||e.startPosition+5,isInPosition:!1,isHandled:!1,wasHandled:!1,hasResetPending:!1,handler:e.handler}}function a(e){function t(t){for(var i=[],o=0;o<r.length;o++){var s=r[o];e&&s.isHandled&&!s.hasResetPending&&(s.endPosition+a<t||0!==t&&s.startPosition-a>t)&&(n(s),s.hasResetPending=!0);var u=!(s.isHandled||s.isInPosition);s.isInPosition=s.startPosition<t&&s.endPosition>t,u&&s.isInPosition&&(s.isHandled=!0,i.push(s))}i.forEach(function(e){try{e.handler(e.startPosition,e.wasHandled)}catch(t){c.error("Position subscriber at position "+e.startPosition+" threw an error when handled.",t)}})}function n(e){window.setTimeout(function(){e.isHandled=!1,e.hasResetPending=!1,e.wasHandled=!0,c.debug("Resetting handled state for midroll with cue "+e.startPosition)},2e4)}var r=[],i=!0,a=5;this.addSubscribers=function(e){r=r.concat(e).sort(function(e,t){return e.position-t.position}).map(o)},this.updatePosition=function(e){i&&t(e)},this.stop=function(){i=!1}}var s=n(7),c=s.get("positionNotificator");i.prototype=Object.create(r),i.prototype.constructor=i,e.exports={PositionListener:r,TimeSpanListener:i,PositionNotificator:a}},function(e,t,n){"use strict";var r=n(46),i=n(48),o=n(51),a=n(65),s=n(66),c=n(68),u=n(70),l=n(75),d=n(76),f=n(77),p=n(79),h=n(80),m=n(81),v=n(84),g=n(86),y=n(87);e.exports={html:{inserter:r,VideoUpdater:i.VideoUpdater,VideoObserver:i.VideoObserver,getPlaybackScheduler:o.getPlaybackScheduler},silverlight:{inserter:s,VideoUpdater:c.VideoUpdater,VideoObserver:c.VideoObserver,getPlaybackScheduler:u.getPlaybackScheduler,ads:{inserter:a,VideoUpdater:i.VideoUpdater,VideoObserver:i.VideoObserver}},flash:{inserter:l,VideoUpdater:d.VideoUpdater,VideoObserver:d.VideoObserver,getPlaybackScheduler:f.getPlaybackScheduler,ads:{inserter:a,VideoUpdater:i.VideoUpdater,VideoObserver:i.VideoObserver}},dash:{dashjs:{inserter:v,VideoUpdater:g.VideoUpdater,VideoObserver:g.VideoObserver,getPlaybackScheduler:y.getPlaybackScheduler,ads:{inserter:a,VideoUpdater:i.VideoUpdater,VideoObserver:i.VideoObserver}},shaka:{inserter:p,VideoUpdater:h.VideoUpdater,VideoObserver:h.VideoObserver,getPlaybackScheduler:m.getPlaybackScheduler,ads:{inserter:a,VideoUpdater:i.VideoUpdater,VideoObserver:i.VideoObserver}}}}},function(e,t,n){"use strict";function r(e){function t(t,n){return n||(n=document.createElement("video")),n.removeAttribute("style"),n.setAttribute("autoplay","true"),n.setAttribute("controls","true"),e.html&&e.html.domClassName&&(n.className=e.html.domClassName),t&&t.appendChild(n),window.setTimeout(function(){c.debug("Video element inserted with size: "+n.clientWidth+"x"+n.clientHeight)},800),n}function n(n,a){a=t(n,a),i=a,a.controls=!1;var c={livePresentationDelay:e.html&&e.html.livePresentationDelay};return s(new o("html","HTMLVideoElement",a,a,c,r))}function r(){try{i.pause(),i.src="",i.parentNode.removeChild(i)}catch(e){c.warn("The targeted video element to remove does not exist in DOM",e)}}var i;return{insert:n,remove:r,build:t}}var i=n(35),o=n(47),a=n(7),s=n(4),c=a.get("videoElement");e.exports=i(r,"htmlVideoInserter")},function(e,t){"use strict";function n(e,t,n,r,i,o){this.implementationName=t,this.technologyName=e,this.domElement=n,this.implementationApi=r,this.internals=i,this.remove=o}e.exports=n},function(e,t,n){"use strict";function r(e,t){return e.duration!==1/0?e.duration:e.seekable.length>0?e.seekable.end(0)-e.seekable.start(0)-t:0}function i(e,t){return r(e,t)+(e.seekable.length>0?e.seekable.start(0):0)}function o(e,t){function n(t,n){if(A)return e.update(t,n)}function o(t){S?n(e.props.playState,t||k.ended&&e.playStates.inactive||k.paused&&e.playStates.paused||e.playStates.playing):n(e.props.playState,e.playStates.starting)}function a(){n(e.props.isPaused,k.paused)}function u(){n(e.props.volume,k.volume),n(e.props.isMuted,k.muted)}function p(){var r=k.currentTime,i=null,o=null;if(n(e.props.position,r),k.currentTime>0&&k.getStartDate&&!isNaN(k.getStartDate()))o=k.getStartDate(),i=new Date(o.getTime()+1e3*r),n(e.props.absoluteStartPosition,o),n(e.props.absolutePosition,i);else{var a=t.internals&&t.internals.timingModel;a&&a.baseDateTime&&a.baseDateTime.getTime&&!isNaN(a.baseDateTime.getTime())&&(o=a.baseDateTime,n(e.props.absoluteStartPosition,o),i=new Date(o.getTime()+1e3*r),n(e.props.absolutePosition,i))}}function h(){n(e.props.duration,r(k,T))}function m(){if(k.duration===1/0)try{var t;k.seekable.length>0&&(t=k.seekable.end(0)-k.seekable.start(0)),t&&t!=1/0&&t>f?n(e.props.playMode,e.playModes.livedvr):n(e.props.playMode,e.playModes.live),h()}catch(r){l.warn("Failed to operate on TimeRanges when trying to get video.seekable.end(0)\nRetrying when video reaches readyState === 4."),n(e.props.playMode,e.playModes.live)}else n(e.props.playMode,e.playModes.ondemand)}function v(){n(e.props.isAtLivePosition,k.currentTime>=i(k,T)-d)}function g(){if(n(e.props.textTracks,s.getFromTrackList(k.textTracks)),k.audioTracks&&k.audioTracks.length>0){var t=k.audioTracks,r=Array.prototype.slice.call(t,0),i=r.map(function(e){var n=function(){for(var n=0;n<t.length;n++)t[n].id==e.id?t[n].enabled=!0:t[n].enabled=!1};return new c.AudioTrackSelectionModel(n,e.id,e.kind,e.language,e.label)});n(e.props.audioTracks,i)}}function y(){for(var t=k.currentTime,r=k.buffered,i=0,o=0,a=0;a<r.length;++a)if(r.start(a)<=t&&r.end(a)>=t){i=r.end(a)-t,o=t-r.start(a);break}n(e.props.bufferedAhead,i)}function b(){n("error",k.error)}function w(t){n(e.props.isWaitingForUserTap,t)}function E(){u(),o(),h(),p(),m(),a(),y(),g(),b()}var k=t.implementationApi,S=!1,T=t.internals&&t.internals.livePresentationDelay||0,A=!0,P={abort:function(){},canplay:function(){},canplaythrough:function(){},durationchange:function(){h(),m()},ended:function(){o(e.playStates.inactive),a(),S=!1},error:function(){b(),o(e.playStates.inactive),a()},load:function(){m()},loadeddata:function(){h(),m()},loadedmetadata:function(){h(),p(),g(),m()},loadstart:function(){o(e.playStates.buffering),m(),a()},pause:function(){o(e.playStates.paused),a()},play:function(){o(e.playStates.playing),a(),m()},playing:function(){S=!0,o(e.playStates.playing),a()},progress:function(){},ratechange:function(){},seeked:function(){o(),a()},seeking:function(){o(e.playStates.seeking),a()},stalled:function(){a()},suspend:function(){},timeupdate:function(){p(),m(),v(),y()},volumechange:function(){u()},waiting:function(){o(e.playStates.buffering)},waitingForUserStart:function(){w(!0)},startedByUser:function(){w(!1)}};E(),Object.getOwnPropertyNames(P).forEach(function(e){k.addEventListener(e,P[e])}),k.textTracks&&(k.textTracks.addEventListener("addtrack",function(){g()}),k.textTracks.addEventListener("removetrack",function(){g()})),k.audioTracks&&(k.audioTracks.addEventListener("addtrack",function(){g()}),k.audioTracks.addEventListener("removetrack",function(){g()})),this.setActive=function(e){e!==A&&(A=e,l.debug("Setting HTML video observer "+(e?" active":"inactive")),A&&E())},this.unobserve=function(){Object.getOwnPropertyNames(P).forEach(function(e){k.removeEventListener(e,P[e])})}}function a(e){var t=e.implementationApi,n=t.volume,r=e.internals&&e.internals.livePresentationDelay||0,o=!0;this.play=function(){o&&t.play()},this.pause=function(){o&&t.pause()},this.setPosition=function(e){o&&!isNaN(parseFloat(e))&&isFinite(e)&&(t.currentTime=e)},this.setVolume=function(e){t.muted=0===parseFloat(e),t.volume=e},this.setIsMuted=function(e){e?(n=t.volume,t.volume=0):t.volume=n,t.muted=e},this.gotoLive=function(){o&&(t.currentTime=i(t,r))},this.capBitrate=function(e){},this.setActive=function(e){e!==o&&(l.debug("Setting HTML video updater "+(e?" active":"inactive")),o=e)}}var s=n(49),c=n(50),u=n(7),l=u.get("HtmlVideoModelAdapter"),d=30,f=100;e.exports={VideoUpdater:a,VideoObserver:o}},function(e,t,n){"use strict";function r(e,t,n,r,i,o){a.call(this),this.select=i,this.unselect=o,this.setVisibility=r,this.isVisible=!1,this.kind=e,this.label=n,this.language=t}function i(e,t){function n(e,t){i&&i.update(e,t)}var i,o=function(t){t?e.mode="number"==typeof e.mode?2:"showing":e.mode="number"==typeof e.mode?1:"hidden",n("isVisible",t)},a=function(){t(),o(!0)},s=function(){o(!1)};return i=new r(e.kind,e.language,e.label,o,a,s)}function o(e){function t(){n.forEach(function(e){e.mode="number"==typeof e.mode?1:"hidden"}),r.forEach(function(e){e.update("isVisible",!1)})}var n=[],r=[];if(e)for(var o=0;o<e.length;o++){var a=e[o];"subtitles"!==a.kind&&"captions"!==a.kind||(n.push(a),r.push(i(a,t)))}return r}var a=n(28);e.exports={getFromTrackList:o,SubtitleSelectionModel:r}},function(e,t,n){"use strict";function r(e,t,n,r,o){i.call(this),this.select=e,this.id=t,this.kind=n,this.label=o,this.language=r}var i=n(28);e.exports={AudioTrackSelectionModel:r}},function(e,t,n){"use strict";function r(e,t){var n=i(e,t);return s.getScheduler(n)}function i(e,t){function n(){return w.currentTime}function r(){w.src="",o&&o()}function i(n,r){function i(){if(F=new Date,w.removeEventListener(u.loadedmetadata,i),G>0){if(l||v){w.pause();var e=0,t=window.setInterval(function(){y.debug("iResume."),e>10||w.seekable.length>0&&w.seekable.end(0)>J?(y.debug("Trying to resume."),window.clearInterval(t),d(),w.play()):(e++,y.debug("Resume position not available "+w.seekable.length+"/"+J))},400)}else d();void 0!==D&&(w.controls=D)}else w.duration===1/0&&s&&(K=0,f())}function d(){var e=l?a.enforcePrecision(J,1):J;y.debug("Resuming position "+e),w.currentTime=e,n(b.positioned,e),J=0,I=!0}function f(){w.seekable.length>0?(w.currentTime=w.seekable.end(0)-s,y.debug("Applying live presentation delay",s)):K<10&&(K++,U=window.setTimeout(f,1e3))}function k(){F=new Date,Y=!0,n(b.bufferingEnded),w.removeEventListener(u.playing,k),n(b.started),0===G&&n(b.positioned),void 0!==D&&(w.controls=D)}function S(){if(!Y)return y.warn("Video element ended before starting. Attempting to recover gracefully."),w.time=G||0,void w.play();y.info("Actual end event, %s seconds after start.",Math.round(((new Date).getTime()-F.getTime())/1e3));var e=n;N(),e(b.ended,B,q,!1),V.fulfill()}function T(){l&&!r.isLive&&w.currentTime>=w.duration?(y.debug("Force ending stream on iOS."),w.pause(),w.src="",S()):(B=w.currentTime,I&&n(b.temporalupdate,w.currentTime,w.duration,w.paused))}function A(){q=w.duration,n(b.temporalupdate,w.currentTime,w.duration,w.paused)}function P(){n(b.seekstarted,w.currentTime,w.duration,w.paused),X=!0}function x(){X=!1,n(b.seekended,w.currentTime,w.duration,w.paused)}function C(){if(e.html.supportsAutoplay||y.warn("Video Error: Check if poster fails for some reason and throws a video error"),y.warn("Video element error",w.error),t.streamFailover){if(z){z=!1;try{t.streamFailover(w.error,W,r,e,B,H).then(R).done(null,M)}catch(n){y.warn("The failover function failed. There is no failover to the failover, giving up.",n),M(n)}}}else M(w.error)}function R(e){e.source&&(r=e.source),G=null!=e.resumePosition?e.resumePosition:B||G,O(b.failover,G,q,!1,e.error),W++,_()}function O(e,t,r,i,o){e!==b.failed&&(H=e),n(e,t,r,i,o)}function M(e){var t=O;t(b.failed,B,q,!1,m.mapVideoElementError(navigator.userAgent,w,e)),N()}function L(e,t,n,r){var i=O,o=m.mapDrmRequestError(e,t,n,r);y.warn("License acquisition failed.",e,t,n,r),i(b.failed,B,q,!1,o),N()}function _(){if(o&&o(),t.instance.internals&&(t.instance.internals.timingModel=r.timingModel),e.html.enableLicenseAcquisition&&r.licenseUrl)if(window.WebKitMediaKeys&&window.WebKitMediaKeys.isTypeSupported("com.apple.fps.1_0","video/mp4")&&e.html.fairplay&&e.html.fairplay.certificateUrl)var i=r.metadata&&r.metadata.asset&&r.metadata.asset.id||r.metadata&&r.metadata.contentId,a=h.getLicenseAcquirer(window,w,i,{useLicenseUrlFromStream:e.html.fairplay.useLicenseUrlFromStream,licenseUrl:r.licenseUrl,certificateUrl:e.html.fairplay.certificateUrl,contentIdExtractMatch:e.html.fairplay.contentIdExtractMatch},L);else y.debug("Activating license acquisition for HTML playback."),a=p.getLicenseAcquirer(window,w,{licenseUrl:r.licenseUrl});w.addEventListener(u.playing,k),w.addEventListener(u.ended,S),w.addEventListener(u.error,C),w.addEventListener(u.timeupdate,T),w.addEventListener(u.durationchange,A),w.addEventListener(u.seeking,P),w.addEventListener(u.seeked,x);var s=!!w.src;if(w.src=r.streamUrl,y.info("Stream starting. "+r.streamUrl),E.setTracks(r.tracks),o=N,s||!e.html||e.html.supportsAutoplay!==!1)n(b.bufferingStarted);else{y.debug("Autoplay workaround activated."),c.runInAutoplayEnabledContext(function(){w.play(),w.controls=D;var e=new CustomEvent("startedByUser");w.dispatchEvent(e)}),D=w.controls,w.controls=!0,r.metadata&&r.metadata.posterImageUrl&&(w.poster=r.metadata.posterImageUrl),n(b.waitingForTap);var l=new CustomEvent("waitingForUserStart");w.dispatchEvent(l)}try{w.currentTime=0}catch(d){y.debug("Midroll bug fix was applied, but video element didn't like it.",d)}w.play(),z=!0}function N(){w.removeEventListener(u.error,C),w.removeEventListener(u.timeupdate,T),w.removeEventListener(u.durationchange,A),w.removeEventListener(u.playing,k),w.removeEventListener(u.ended,S),w.removeEventListener(u.seeking,P),w.removeEventListener(u.seeked,x),j&&j.remove()}var I,D,U,j,F,V=g.defer(),B=0,q=0,H=0,W=0,z=!0,Y=!1,K=0;try{var G=r.startPosition||0,J=G,X=!1;w.addEventListener(u.loadedmetadata,i),0===G&&(I=!0),_()}catch(Z){y.error("Play startup error",Z),V.reject(Z)}return V.promise}var o=null,s=t.instance.internals&&t.instance.internals.livePresentationDelay,l=navigator.userAgent.match(/(iPad|iPhone|iPod)/i),v=navigator.userAgent.match(/(Android)/i),w=t.instance.implementationApi,E=new f(w,e.subtitles);return new d.SimpleCuer(i,r,n)}var o=n(35),a=n(21),s=n(52),c=n(53),u=n(54),l=n(42),d=n(55),f=n(56),p=n(61),h=n(62),m=n(63),v=n(7),g=n(4),y=v.get("htmlPlaybackScheduler"),b=l.basicEventTypes;e.exports={getPlaybackScheduler:o(r,"htmlPlaybackScheduler"),getVideoCuer:o(i,"htmlPlaybackScheduler")}},function(e,t,n){"use strict";function r(e,t,n,r){function i(e){return new s.PositionListener(e,r)}this.main={source:e,lastKnownPosition:0,lastKnownDuration:0,startPosition:t},this.isSeeking=!1,this.isSchedulingAds=!1,this.hasInterstitials=n&&Array.isArray(n.positions)&&n.positions.length>0,this.interstitialNotificator=new s.PositionNotificator((!0)),this.adProgress=l.preroll,this.isStarted=!1,this.isEnded=!1,this.hasInterstitials&&this.interstitialNotificator.addSubscribers(n.positions.map(i))}function i(e,t){return function(n,i,o){function s(e,t,r,i,o){if(!k.isEnded)if(e===d.ended)g(),n.apply(null,arguments);else switch(n.apply(null,arguments),e){case d.temporalupdate:w(t,r,i);break;case d.seekstarted:k.isSeeking=!0;break;case d.seekended:k.isSeeking=!1;break;case d.failed:E.reject(o)}}function c(){}function p(){k.adProgress=l.preroll,n(d.cuepreroll,k.main.startPosition,0)}function h(r){var i=k.isSchedulingAds;k.isSchedulingAds=!0,k.adProgress!==l.midroll||i||(k.main.startPosition=e.getPosition(),f.debug("Storing start position "+k.main.startPosition),n(d.interrupted,k.main.startPosition,k.lastKnownDuration)),r?e.play(s,r):e.stop(),k.isStarted=!0,t&&t.disable()}function m(n){var r=k.main.startPosition;"number"==typeof n&&0!==n&&(r+=n),f.debug("Scheduling main content from position "+r),e.play(s,a.combine(k.main.source,{startPosition:r})),t&&t.enable(),k.isStarted=!0}function v(e){var t=k.isSchedulingAds;k.isSchedulingAds=!1;var n=k.adProgress;switch(n){case l.preroll:k.adProgress=l.midroll,m();break;case l.midroll:t&&m(e);break;case l.postroll:y()}}function g(){k.isEnded||k.isSchedulingAds||(k.adProgress=l.postroll,n(d.cuepostroll,k.main.lastKnownPosition,k.lastKnownDuration))}function y(){n=function(){},k.isEnded=!0,E.fulfill()}function b(e){n(d.cuemidroll,e,k.main.lastKnownDuration)}function w(e,t,n){k.isEnded||k.isSchedulingAds||k.isSeeking||n||(k.main.lastKnownPosition=e,k.main.lastKnownDuration=t,k.interstitialNotificator.updatePosition(e))}var E=u.defer(),k=new r(i,i.startPosition,o,b);return f.debug("Scheduling "+i.streamUrl+" with start position "+i.startPosition),c(),window.setTimeout(p,10),{promise:E.promise,resume:v,scheduleAd:h,stop:e.stop}}}var o=n(42),a=n(21),s=n(44),c=n(7),u=n(4),l=o.adModes,d=o.basicEventTypes,f=c.get("serialSchedulerHelper");e.exports={getScheduler:i}},function(e,t,n){"use strict";function r(e,t,n){e.src=n,e.play(),e.pause()}function i(e){function t(n){n.preventDefault(),e(),document.body.removeEventListener("touchend",t,!0)}return o.debug("RegistrertAutoplayListener saken."),document.body.addEventListener("touchend",t,!0),{cancel:function(){document.body.removeEventListener("touchend",t,!0)}}}var o=n(7);e.exports={enforceAutoplay:r,runInAutoplayEnabledContext:i}},function(e,t){e.exports={abort:"abort",canplay:"canplay",canplaythrough:"canplaythrough",durationchange:"durationchange",emptied:"emptied",ended:"ended",error:"error",loadeddata:"loadeddata",loadedmetadata:"loadedmetadata",loadstart:"loadstart",pause:"pause",play:"play",playing:"playing",progress:"progress",ratechange:"ratechange",seeked:"seeked",seeking:"seeking",stalled:"stalled",suspend:"suspend",timeupdate:"timeupdate",volumechange:"volumechange",waiting:"waiting"}},function(e,t){"use strict";function n(e,t,n){this.play=e,this.stop=t,this.getPosition=n}function r(e,t,n,r,i){this.play=e,this.interrupt=r,
this.resume=i,this.stop=t,this.getPosition=n}r.prototype=Object.create(n),r.prototype.constructor=r,e.exports={SimpleCuer:n,InterruptableMainCuer:r}},function(e,t,n){"use strict";function r(e){return e.kind+"_"+e.language}function i(e,t){function n(t){if(!t.cueData){var n=document.createElement("track");return n.kind=t.kind,n.src=t.src,t.language&&(n.srclang=t.language),t.isDefault&&(n["default"]=t.isDefault),t.label&&(n.label=t.label),c.debug("Adding track with URL.",t,n),e.appendChild(n),n}var r=e.addTextTrack(t.kind,t.label,t.language);t.cueData.forEach(function(e){r.addCue(new v(e.start,e.end,e.data))}),c.debug("Adding track with cues from parsed file.",t)}function i(e){var t=e.track;return g&&"ttml"===e.type?w.getAndParse("application/ttml+xml",t.src).then(function(e){t.cueData=e,n(t)},function(e){c.error("Fetching, parsing or adding subtitle file failed.",t.src,e)}):void n(t)}function a(e){var t=(e.contentType||"").toLowerCase(),n=!1;b.forEach(function(e){t.indexOf(e)>=0&&(n=!0)});var r=!1;return y.forEach(function(e){t.indexOf(e)>=0&&(r=!0)}),{track:e,type:n?"vtt":r?"ttml":"unknown"}}function l(e){var t={};return e.filter(function(e){return"unknown"!==e.type}).forEach(function(e){var n=r(e.track);t[n]&&"vtt"!==e.type?c.debug("Discarding track of format "+e.type+", because there was an existing or better alternative added.",e.track):t[n]=e}),Object.getOwnPropertyNames(t).map(function(e){return t[e]})}function d(e){if(m=[0],Array.isArray(e))return l(e.map(a)).map(i).reduce(s.when,s())}function f(){var t=0===m.length;if(e.textTracks)for(var n=0;n<e.textTracks.length;n++){var r=e.textTracks[n];t&&(u="number"==typeof r.mode,m[n]=r.mode),r.mode=u?0:"off"}}function p(){if(e.textTracks&&m.length===e.textTracks.length)for(var t=0;t<e.textTracks.length;t++){var n=e.textTracks[t];n.mode=m[t]}m=[]}function h(){}var m=[],v=window.VTTCue||window.TextTrackCue,g=t&&t.ttmlParsingRequired,y=t&&t.contentTypeMappings?t.contentTypeMappings.ttml:["ttml","xml"],b=t&&t.contentTypeMappings?t.contentTypeMappings.vtt:["vtt"],w=g?new o(t):null;return{setTracks:d,disable:f,enable:p,cleanup:h}}var o=n(57),a=n(7),s=n(4),c=a.get("textTrackManager"),u=!1;e.exports=i},function(e,t,n){"use strict";function r(e){function t(t,n){return"application/ttml+xml"===t?i.parse(n,e.allowTimeCodesWithDotFrameSeparator,e.defaultFramerate):n}function n(e,n){return o.fetch(n).then(function(n){return t(e,n)})}function r(e){return o.fetch(e)}this.get=r,this.getAndParse=n}var i=n(58),o=n(59);e.exports=r},function(e,t,n){"use strict";function r(e,t){var n,r,i,o,a,s=/^([0-9]+:){0,2}[0-9]+([.:;][0-9]+)?$/,c="Invalid time format",u=0;return"number"==typeof e?e:("string"!=typeof e||s.test(e)||p.error(c,e),n=e.split(":"),r=n.length-1,i=n[r],4==n.length?(a=n.pop(),r=n.length-1,t&&"number"==typeof t&&(u=parseInt(a,10)/t),n[r]=parseInt(n[r],10)+u):i.indexOf(";")>-1&&(a=i.split(";"),t&&"number"==typeof t&&(u=parseFloat(a[1])/t),n[r]=parseInt(a[0],10)+u),o=n[0],{1:parseFloat(o),2:60*parseInt(o,10)+parseFloat(n[1]),3:3600*parseInt(o,10)+60*parseInt(n[1],10)+parseFloat(n[2])}[n.length||1])}function i(e,t,n,r){for(var s,u=e.firstChild,l=o(e,r),d=[];u;)1===u.nodeType&&("p"===u.nodeName?d.push(a(u,n,l,t)):"div"===u.nodeName&&(s=c(u.getAttribute("begin"),0,t),s<0&&(s=n),d.push.apply(d,i(u,t,s,l)))),u=u.nextSibling;return d}function o(e,t){var n=e.getAttribute("region");return null!==n?n:t||""}function a(e,t,n,r){var i={};return i.text=s(e),i.data=i.text,i.id=e.getAttribute("xml:id")||e.getAttribute("id"),i.start=c(e.getAttribute("begin"),t,r),i.end=c(e.getAttribute("end"),t,r),i.target=o(e,n),i.end<0&&(i.end=c(e.getAttribute("duration"),0,r),i.end>=0?i.end+=i.start:i.end=Number.MAX_VALUE),i}function s(e){return e.nodeType===e.TEXT_NODE?e.textContent.replace(h,""):"br"===e.nodeName.toLowerCase()?"\n":Array.prototype.map.call(e.childNodes,s).join("")}function c(e,t,n){var i;if(!e)return-1;try{var o=r(e,n);return o}catch(a){return i=u(e),parseFloat(e.substring(0,i))*l(e.substring(i))+(t||0)}}function u(e){for(var t=e.length-1;t>=0&&e[t]<="9"&&e[t]>="0";)t--;return t}function l(e){return{h:3600,m:60,s:1,ms:.001}[e]||-1}function d(e,t,n){var r,o=new DOMParser;if(!e)return[];try{r=o.parseFromString(e,"text/xml").documentElement.firstChild}catch(a){return p.error("TTML parse error",a),[]}if(!r)return[];for(;"body"!==r.nodeName;)r=r.nextSibling;return r?i(r,n,0):void 0}var f=n(7),p=f.get("ttmlParser"),h=/(?:\r\n|\r|\n)/gm;e.exports={parse:d}},function(e,t,n){"use strict";function r(e,t,n,r,i){var c=s.defer(),u=new XMLHttpRequest,l=function(t){o.warn("XHR error",t,u.status),c.reject(new a(u.status,"xhr: Request failed.",e,t))},d=function(t){o.warn("XHR abort",t),c.reject(new a(u.status,"xhr: Request aborted.",e,t))},f=function(t){o.warn("XHR timeout",t),c.reject(new a(u.status,"xhr: Request aborted.",e,t))};return i&&i.timeout&&window.setTimeout(function(){c.reject(new a(0,"xhr: Request aborted.",e)),u.abort()},1e3*i.timeout),u.onreadystatechange=function(){try{4==u.readyState&&c.resolve(u)}catch(e){c.reject(e)}},u.onerror=l,u.onabort=d,u.ontimeout=f,u.open(t,e),u.withCredentials=!!i&&(null!=i.withCredentials&&i.withCredentials),u.setRequestHeader("Accept","application/json, application/javascript, text/plain"),r&&Object.getOwnPropertyNames(r).forEach(function(e){u.setRequestHeader(e,r[e])}),i&&i.authorization&&u.setRequestHeader("Authorization",i.authorization),u.send(n),c.promise}function i(e){return r(e,"GET",null,null,null).then(function(e){return e.response})}var o=n(7).get("xhrRequester"),a=n(60),s=n(4);e.exports={doRequest:r,fetch:i}},function(e,t){"use strict";function n(e,t,n,r){this.code=e,this.message=t||"Rest client error",this.url=n,this.response=r,this.requester=!0}n.prototype=new Error,n.prototype.constructor=n,e.exports=n},function(e,t,n){"use strict";function r(e,t,n){function r(e,t,n){i.debug("Fetching license",e);var r,o=new XMLHttpRequest;o.open("POST",e),o.responseType="arraybuffer",o.onreadystatechange=function(){if(4===o.readyState){if(200!==o.status)throw"XHR failed ("+e+"). Status: "+o.status+" ("+o.statusText+")";n(o.response)}};var a=(new DOMParser).parseFromString(String.fromCharCode.apply(null,new Uint16Array(t)),"application/xml");if(!a.getElementsByTagName("Challenge")[0])throw"Cannot find <Challenge> in key message";r=atob(a.getElementsByTagName("Challenge")[0].childNodes[0].nodeValue);var s=a.getElementsByTagName("name"),c=a.getElementsByTagName("value");if(s.length!==c.length)throw"Mismatched header <name>/<value> pair in key message";for(var u=0;u<s.length;u++)o.setRequestHeader(s[u].childNodes[0].nodeValue,c[u].childNodes[0].nodeValue);o.send(r)}function a(e){void 0===f&&s(e),u(e.target,e.initDataType,e.initData)}function s(){navigator.requestMediaKeySystemAccess(o,[{initDataTypes:["keyids","cenc"],audioCapabilities:[{contentType:'audio/mp4; codecs="mp4a"'}],videoCapabilities:[{contentType:'video/mp4; codecs="avc1"'}]}]).then(function(e){e.createMediaKeys().then(c)["catch"](function(e){i.error("createMediaKeys failed.",e)})},function(e){i.error("Key system access failed.",e)})}function c(e){i.debug("createMediaKeys success"),f=e;for(var n=0;n<t.pendingSessionData.length;n++){var r=t.pendingSessionData[n];a(e,r.initDataType,r.initData)}t.pendingSessionData=[],t.setMediaKeys(e)}function u(e,t,n){f?a(f,t,n):(i.debug("Storing pending session data"),e.pendingSessionData.push({initDataType:t,initData:n}))}function l(a){if(i.debug("msneedkey invoked"),t.msKeys)return void i.debug("Already set media keys for this session.");try{t.msSetMediaKeys(new e.MSMediaKeys(o)),i.debug("Using prefixed EME and PlayReady DRM.")}catch(s){throw'Unable to create MediaKeys("'+o+'"). Verify the components are installed and functional. Original error: '+s.message}var c=t.msKeys.createSession("video/mp4",a.initData);if(!c)throw i.debug("Failed creating session.",a,t.msKeys),"Could not create key session";c.addEventListener("mskeymessage",function(e){return i.debug("mskeymessage invoked"),p?void i.warn("Key session still active after closedown.",e,n):void r(n.licenseUrl,e.message.buffer,function(e){c.update(new Uint8Array(e))})}),c.addEventListener("mskeyerror",function(){if(i.warn("mskeyerror invoked",c.error),p)return void i.warn("Key session still active after closedown.",event,n);throw"Unexpected 'keyerror' event from key session. Code: "+c.error.code+", systemCode: "+c.error.systemCode})}function d(){e.navigator.requestMediaKeySystemAccess?t.removeEventListener("encrypted",a,!1):t.removeEventListener("msneedkey",l,!1),p=!0}var f,p;return e.navigator.requestMediaKeySystemAccess?t.addEventListener("encrypted",a,!1):t.addEventListener("msneedkey",l,!1),{remove:d}}var i=n(7).get("licenseManager"),o="com.microsoft.playready";e.exports={getLicenseAcquirer:r}},function(e,t,n){"use strict";var r=n(7).get("fairplayLicenseAcquirer"),i=function(e,t,n,i,o){function a(e){for(var t=new ArrayBuffer(2*e.length),n=new Uint16Array(t),r=0,i=e.length;r<i;r++)n[r]=e.charCodeAt(r);return n}function s(e){var t=new Uint16Array(e.buffer);return String.fromCharCode.apply(null,t)}function c(e){for(var t=window.atob(e),n=t.length,r=new Uint8Array(new ArrayBuffer(n)),i=0;i<n;i++)r[i]=t.charCodeAt(i);return r}function u(e){for(var t,n,r,i,o,a,s,c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",u="",l=0;l<e.length;)t=e[l++],n=l<e.length?e[l++]:Number.NaN,r=l<e.length?e[l++]:Number.NaN,i=t>>2,o=(3&t)<<4|n>>4,a=(15&n)<<2|r>>6,s=63&r,isNaN(n)?a=s=64:isNaN(r)&&(s=64),u+=c.charAt(i)+c.charAt(o)+c.charAt(a)+c.charAt(s);return u}function l(e){var t=s(e),n=i&&i.contentIdExtractMatch||/([0-9]+)$/,r=n.exec(t);return r&&r[0]}function d(e,t,n){"string"==typeof t?t=a(t):"number"==typeof t&&(t=a(""+t));var r=0,i=new ArrayBuffer(e.byteLength+4+t.byteLength+4+n.byteLength),o=new DataView(i),s=new Uint8Array(i,r,e.byteLength);s.set(e),r+=e.byteLength,o.setUint32(r,t.byteLength,!0),r+=4;var c=new Uint8Array(i,r,t.byteLength);c.set(t),r+=c.byteLength,o.setUint32(r,n.byteLength,!0),r+=4;var u=new Uint8Array(i,r,n.byteLength);return u.set(n),new Uint8Array(i,0,i.byteLength)}function f(t){r.debug("needkey",t);var a=t.target,c=t.initData;if(n||(n=l(c),r.debug("Content ID extracted from initData.",n)),a.webkitKeys||a.webkitSetMediaKeys(new e.WebKitMediaKeys(b)),!a.webkitKeys)throw"Could not create MediaKeys";var u=i.licenseUrl;if(i.useLicenseUrlFromStream){var f=s(c).substring(1);u=f.substring(f.indexOf("/",f.indexOf("://")+3))}if(w)p(a,u,d(c,n,w));else{var h=new XMLHttpRequest;h.responseType="arraybuffer",h.addEventListener("load",function(e){var t=e.target;t.status&&t.status<400?(w=new Uint8Array(t.response),p(a,u,d(c,n,w))):o("certificate","status",i.certificateUrl,e)},!1),h.addEventListener("error",o.bind(null,"certificate","error",i.certificateUrl),!1),h.addEventListener("timeout",o.bind(null,"certificate","timeout",i.certificateUrl),!1),h.open("GET",i.certificateUrl,!0),h.send()}}function p(e,t,i){var o=e.webkitKeys.createSession("video/mp4",i);if(!o)throw"Could not create key session";o.contentId=n,o.licenseURL=t,o.addEventListener("webkitkeymessage",h,!1),o.addEventListener("webkitkeyadded",v,!1),o.addEventListener("webkitkeyerror",g,!1),r.debug("keySession: ",o)}function h(e){var t=e.target,n=e.message,r=new XMLHttpRequest;r.responseType="text",r.session=t,r.addEventListener("load",m,!1),r.addEventListener("error",o.bind(null,"license","error",t.licenseURL),!1),r.addEventListener("timeout",o.bind(null,"license","timeout",t.licenseURL),!1),r.open("POST",t.licenseURL,!0),r.send(u(n))}function m(e){var t=e.target;if(t.status&&t.status<400){var n=t.session,r=t.responseText.trim();"<ckc>"===r.substr(0,5)&&"</ckc>"===r.substr(-6)&&(r=r.slice(5,-6));var i=c(r);n.update(i)}else o("license","status",t.session.licenseURL,e)}function v(e){r.debug("Decryption key added",e)}function g(e){r.error("Failed to get decryption key",e),o("key","error","",e)}function y(){t.removeEventListener("webkitneedkey",f,!1)}var b="com.apple.fps.1_0",w=null;return i&&r.debug("Protection data for FairPlay available.",i,n),o=o||function(e,t,n){r.error("Error reported.",e,t,n)},t.addEventListener("webkitneedkey",f,!1),{remove:y}};e.exports={getLicenseAcquirer:i}},function(e,t,n){"use strict";function r(e,t,n){var r=e.match(/Mac OS X.*Safari/)&&!e.match(/(Chrome)/),i=e.match(/(iPad|iPhone|iPod)/i);if(n.code){var c=o.codes.STREAM_ERROR;return 3!==n.code&&4!==n.code||(c=i||r?o.codes.STREAM_ERROR_DOWNLOAD:o.codes.STREAM_ERROR_DECODE),new o(c,s[n.code]+(n.message?": "+n.message:""),n,a,o.severities.fatal)}return new o(o.codes.STREAM_ERROR,n.message,n,a,o.severities.fatal)}function i(e,t,n,r){var i=r.target,s="Request "+t+" for "+e+". "+n;return"key"===e?s="FairPlay key error.":"status"===t&&(s="HTTP error "+i.status+" for "+e+" request. "+n),new o(o.codes.STREAM_ERROR_DOWNLOAD,s,null,a,o.severities.fatal)}var o=n(64),a="html",s=["(unknown)","MEDIA_ERR_ABORTED","MEDIA_ERR_NETWORK","MEDIA_ERR_DECODE","MEDIA_ERR_SRC_NOT_SUPPORTED","MEDIA_ERR_ENCRYPTED"];e.exports={mapVideoElementError:r,mapDrmRequestError:i}},function(e,t){"use strict";function n(e,t,n,r,i){this.code=e,this.message=t,this.sourceError=n,this.technology=r,this.severity=i||"fatal"}n.prototype=new Error,n.prototype.constructor=n,n.codes={STREAM_ERROR_DRM_CLIENT_UNAVAILABLE:"STREAM_ERROR_DRM_CLIENT_UNAVAILABLE",STREAM_ERROR_PLUGIN_UNAVAILABLE:"STREAM_ERROR_PLUGIN_UNAVAILABLE",STREAM_ERROR_DOWNLOAD:"STREAM_ERROR_DOWNLOAD",STREAM_ERROR_DECODE:"STREAM_ERROR_DECODE",STREAM_ERROR:"STREAM_ERROR"},n.severities={fatal:"fatal",warning:"warning"},e.exports=n},function(e,t,n){"use strict";function r(e){function t(t,n){function r(){p.classList.add(m),p.classList.remove(v),n(!0)}function i(){p.classList.add(v),p.classList.remove(m),n(!1)}function l(e,t){function n(t){t!==u.basicEventTypes.ended&&t!==u.basicEventTypes.failed||i(),e.apply(e,arguments)}return r(),g.play(n,t)}function d(){return i(),g.stop()}function f(){p.pause(),p.src="",p.parentNode&&p.parentNode.removeChild(p)}var p=a.applyContext(e).build(),h=new c("html","HTMLVideoElement",p,p),m=e.htmlAdOverlay.activeClassName,v=e.htmlAdOverlay.inactiveClassName,g=o.getVideoCuer.applyContext(e,{instance:h});return p.classList.add(v),p.controls=!1,t.appendChild(p),{cuer:new s.SimpleCuer(l,d,g.getPosition),remove:f,instance:h}}return{insert:t}}var i=n(35),o=n(51),a=n(46),s=n(55),c=n(47),u=n(42);e.exports=i(r,"htmlAdOverlayInserter")},function(e,t,n){"use strict";function r(e){var t=document.createElement("param");return t.setAttribute("name",e.name),t.setAttribute("value",e.value),t}function i(e){var t="interactive=false";if(e){var n=Object.getOwnPropertyNames(e).map(function(t){return e[t]&&e[t].file||""}).join(";");n.length>0&&(t+=",plugins="+n)}return t}function o(){var e=document.createElement("a");e.setAttribute("href","http://go.microsoft.com/fwlink/?LinkID=149156&v=5.0.61118.0"),e.style.textDecoration="none";var t=document.createElement("img");return t.setAttribute("src","http://go.microsoft.com/fwlink/?LinkId=161376"),e.style.borderStyle="none",e.appendChild(t),e}function a(e,t,n,i,a){var s=document.createElement("object");s.setAttribute("data","data:application/x-silverlight-2,"),s.setAttribute("type","application/x-silverlight-2"),s.className=t;var c=v.concat([{name:"source",value:e},{name:"onLoad",value:i},{name:"onError",value:a},{name:"initParams",value:n}]);return c.map(r).forEach(function(e){s.appendChild(e)}),s.appendChild(o()),s}function s(e){var t=p.get("silverlight");e.addEventListener("LogEntered",function(e,n){var r=[],i=n.Level;if(n.Data&&n.Data.length)for(var o=0;o<n.Data.length;o++)r.push(n.Data[o]);var a=r;a.unshift(n.Message),t[i.toLowerCase()].apply(t,a)})}function c(e,t){function n(e,t){var n=!t.Error,a=t.Name;if(r[a]=n?e:o,i[a]){try{n?(m.debug("Silverlight plugin initialized",a),i[a].resolve({pluginInstance:e})):(m.debug("Failed to initialice silverlight plugin",a,t.Error),i[a].reject("Failed to initialize plugin: "+a))}catch(s){m.error("Plugin consumer notification failed.",s)}delete i[a]}}var r={},i={},o="failed";return e&&t&&(t.PluginInitialized=n,t.PluginFailed=n),{getPlugin:function(t){var n=h.defer();if(r[t])r[t]!==o?(m.debug("Plugin consumer being fed.",t),n.resolve({pluginInstance:r[t]})):n.reject("Failed to initialize plugin: "+t);else{var a=!1;Object.getOwnPropertyNames(e||{}).forEach(function(n){e[n]&&e[n].file===t&&(a=!0)}),a?(m.debug("Waiting for plugin to be loaded.",t),i[t]=n):n.reject("Silverlight plugin not defined in config: "+t)}return n.promise}}}function u(e){function t(t){function n(t){var n,r,i;try{i=p.Content.Player}catch(a){m.error("Unable to get hold of Silverlight API. JS access might be blocked?",a,t),u.reject(a)}try{e.silverlight.core.plugins&&(n=p.Content.PluginLoader)}catch(a){m.warn("Unable to set up plugin loading.",a,t)}try{s(i)}catch(a){m.error("Initialization of player failed, recovering gracefully.",a)}try{r=c(e.silverlight.core.plugins,n)}catch(l){m.warn("Plugin manager init failed",l,t)}u.resolve(new f("silverlight","Vimond.Player.Core",p,i,{pluginManager:r},o))}function r(t,n){m.debug("Silverlight plugin reported an error when trying to load the app. Check that the XAP url, '"+e.silverlight.core.xapUrl+"', is correctly configured.",t,n),u.reject(n)}function o(){window.setTimeout(function(){p.parentNode.removeChild(p),m.debug("Silverlight element removed.")},10)}var u=h.defer(),l=e.silverlight.core.domClassName||"",p=a(e.silverlight.core.xapUrl,l,i(e.silverlight.core.plugins),d.addGlobalPollutant("onSlLoad",n,!0),d.addGlobalPollutant("onSlError",r,!0));return t.appendChild(p),u.promise}return{insert:t}}var l=n(35),d=n(67),f=n(47),p=n(7),h=n(4),m=p.get("silverlightVideoInserter"),v=[{name:"background",value:"black"},{name:"minRuntimeVersion",value:"4.0.60310.0"},{name:"enableGPUAcceleration",value:"true"},{name:"windowless",value:"true"},{name:"enableHTMLAccess",value:"true"},{name:"autoUpgrade",value:"true"}];e.exports=l(u,"silverlightVideoInserter")},function(e,t,n){"use strict";function r(e){return"['"+e+"']"}function i(){return window.vimond?"vimond":"___vimond"}function o(){var e=i();return window[e]=window[e]||{}}function a(e,t,n){for(var r=e;r in window;)r+="_";return window[r]=function(){try{t.apply(this,arguments)}catch(e){u.error("Call to registered global function failed",r,e,arguments)}n&&delete window[r]},r}function s(e){function t(e){return"window"+r(i())+r(n)+r(e)}var n="p-"+e,a=o(),s=a[n]=a[n]||{};return u.debug("Global namespace polluted with "+r(i())+r(n)),{addPollutant:function(e,n){return s[e]=n,t(e)},getPollutant:function(e){return s[e]},getPollutantPath:function(e){return t(e)}}}var c=n(7),u=c.get("globalScopePolluter");e.exports={get:function(e){return new s(e)},getBase:o,getBasePath:function(){return polluterBaseProperty},addGlobalPollutant:a}},function(e,t,n){"use strict";function r(e,t){function n(){return t.internals&&t.internals.streamTrimmer}function r(e){var t=e%86400;a.debug("Live position reported upon live stream startup.",c.formatTimeFromSeconds(t),e)}function i(){var e=t.internals&&t.internals.timingModel;if(e)if("timeComponentFromStream"===e.alignmentType){var n=S.LivePosition;n&&(r(n),E=s.computeBaseDateForClockTimeWithDays(n,e.centralTimeZoneOffset||0,new Date),a.debug("Absolute timing base date computed with central time offset "+(e.centralTimeZoneOffset||0)+" seconds: "+E))}else E=(e.baseDateTime instanceof Date&&e.baseDateTime||new Date).getTime()/1e3,a.debug("Setting base date aligned with stream start.",E);else a.debug("Timing model not found."),E=(new Date).getTime()/1e3}function u(t,n){if(k)return e.update(t,n)}function l(t){t||(!T||S.IsStreamOpen?S.IsBuffering?t=A?e.playStates.buffering:e.playStates.starting:S.IsPaused?(A=!0,t=e.playStates.paused):S.IsSeeking?t=A?e.playStates.seeking:e.playStates.starting:(A=!0,t=e.playStates.playing):t=e.playStates.inactive),u(e.props.playState,t)}function d(){u(e.props.isPaused,S.IsStreamOpen&&S.IsPaused)}function f(){u(e.props.volume,S.Volume),u(e.props.isMuted,S.IsMuted)}function p(){var t=new Date,r=new Date;t.setTime(1e3*(E+S.AbsolutePosition)),r.setTime(1e3*(E+S.AbsoluteStartPosition));var i=n()?n().getPosition():S.RelativePosition;u(e.props.position,i),u(e.props.absoluteStartPosition,r),u(e.props.absolutePosition,t)}function h(){var t=n();u(e.props.duration,t?t.getDuration():S.Duration)}function m(){var t=n();S.IsLive?(t?t.getDuration():S.Duration)>100?u(e.props.playMode,e.playModes.livedvr):u(e.props.playMode,e.playModes.live):u(e.props.playMode,e.playModes.ondemand)}function v(){u(e.props.isAtLivePosition,S.IsLivePosition)}function g(){u(e.props.bitrate,S.CurrentBitrate)}function y(){u("error",S.ErrorMessage)}function b(){var n=t.internals&&t.internals.subtitlesManager;n&&u(e.props.textTracks,n.selectableTracks)}function w(e){i(),f(),l(e),h(),p(),m(),v(),d(),b(),g(),y()}var E,k=!0,S=t.implementationApi,T=!1,A=!1,P=!1,x={},C=0,R=[];x.audioTrackFound=S.addEventListener("AudioTrackFound",function(t,n){var r=n.Name,i=n.Language,s=n.AudioStreamCount,c=function(){S.SelectTrack(r,i)};C++;var l=new o.AudioTrackSelectionModel(c,C,"",i,r);R.push(l),C==s&&u(e.props.audioTracks,R),a.debug("AudioTrackFound invoked",i,r,s)}),x.streamStarted=S.addEventListener("StreamStarted",function(){a.debug("StreamStarted invoked"),w()}),x.streamEnded=S.addEventListener("StreamEnded",function(){a.debug("StreamEnded invoked"),T=!0,l(),d()}),x.streamFailed=S.addEventListener("StreamFailed",function(){a.debug("StreamFailed invoked"),y(),l(e.playStates.inactive),d()}),x.positionUpdated=S.addEventListener("PositionUpdated",function(){p(),h(),(S.IsLive||P)&&(m(),v(),P=S.IsLive)}),x.playstateChanged=S.addEventListener("PlaystateChanged",function(){a.debug("PlaystateChanged invoked"),l(),d(),v()}),x.volumeChanged=S.addEventListener("VolumeChanged",function(){f()}),x.bitrateChanged=S.addEventListener("BitrateChanged",function(){g()}),w(e.playStates.starting),this.setActive=function(e){e!==k&&(k=e,a.debug("Setting Silverlight video observer "+(e?"active":"inactive")),k&&w())},this.unobserve=function(){try{}catch(e){a.warn("A proper way of detaching Silverlight event listeners is apparently not found.",e)}}}function i(e){var t=e.implementationApi,n=t.Volume,r=!0;this.play=function(){r&&t.Play()},this.pause=function(){r&&t.Pause()},this.setPosition=function(n){r&&(e.internals&&e.internals.streamTrimmer?e.internals.streamTrimmer.setPosition(n):t.RelativePosition=n)},this.setVolume=function(e){t.IsMuted=0===parseFloat(e),t.Volume=e},this.setIsMuted=function(e){e?(n=t.Volume,t.Volume=0):t.Volume=n,t.IsMuted=e},this.gotoLive=function(){r&&t.SeekToLive()},this.capBitrate=function(e){window.slApi=t,isNaN(e)||e===1/0||e<0?(a.debug("Resetting restrictions for bitrate."),t.LimitBitrates(0,0)):(a.debug("Applying restrictions for bitrate.",e),t.LimitBitrates(e,0))},this.setActive=function(e){e!==r&&(a.debug("Setting Silverlight video updater "+(e?"active":"inactive")),r=e)}}var o=n(50),a=n(7).get("silverlightVideoAdapters"),s=n(69),c=n(21);e.exports={VideoUpdater:i,VideoObserver:r}},function(e,t){"use strict";function n(e){return e>9?e:"0"+e.toString()}function r(e){var t="";if(e.length>19&&":"===e.charAt(16)?t=e.substring(19):e.length>16&&":"!==e.charAt(16)?t=e.substring(16):e.length>13&&":"!==e.charAt(13)&&(t=e.substring(13)),t.length>4){var n="+"===t.charAt(0)?1:-1,r=t.substring(1,3),i=6===t.length?t.substring(4,6):t.substring(3,5);return n*(60*parseInt(r,10)+parseInt(i))*60}return 0}function i(e,t,n){var r=86400*Math.floor(t.getTime()/864e5),i=r-n,o=i+e;return new Date(1e3*o)}function o(e,t,n){var r=86400*Math.floor(n.getTime()/864e5),i=r-t;return i-86400*Math.floor(e/86400)}function a(e,t){var r=new Date(e.getTime()+1e3*(t||0));return n(r.getUTCHours())+":"+n(r.getUTCMinutes())+":"+n(r.getUTCSeconds())}e.exports={convertRemoteClockTimeToFullDate:i,extractTimeZoneOffsetFromIsoDate:r,formatTimeWithTimeZone:a,computeBaseDateForClockTimeWithDays:o}},function(e,t,n){"use strict";function r(e,t,n,r,i){function o(){return e.RelativePosition}function a(t){e.RelativePosition=t}function s(){return e.Duration}function c(){i()}t.streamEnded=e.addEventListener("StreamEnded",c);var u=new d.StreamTrimmer(n,o,a,s,i);return t.positionUpdated=e.addEventListener("PositionUpdated",function(){try{u.onPositionUpdated()}catch(e){m.error("Position update in stream trimmer failed.",e)}r()}),u}function i(e,t,n){var r=new p(t),i=new f.SilverlightSubtitlesManager(r,t,e);return n.getPlugin("Vimond.Player.Subtitles").then(function(e){m.debug("Got the subtitles plugin."),i.setSubtitlesPlugin(e.pluginInstance)}),i}function o(e,t){function n(){return y.getPosition()}function o(){g.Stop(),p=!1}function a(){f=y.getPosition(),m.debug("Interrupting playback for ads.",f),g.Pause()}function s(e){"number"==typeof e&&0!==e?(m.debug("Seeking upon resume according to interval:",e),y.setPosition(f+e)):f&&Math.abs(y.getPosition()-f)>5?m.warn("The position upon resuming is different from the position upon ad break start.",y.getPosition(),f):m.debug("Resuming playback after ads."),f=void 0,g.Play()}function l(n,o){function a(){y=r(g,b,o.timingModel,k,l),t.instance.internals.streamTrimmer=y,b.streamStarted=g.addEventListener("StreamStarted",u),b.streamFailed=g.addEventListener("StreamFailed",d),b.playstateChanged=g.addEventListener("PlaystateChanged",S)}function s(){try{}catch(e){m.warn("Silverlight event handler cleanup failed.",e)}}function c(){try{if(p=!0,a(),m.debug("Setting source",o),g.StreamUri=o.streamUrl,o.licenseUrl){var t=e.silverlight.licenseUrlModifier?o.licenseUrl.replace(e.silverlight.licenseUrlModifier.match instanceof RegExp?e.silverlight.licenseUrlModifier.match:new RegExp(e.silverlight.licenseUrlModifier.match),e.silverlight.licenseUrlModifier.replacement):o.licenseUrl;0===t.indexOf("http")?g.LicenseUri=t:(m.warn("License URL for Silverlight is not containing scheme and possibly host. Assuming current page origin for host/scheme."),0===t.indexOf("//")?g.LicenseUri=document.location.protocol+t:g.LicenseUri=document.location.protocol+"//"+document.location.host+t)}n(v.bufferingStarted,T),M=!0}catch(r){m.error("Start error",r),P.reject(r)}}function u(){p&&(n(v.started),A&&n(v.positioned))}function l(){p&&n(v.ended,x,C,!1),s(),p=!1}function d(){if(p&&m.warn("Silverlight video error",g.ErrorMessage),t.streamFailover){if(M){M=!1;try{t.streamFailover(g.ErrorMessage,O,o,e,x,R).then(E).done(null,w)}catch(n){m.warn("The failover function failed. There is no failover to the failover, giving up.",n),w(n)}}}else w(g.ErrorMessage)}function f(e,t,r,i,o){e!==v.failed&&(R=e),n(e,t,r,i,o)}function w(e){var t=f;t(v.failed,x,C,!1,e),s(),p=!1}function E(e){e.source&&(o=e.source),T=null!=e.resumePosition?e.resumePosition:x||T,f(v.failover,T,C,!1,e.error),O++,c()}function k(){x=y.getPosition(),C=y.getDuration(),n(v.temporalupdate,x,C,g.IsPaused)}function S(){p&&(T>0&&g.IsStreamOpen?(m.debug("Applying start position",T),y.setPosition(T),L=!0,T=0):g.IsSeeking&&L&&(n(v.positioned,T),L=!1),g.IsBuffering&&!_?n(v.bufferingStarted):_&&!g.IsBuffering&&n(v.bufferingEnded),g.IsSeeking&&!N?n(v.seekstarted,y.getPosition(),y.getDuration(),g.IsPaused):N&&!g.IsSeeking&&n(v.seekended,y.getPosition(),y.getDuration(),g.IsPaused),N=g.IsSeeking,_=g.IsBuffering)}var T=o.startPosition&&+o.startPosition||0,A=0===T,P=h.defer(),x=0,C=0,R=0,O=0,M=!0,L=!1,_=!0,N=!1;return t.instance.internals.timingModel=o.timingModel,t.instance.internals.pluginManager&&(t.instance.internals.subtitlesManager=i(o,e.subtitles,t.instance.internals.pluginManager)),c(),P.promise}var f,p,g=t.instance.implementationApi,y=new d.StreamTrimmer,b={};return c.getScheduler(new u.InterruptableMainCuer(l,o,n,a,s),t.adCuer)}var a=n(35),s=n(42),c=n(71),u=n(55),l=n(7),d=n(72),f=n(73),p=n(57),h=(n(74),n(4)),m=l.get("silverlightPlaybackScheduler"),v=s.basicEventTypes;e.exports={getPlaybackScheduler:a(o,"silverlightPlaybackScheduler")}},function(e,t,n){"use strict";function r(e,t,n,r){function i(e){return new a.PositionListener(e,r)}this.main={source:e,lastKnownPosition:0,lastKnownDuration:0,startPosition:t},this.isSeeking=!1,this.isSchedulingAds=!1,this.hasInterstitials=n&&Array.isArray(n.positions)&&n.positions.length>0,this.interstitialNotificator=new a.PositionNotificator((!0)),this.adProgress=u.preroll,this.isStarted=!1,this.isEnded=!1,this.hasInterstitials&&this.interstitialNotificator.addSubscribers(n.positions.map(i))}function i(e,t){return function(n,i,o){function a(e,t,r,i,o){if(!E.isEnded)if(e===l.ended||E.isSchedulingAds&&e===l.failed){m();var a=[].slice.apply(arguments);a[0]=l.ended,n.apply(null,a)}else switch(n.apply(null,arguments),e){case l.temporalupdate:y(t,r,i);break;case l.seekstarted:E.isSeeking=!0;break;case l.seekended:E.isSeeking=!1;break;case l.failed:w.reject(o)}}function s(){}function f(){E.adProgress=u.preroll,n(l.cuepreroll,E.main.startPosition,0)}function p(r){E.isSchedulingAds=!0,E.adProgress===u.midroll&&(E.main.startPosition=e.getPosition(),n(l.interrupted,E.main.startPosition,E.lastKnownDuration)),r&&t.play(a,r),e.interrupt(),r&&(E.isStarted=!0)}function h(t){E.isSchedulingAds=!1;var n=E.adProgress;switch(n){case u.preroll:e.play(a,E.main.source),E.adProgress=u.midroll;break;case u.midroll:e.resume(t);break;case u.postroll:v()}}function m(){E.isEnded||E.isSchedulingAds||(E.adProgress=u.postroll,n(l.cuepostroll,E.main.lastKnownPosition,E.lastKnownDuration))}function v(){n=function(){},E.isEnded=!0,w.fulfill()}function g(e){n(l.cuemidroll,e,E.main.lastKnownDuration)}function y(e,t,n){E.isEnded||E.isSchedulingAds||E.isSeeking||n||(E.main.lastKnownPosition=e,E.main.lastKnownDuration=t,E.interstitialNotificator.updatePosition(e))}function b(){e.stop(),t.stop()}var w=c.defer(),E=new r(i,i.startPosition,o,g);return d.debug("Scheduling "+i.streamUrl+" with start position "+i.startPosition),s(),window.setTimeout(f,10),{promise:w.promise,resume:h,scheduleAd:p,stop:b}}}var o=n(42),a=n(44),s=n(7),c=n(4),u=o.adModes,l=o.basicEventTypes,d=s.get("parallelSchedulerHelper");e.exports={getScheduler:i}},function(e,t){"use strict";function n(e,t,n,o,a){var s=e&&e.trimStart||0,c=e&&e.trimLength||0,u=s>0||c>0,l=t||i,d=o||i,f=n||r;this.onPositionUpdated=u?function(){var e=l();e<s?f(s):e>c&&a&&a()}:r,this.getPosition=u?function(){return l()-e.trimStart}:l,this.setPosition=u?function(e){var t=e+s;(0===c||t<=c)&&(0===s||t>=s)&&f(t)}:f,this.getDuration=u?function(){var e=c>0?Math.min(d(),c):d();return e-s}:d}var r=function(){},i=function(){return 0};e.exports={StreamTrimmer:n}},function(e,t,n){"use strict";function r(){var e,t,n,r,i=0;this.setSubtitle=function(n,o){return r&&(r.reject("New subtitle set."),r=null),0!==n.indexOf("http")&&(n=window.location.protocol+"//"+window.location.host+n),e?s(e.SetSubtitle(n,o)):(t=n,i=o,r=s.defer(),r.promise)},this.setSubtitleContent=function(t,o){return r&&(r.reject("New subtitle set."),r=null),e?(c.debug("Setting subtitle",t,o),s(e.SetSubtitleContent(t,o))):(c.debug("Waiting for subtitles plugin to load, delayed setting subtitle.",t,o),n=t,i=o,r=s.defer(),r.promise)},this.removeSubtitle=function(){r&&(r.reject("Subtitle removed."),r=null),e?e.RemoveSubtitle():(t=null,i=0)},this.applyPlugin=function(o){e=o,c.debug("Applying subtitle plugin",n,i),t?r.fulfill(e.SetSubtitle(t,i)):n&&r.fulfill(e.SetSubtitleContent(n,i))}}function i(e,t,n,r,i){function o(e,t){f&&f.update(e,t)}function u(e){if(e!==f.isVisible)return e?l():d()}function l(){if(f.isVisible)return s();r();var a;return p?(a=e.setSubtitleContent(p,t),c.debug("Applying earlier loaded subtitle content.")):a=i.get(n.src).then(function(n){return c.debug("Subtitle content loaded and selected.",n),p=n,e.setSubtitleContent(p,t)}),o("isVisible",!0),a}function d(){f.isVisible&&(e.removeSubtitle(),o("isVisible",!1))}var f,p;return f=new a.SubtitleSelectionModel(n.kind,n.language,n.label,u,l,d)}function o(e,t,n){function o(){d.forEach(function(e){e.unselect()})}function a(e){if("subtitles"===e.kind||"captions"===e.kind)for(var t=0;t<s.length;t++)if(e.contentType&&e.contentType.indexOf(s[t])>=0)return!0;return!1}var s=(t&&t.contentTypeMappings?t.contentTypeMappings.ttml:["ttml","xml"]).concat(t&&t.contentTypeMappings?t.contentTypeMappings.srt:["subrip","text/plain"]),u=n.timingModel&&n.timingModel.trimStart||0,l=new r,d=(n.tracks||[]).filter(a).map(function(t){
return i(l,u,t,o,e)});return c.debug("Selectable subtitles found from tracks.",n.tracks,d),{selectableTracks:d,setSubtitlesPlugin:l.applyPlugin}}var a=n(49),s=n(4),c=n(7).get("SilverlightSubtitlesManager");e.exports={SilverlightSubtitlesManager:o}},function(e,t,n){"use strict";function r(e){var t=(""+(e||"")).split(" "),n=i.codes.STREAM_ERROR;if(t[0]){var r=parseInt(t[0],10);o.indexOf(r)>=0?n=i.codes.STREAM_ERROR_DRM_CLIENT_UNAVAILABLE:a.indexOf(r)>=0&&(n=i.codes.STREAM_ERROR_DOWNLOAD)}return new i(n,e,e,"silverlight")}var i=n(64),o=[6011,6004,6008,6e3,6013,6018,6023,6003],a=[6006,6005,6001,6002,6010,6012,6017,6030,3222,3050,4001];e.exports={map:r}},function(e,t,n){"use strict";function r(e,t){var n=document.createElement("param");return n.setAttribute("name",e),n.setAttribute("value",t),n}function i(e,t,n,i,o){var a={movie:t,flashVars:c.objectToQueryString(n,""),allowFullscreen:"true",wmode:o||"direct",bgcolor:"#000000",allowscriptaccess:"always"};i&&(a.base=i),navigator.userAgent.match(/(Windows NT 6\.1)|(Firefox)/)&&!o&&(a.wmode="opaque");var s=document.createElement("object");return s.setAttribute("type","application/x-shockwave-flash"),s.setAttribute("data",t),s.className=e,Object.getOwnPropertyNames(a).map(function(e){return r(e,a[e])}).forEach(function(e){s.appendChild(e)}),f.debug("Flash DOM element ready for insertion.",t,n,s),s}function o(){function e(e,t,n){o.forEach(function(e){try{e(t,n)}catch(r){f.error("A Flash player "+t+" event listener failed.",e,n)}})}function t(e){o.push(e)}function n(e){o.splice(o.indexOf(e),1)}function r(){window[i]=null,o.length=0}var i=l.addGlobalPollutant("notifyVupFromSmf",e),o=[];return{callbackName:i,subscribe:t,unsubscribe:n,destroy:r}}function a(e){try{if(e){var t={};return Object.getOwnPropertyNames(e).forEach(function(n){e[n]&&e[n].swfUrl&&Object.getOwnPropertyNames(e[n]).forEach(function(r){"swfUrl"===r?t["plugin_"+n]=e[n].swfUrl:t[n+"_"+r]=e[n][r]})}),f.debug("OSMF plugins set up.",e,t),t}}catch(n){f.warn("An error occurred when configuring OSMF plugins.",n)}return{}}function s(e){function t(){var e=!1;try{var t=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");t&&(e=!0)}catch(n){navigator.mimeTypes&&void 0!=navigator.mimeTypes["application/x-shockwave-flash"]&&navigator.mimeTypes["application/x-shockwave-flash"].enabledPlugin&&(e=!0)}return e}function n(e){function n(){return h.delay(5e3).then(function(){v.destroy(),c.parentNode.removeChild(c),f.debug("Flash object element removed.")}),h()}function s(e){"onJavaScriptBridgeCreated"===e&&(f.debug("SMF player is ready.",c),u.fulfill(new d("flash","Vimond.Player.Core",c,c,{eventStreamer:v},n)),v.unsubscribe(s))}var c,u=h.defer(),l=a(r.plugins),m=r.swfUrl,v=o();if(!t()){var g=new p(p.codes.STREAM_ERROR_PLUGIN_UNAVAILABLE,"Missing Flash plugin",{flashPlugin:t()},"flash");u.reject(g)}if(!m)throw new Error("Missing SWF URL for the Flash player.");return l.autoPlay=!0,l.verbose=r.verbose||!1,l.javascriptCallbackFunction=v.callbackName,v.subscribe(s),c=i(r.domClassName,m,l,null,r.wmode),e.appendChild(c),u.promise}var r=e.flash.core;return{insert:n}}var c=n(21),u=n(35),l=n(67),d=n(47),f=n(7).get("strobeVideoInserter"),p=n(64),h=n(4);e.exports=u(s,"flashVideoInserter")},function(e,t,n){"use strict";function r(e,t){function n(t,n){if(E)return e.update(t,n)}function r(t){n(e.props.playState,t||S&&e.playStates.inactive||!T&&e.playStates.starting||k.getSeeking()&&e.playStates.seeking||k.getBuffering()&&e.playStates.buffering||k.getPaused()&&e.playStates.paused||e.playStates.playing)}function i(e,t){switch(e){case"loadstart":s();break;case"waiting":r();break;case"loadedmetadata":r(),f();break;case"play":T=!0,A=!0,r(),f(),p(),c();break;case"pause":r(),c();break;case"seeking":case"seeked":r(),c(),p(),l();break;case"durationchange":d(),l();break;case"timeupdate":d(),l(),p(),f();break;case"volumechange":u();break;case"complete":S=!0,r();break;case"bitratechange":v(t);break;case"error":r(),h(t.error)}}function o(){var e=t.internals.eventStreamer;e.subscribe(i),s()}function s(){u(),d(),l(),f(),p(),c(),m(),v()}function c(){n(e.props.isPaused,k.getPaused())}function u(){n(e.props.volume,k.getVolume()),n(e.props.isMuted,k.getMuted())}function l(){if(x){if(b&&P)if(k.getPaused()||A)A=!1,g=k.getCurrentTime(),y=new Date(b.getTime()-1e3*g);else{var t=(new Date).getTime()-y.getTime()-w;y=new Date(y.getTime()+t),b=new Date(y.getTime()+1e3*g)}else g=k.getCurrentTime(),y=(new Date).getTime()-1e3*g,b=new Date,w=1e3*k.getDuration();n(e.props.position,g),n(e.props.absoluteStartPosition,y),n(e.props.absolutePosition,b)}else n(e.props.position,k.getCurrentTime())}function d(){n(e.props.duration,k.getDuration())}function f(){var t=e.playModes.ondemand;switch(k.getStreamType()){case"dvr":t=e.playModes.livedvr,x=!0,P=!0;break;case"live":t=e.playModes.live,x=!0}n(e.props.playMode,t)}function p(){n(e.props.isAtLivePosition,k.getIsLive())}function h(t){n(e.props.error,t)}function m(){}function v(t){n(e.props.bitrate,t?t.bitrate:0)}var g,y,b,w,E=!0,k=t.implementationApi,S=!1,T=!1,A=!1,P=!1,x=!1;this.setActive=function(e){e!==E&&(E=e,a.debug("Setting Flash video observer "+(e?"active":"inactive")),E&&s())},this.unobserve=function(){t.internals.eventStreamer.unsubscribe(i)},o()}function i(e){var t=e.implementationApi,n=t.getVolume(),r=!0;this.play=function(){r&&t.play3()},this.pause=function(){r&&t.pause3()},this.setPosition=function(e){r&&t.setCurrentTime(e)},this.gotoLive=function(){r&&t.snapToLive()},this.setVolume=function(e){t.setMuted(0===parseFloat(e)),t.setVolume(e)},this.setIsMuted=function(e){e?(n=t.getVolume(),t.setVolume(0)):t.setVolume(n),t.setMuted(e)},this.capBitrate=function(e){a.info("Bitrate capping not implemented for Flash.")},this.setActive=function(e){e!==r&&(a.debug("Setting Flash video updater "+(e?"active":"inactive")),r=e)}}var o=n(7),a=(n(69),n(21),o.get("flashVideoAdapters"));e.exports={VideoUpdater:i,VideoObserver:r}},function(e,t,n){"use strict";function r(e,t){function n(){if(v)try{return g.getCurrentTime()}catch(e){return 0}}function r(){try{return g.getDuration()}catch(e){return 0}}function i(e){try{return g.setCurrentTime(e)}catch(t){}}function o(){if(v)try{g.stop3()}catch(e){d.debug("Stopping the Strobe player failed, but maybe the stream is already stopped?",e)}v=!1}function c(){if(v)try{m=n(),d.debug("Interrupting playback for ads.",m),g.pause3()}catch(e){d.debug("Attempting to interrupt playback failed.",e)}}function p(e){if(v)try{if("number"==typeof e&&0!==e)d.debug("Seeking upon resume according to interval:",e),g.setCurrentTime(m+e);else{var t=n();m&&Math.abs(t-m)>5?d.warn("The position upon resuming is different from the position upon ad break start.",t,m):d.debug("Resuming playback after ads.")}m=void 0,g.play3()}catch(r){d.debug("Attempting to resume playback failed.",r)}}function h(e,o){function a(){y.subscribe(p)}function s(){y.unsubscribe(p)}function c(){try{v=!0,a(),d.debug("Setting source",o),g.setMediaResourceURL(o.streamUrl),e(f.bufferingStarted,x)}catch(t){d.error("Start error",t),R.reject(t)}}function p(e,t){try{switch(e){case"waiting":k();break;case"play":S(),E();break;case"pause":m();break;case"seeking":b();break;case"seeked":w();break;case"durationchange":case"timeupdate":P();break;case"complete":T();break;case"error":A(t.error)}}catch(n){d.error("Strobe event handling failed.",n)}}function h(){v&&(N||(L=!1,e(f.started),e(f.positioned),N=!0,S("firstplay")))}function m(){S("pause")}function b(){v&&!I&&(I=!0,L||e(f.seekstarted,n(),r(),g.getPaused()))}function w(){v&&I&&(I=!1,L?h():(e(f.seekended,n(),r(),g.getPaused()),S("seekcomplete")))}function E(){L&&(C?h():i(o.startPosition))}function k(){v&&!_&&(_=!0,e(f.bufferingStarted,n()))}function S(t){d.debug("Buffering end reported from "+t),v&&_&&e(f.bufferingEnded),_=!1}function T(){v&&(_&&e(f.bufferingEnded,O,M,!1),I&&e(f.seekended,O,M,!1),e(f.ended,O,M,!1)),s(),v=!1}function A(t){v&&(d.warn("Strobe video error",t),e(f.failed,O,M,!1,u.map(t))),v=!1}function P(){O=n(),M=r();var t=!1;try{t=g.getPaused()}catch(i){}e(f.temporalupdate,O,M,t)}var x=o.startPosition&&+o.startPosition||0,C=0===x,R=l.defer(),O=0,M=0,L=!0,_=!0,N=!1,I=!1;return t.instance.internals.timingModel=o.timingModel,c(),R.promise}var m,v,g=t.instance.implementationApi,y=t.instance.internals.eventStreamer;return a.getScheduler(new s.InterruptableMainCuer(h,o,n,c,p),t.adCuer)}var i=n(35),o=n(42),a=n(71),s=n(55),c=n(7),u=n(78),l=n(4),d=c.get("flashPlaybackScheduler"),f=o.basicEventTypes;e.exports={getPlaybackScheduler:i(r,"flashPlaybackScheduler")}},function(e,t,n){"use strict";function r(e){var t=i.codes.STREAM_ERROR,n="Stream playback failed";if(e.errorID)switch(e.errorID){case 2047:case 2048:case 2049:case 2119:case 2120:case 2121:case 2122:case 2123:t=i.codes.STREAM_ERROR_DOWNLOAD,n="Security restrictions blocked the video from being played in Flash.";break;case 16:case 2032:case 2035:t=i.codes.STREAM_ERROR_DOWNLOAD,n="Stream resource not found or not reached."}return new i(t,n,e,"flash")}var i=n(64);e.exports={map:r}},function(e,t,n){"use strict";function r(e){function t(t,n){var r=e.dash.shaka;return a.promiseScript("shaka",r.libraryUrl).then(function(i){function a(){try{d.isDestroying=!0,f.destroy()}catch(e){c.warn("Failed while resetting Shaka player instance",e)}try{l.src="",l.parentNode.removeChild(l)}catch(e){c.warn("The targeted video element to remove does not exist in DOM",e)}}var u={html:{domClassName:e.dash.shaka.domClassName}},l=o.applyContext(u).build(t,n),d={};i.polyfill.installAll(),i.log&&i.log.Level&&i.log.setLevel&&"string"==typeof r.logLevel&&i.log.setLevel(i.log.Level[r.logLevel]),l.controls=!1;var f=new i.player.Player(l);return f.configure({disableCacheBustingEvenThoughItMayAffectBandwidthEstimation:r.disableCacheBusting,enableShutdownOnLiveError:r.enableShutdownOnLiveError}),r.enableWithCredentialsOnHTTPAndMatchedCookie&&(c.debug("withCredentials turned on for stream segments. Streaming server will need correct access headers or requests will fail."),f.configure({enableWithCredentialsOnHTTP:!0})),new s("dash","Shaka Player",l,f,d,a)})}return{insert:t}}var i=n(35),o=n(46),a=n(21),s=n(47),c=n(7).get("shakaVideoInserter");e.exports=i(r,"shakaVideoInserter")},function(e,t,n){"use strict";function r(e,t){function n(t,n){if(O)return e.update(t,n)}function r(){return 0!==_.end||0!==_.start?_.end-_.start:x.duration}function i(t){M?n(e.props.playState,t||x.ended&&e.playStates.inactive||R&&e.playStates.buffering||x.paused&&e.playStates.paused||e.playStates.playing):n(e.props.playState,e.playStates.starting),c.debug("Set playState:",e.playState)}function s(){n(e.props.isPaused,x.paused)}function u(){n(e.props.volume,x.volume),n(e.props.isMuted,x.muted)}function f(){var t=new Date(1e3*(L+x.currentTime)),r=new Date(1e3*(L+_.start));n(e.props.position,x.currentTime-_.start),n(e.props.absolutePosition,t),n(e.props.absoluteStartPosition,r)}function p(){n(e.props.duration,r())}function h(){try{C.isLive()?r()>d?n(e.props.playMode,e.playModes.livedvr):n(e.props.playMode,e.playModes.live):n(e.props.playMode,e.playModes.ondemand)}catch(t){n(e.props.playMode,e.playModes.ondemand)}}function m(){n(e.props.isAtLivePosition,r()-(x.currentTime-_.start)<l)}function v(){n(e.props.textTracks,o.getFromTrackList(x.textTracks)),g()}function g(){if(C.getAudioTracks){var t=C.getAudioTracks();if(t&&t.length>0){var r=t.map(function(e){var t=function(){C.selectAudioTrack(e.id,void 0)};return new a.AudioTrackSelectionModel(t,void 0!==e.id?e.id:e.index,e.kind,e.language?e.language:e.lang,e.label)});n(e.props.audioTracks,r)}}else c.debug("Unfortunately this particular shaka player version does not support getAudioTracks()")}function y(){for(var t=x.currentTime,r=x.buffered,i=0,o=0,a=0;a<r.length;++a)if(r.start(a)<=t&&r.end(a)>=t){i=r.end(a)-t,o=t-r.start(a);break}n(e.props.bufferedAhead,i)}function b(){n("error",x.error)}function w(){u(),i(e.playStates.starting),p(),f(),h(),m(),s(),v(),y(),b()}function E(){R=!0,i()}function k(){R=!1,i()}function S(e){_.start=e.start,_.end=e.end,!L&&t.internals.availabilityStartTime&&(L=t.internals.availabilityStartTime),p(),h(),f()}function T(){i(e.playStates.inactive),s()}function A(e){return e.active}function P(t){var r=C.getVideoTracks().filter(A)[0],i=C.getAudioTracks().filter(A)[0];if(c.debug("Shaka adaptation occurred.",r,i,t),r&&i){var o=Math.floor((r.bandwidth+i.bandwidth)/1e3);n(e.props.bitrate,o)}}var x=t.domElement,C=t.implementationApi,R=!1,O=!0,M=!1,L=0,_={start:0,end:0},N={durationchange:function(){h(),f(),p()},error:function(){b(),i(e.playStates.inactive),s()},ended:T,loadedmetadata:function(){p(),f(),v()},loadstart:function(){s()},pause:function(){i(),s()},play:function(){i(e.playStates.playing),s()},playing:function(){M=!0,i(e.playStates.playing),s()},seeked:function(){i(),s()},seeking:function(){i(e.playStates.seeking),s()},stalled:function(){s()},timeupdate:function(){f(),m(),p(),h(),y(),!x.paused&&0!==x.playbackRate&&!C.isLive()&&x.currentTime-_.start>r()-1&&(c.debug("Detected missing end"),T())},volumechange:function(){u()},waiting:function(){i(e.playStates.buffering)}};w(),Object.getOwnPropertyNames(N).forEach(function(e){x.addEventListener(e,N[e])}),C.addEventListener("bufferingStart",E),C.addEventListener("bufferingEnd",k),C.addEventListener("ended",T),C.addEventListener("seekrangechanged",S),C.addEventListener("adaptation",P),C.addEventListener("trackschanged",g),x.textTracks.addEventListener("addtrack",function(){v()}),x.textTracks.addEventListener("removetrack",function(){v()}),this.setActive=function(e){e!==O&&(O=e,c.debug("Setting Shaka video observer "+(e?"active":"inactive")),O&&w())},this.unobserve=function(){Object.getOwnPropertyNames(N).forEach(function(e){x.removeEventListener(e,N[e])}),C.removeEventListener("bufferingStart",E),C.removeEventListener("bufferingEnd",k),C.removeEventListener("ended",T),C.removeEventListener("seekrangechanged",S),C.removeEventListener("adaptation",P)}}function i(e){function t(e){s.start=e.start,s.end=e.end}function n(){return 0!==s.end||0!==s.start?s.end-s.start:r.duration}var r=e.domElement,i=e.implementationApi,o=r.volume,a=!0,s={start:0,end:0};i.addEventListener("seekrangechanged",t),this.play=function(){a&&r.play()},this.pause=function(){a&&r.pause()},this.setPosition=function(e){if(a)try{r.currentTime=s.start+e}catch(t){}},this.setVolume=function(e){r.muted=0===parseFloat(e),r.volume=e},this.setIsMuted=function(e){e?(o=r.volume,r.volume=0):r.volume=o,r.muted=e},this.gotoLive=function(){if(a){var e=n()-u;c.debug("Seeking to live",e),r.currentTime=s.start+e}},this.capBitrate=function(e){if(isNaN(e)||e===1/0||e<0)c.debug("Resetting restrictions for bitrate."),i.configure({restrictions:new shaka.player.Restrictions});else{var t=new shaka.player.Restrictions;t.maxBandwidth=1e3*e,c.debug("Applying restrictions for bitrate.",t),i.configure({restrictions:t})}},this.setActive=function(e){e!==a&&(c.debug("Setting Shaka video updater "+(e?"active":"inactive")),a=e)},this.unobserve=function(){i.removeEventListener("seekrangechanged",t)}}var o=n(49),a=n(50),s=n(7),c=s.get("shakaVideoModelAdapter"),u=10,l=20,d=100;e.exports={VideoUpdater:i,VideoObserver:r}},function(e,t,n){"use strict";function r(e,t){function n(){return T.currentTime}function r(){return 0!==A.end||0!==A.start?A.end-A.start:T.duration}function i(){g.debug("Stopping and resetting playback.");try{k.unload(),w&&w()}catch(e){g.error("Failed cleaning up upon playback stop.",e)}}function o(){E=T.currentTime,g.debug("Interrupting playback for ads.",E),T.pause()}function f(e){"number"==typeof e&&0!==e?(g.debug("Seeking upon resume according to interval:",e),T.currentTime=E+e):E&&Math.abs(T.currentTime-E)>5?g.warn("The position upon resuming is different from the position upon ad break start.",T.currentTime,E):g.debug("Resuming playback after ads."),E=void 0,T.play()}function b(i,o){function a(e,t,n,r,o){e!==y.failed&&(Z=e),i(e,t,n,r,o)}function s(){try{w&&w(),C(),c(),w=Y}catch(e){if(!S||!S.isDestroying)throw g.error("Start error",e,o),e;g.debug("Shaka player was destroyed during stream load.",e,o)}}function c(){Q=!1,ee=!1,O(),K>0&&k.setPlaybackStartTime(K),k.load(x())["catch"](function(e){g.debug("Shaka load promise returned error.",e),ne=!0}),P.setTracks(o.tracks),ne=!0}function f(e,t){return(e+t).toString().indexOf("pro")}function b(){var t,n=e.dash.licenseRequests&&e.dash.licenseRequests.widevine&&e.dash.licenseRequests.widevine.headers,r=e.dash.licenseUrlModifier?o.licenseUrl.replace(e.dash.licenseUrlModifier.match instanceof RegExp?e.dash.licenseUrlModifier.match:new RegExp(e.dash.licenseUrlModifier.match),e.dash.licenseUrlModifier.replacement):o.licenseUrl;return n&&(t=function(e){e.headers=n,g.debug("Adding headers to license request.",e)}),r&&g.debug("Using license URL",r),function(e,n){return f(e,n),"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed"==e.toLowerCase()?[{keySystem:"com.widevine.alpha",licenseServerUrl:r,licensePreProcessor:t,audioRobustness:"SW_SECURE_CRYPTO",videoRobustness:"SW_SECURE_DECODE"}]:"urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95"==e.toLowerCase()?[{keySystem:"com.microsoft.playready",licenseServerUrl:r,licensePreProcessor:t}]:void 0}}function E(e){g.debug("Start date/time offset",new Date(1e3*e)),t.instance.internals.availabilityStartTime=e}function x(){var t,n=e.dash.shaka.bandwidthEstimator&&"pessimistic"===e.dash.shaka.bandwidthEstimator?shaka.vimond.PessimisticBandwidthEstimator:shaka.util.EWMABandwidthEstimator,r=e.dash.manifestModifier,i=e.dash.shaka.defaultBandwidth,a=l.getBase(),s=a.shakaEstimator&&!a.shakaEstimator.getDataAge()<3600&&a.shakaEstimator;if(s||(s="pessimistic"===e.dash.shaka.bandwidthEstimator?new n(null,null,null,null,i):new n,a.shakaEstimator=s),s.supportsCaching=function(){return!0},r){var c=r.replacements&&r.replacements.map(function(e){return new shaka.vimond.dash.ReplacementRule(e.match,e.replacement,e.options)});t=new shaka.vimond.dash.ManifestModificationSetup(c,r.presentationTimeOffsetFixPolicy,r.bigIntegersFixPolicy)}var u=e.dash.streamUrlModifier?o.streamUrl.replace(e.dash.streamUrlModifier.match instanceof RegExp?e.dash.streamUrlModifier.match:new RegExp(e.dash.streamUrlModifier.match),e.dash.streamUrlModifier.replacement):o.streamUrl;return g.debug("Shaka playback set up with these parameters.",u,t),new shaka.vimond.player.ModifyableDashVideoSource(u,b(),s,null,E,t)}function C(){T.addEventListener(d.playing,_),T.addEventListener(d.timeupdate,D),T.addEventListener(d.durationchange,U),T.addEventListener(d.loadedmetadata,R),T.addEventListener("ended",I),k.addEventListener("ended",N),k.addEventListener("seekrangechanged",j),k.addEventListener("error",B),k.addEventListener("bufferingStart",function(){try{O()}catch(e){g.error("Buffering start handler failed.",e)}}),k.addEventListener("bufferingEnd",function(){try{M()}catch(e){g.error("Buffering end handler failed.",e)}})}function R(){K>0&&T.addEventListener(d.seeked,L),T.removeEventListener(d.loadedmetadata,R)}function O(){ee||(ee=!0,a(y.bufferingStarted,T.currentTime||K))}function M(){ee&&(ee=!1,a(y.bufferingEnded))}function L(){a(y.positioned,K),$=!0,K=0,T.removeEventListener(d.seeked,L),T.addEventListener(d.seeking,F),T.addEventListener(d.seeked,V)}function _(){M(),T.removeEventListener(d.playing,_),re.notifyStart(),a(y.started),$||(a(y.positioned),$=!0)}function N(){g.debug("Shaka ended"),I()}function I(){var e=a;re.notifyEnd(),Y(),e(y.ended,J,X,!1),G.fulfill()}function D(){J=T.currentTime,a(y.temporalupdate,n(),r(),T.paused),!T.paused&&0!==T.playbackRate&&!k.isLive()&&T.currentTime-A.start>r()-1&&(g.debug("End workaround activated"),I())}function U(){X=r(),a(y.temporalupdate,T.currentTime,r(),T.paused)}function j(e){A.start=e.start,A.end=e.end,U()}function F(){a(y.seekstarted,T.currentTime,r(),T.paused),Q=!0}function V(){Q=!1,a(y.seekended,T.currentTime,r(),T.paused)}function B(e){e.detail&&502==e.detail.status?q(h.map(e)):re.notifyError(h.map(e))}function q(n){if(g.warn("Shaka Player fatal error.",n),t.streamFailover){if(ne){ne=!1;try{t.streamFailover(n,te,o,e,J,Z).then(H).done(null,W)}catch(r){g.warn("The failover function failed. There is no failover to the failover, giving up.",r),W(n)}}}else W(n)}function H(t){T.removeEventListener(d.playing,_),t.overridingConfiguration&&t.overridingConfiguration.dash&&(e.dash=m.combine(e.dash,t.overridingConfiguration.dash,!0)),t.source&&(o=t.source),K=null!=t.resumePosition?t.resumePosition:J||K,T.addEventListener(d.loadedmetadata,R),T.addEventListener(d.playing,_),a(y.failover,K,X,!1,t.error),te++,c()}function W(e){var t=a;Y(),t(y.failed,J,X,!1,e)}function z(e){e.severity=u.severities.warning,g.warn("Error from Shaka player, but not considered fatal.",e),i(y.warning,J,X,T.paused,e)}function Y(){a=function(){},k.removeEventListener("ended",N),k.removeEventListener("seekrangechanged",j),k.removeEventListener("error",B),k.removeEventListener("bufferingStart",O),k.removeEventListener("bufferingEnd",M),T.removeEventListener(d.timeupdate,D),T.removeEventListener(d.durationchange,U),T.removeEventListener(d.playing,_),T.removeEventListener(d.seeking,F),T.removeEventListener(d.seeked,V),T.removeEventListener(d.ended,I),k.removeEventListener("error",B)}var K=+o.startPosition||0,G=v.defer(),J=0,X=0,Z=0,$=!1,Q=!1,ee=!1,te=0,ne=!0,re=new p(q,z);return A.start=0,A.end=0,s(),G.promise}var w,E,k=t.instance.implementationApi,S=t.instance.internals,T=t.instance.domElement,A={start:0,end:0},P=new c(T,e.subtitles);return a.getScheduler(new s.InterruptableMainCuer(b,i,n,o,f),t.adCuer)}var i=n(35),o=n(42),a=n(71),s=n(55),c=n(56),u=n(64),l=n(67),d=n(54),f=n(7),p=n(82),h=n(83),m=n(21),v=n(4),g=f.get("shakaPlaybackScheduler"),y=o.basicEventTypes;e.exports={getPlaybackScheduler:i(r,"shakaPlaybackScheduler")}},function(e,t,n){"use strict";function r(e,t){var n=!1;return{notifyStart:function(){n=!0},notifyEnd:function(){n=!1},notifyError:function(r){r instanceof i&&("fatal"!==r.severity||r.code===i.codes.STREAM_ERROR_DOWNLOAD&&n)?t(r):(n=!1,e(r))}}}var i=n(64);e.exports=r},function(e,t,n){"use strict";function r(e){if(e){if(e.detail){var t=e.detail;if(t.type){if("net"==t.type)return new i(i.codes.STREAM_ERROR_DOWNLOAD,t.message,t,"dash");if("drm"==t.type&&t.code&&("output-restricted"===t.code||"output-not-allowed"===t.code||"internal-error"===t.code))return new i(i.codes.STREAM_ERROR_DRM_CLIENT_UNAVAILABLE,"The client device is not accepted for playback by the DRM system.",t,"dash");if("stream"==t.type&&t.message.indexOf("previous operation not complete")>0)return new i(i.codes.STREAM_ERROR_DECODE,t.message,t,"dash",i.severities.warning);if("playback"==t.type&&t.message.indexOf("decode")>0)return new i(i.codes.STREAM_ERROR_DECODE,t.message,t,"dash");if("dash"==t.type&&t.message.indexOf("parse failure")>0)return new i(i.codes.STREAM_ERROR_DOWNLOAD,t.message,t,"dash")}return t.message&&t.message.toLowerCase().indexOf("unsupported keysystem")>=0||t.message.toLowerCase().indexOf("none of the requested configurations were supported")>=0||t.message.toLowerCase().indexOf("unable to create the cdm for the key system")>=0||"NotSupportedError"===t.name?new i(i.codes.STREAM_ERROR_DRM_CLIENT_UNAVAILABLE,"The appropriate DRM system is not enabled or activated on this client device.",t,"dash"):new i(i.codes.STREAM_ERROR,t.message,t,"dash")}var n=e;return new i(i.codes.STREAM_ERROR,"Stream playback failed.",n,"dash")}}var i=n(64);e.exports={map:r}},function(e,t,n){"use strict";function r(e){function t(t,n){return a.promiseScript("MediaPlayer",e.dash.dashjs.libraryUrl).then(function(){function r(){try{f.reset()}catch(e){u.warn("Failed while resetting Dash.js player instance",e)}try{l.src="",l.parentNode.removeChild(l)}catch(e){u.warn("The targeted video element to remove does not exist in DOM",e)}}var i=e.dash.manifestModifier&&c.applyContext(e.dash.manifestModifier),a={html:{domClassName:e.dash.dashjs.domClassName}},l=o.applyContext(a).build(t,n),d=i?new i.HackDashContext:new Dash.di.DashContext,f=new MediaPlayer(d);return l.controls=!1,f.startup(),f.attachView(l),f.setAutoPlay(!0),f.getDebug().setLogToBrowserConsole(e.dash.dashjs.config&&e.dash.dashjs.config.logToBrowserConsole||!1),new s("dash","DASH.js",l,f,{},r)})}return{insert:t}}var i=n(35),o=n(46),a=n(21),s=n(47),c=n(85),u=n(7).get("dashVideoInserter");e.exports=i(r,"dashVideoInserter")},function(e,t,n){"use strict";function r(e){function t(){var t=new Dash.dependencies.DashParser,n=t.parse,i=!0,o=e.presentationTimeOffsetFixPolicy,s=Array.isArray(e.replacements)?e.replacements:e.match&&e.replacement?[{match:e.match,replacement:e.replacement}]:[];return s?t.parse=function(e,c,u){var l=Array.prototype.slice.call(arguments);return l[0]=s.reduce(function(t,n){var r=n.match instanceof RegExp?n.match:new RegExp(n.match.toString(),"g"),o=t.replace(r,n.replacement);return i&&(o!==e?a.debug("Manifest modifier in action: Replaced matches for %s with %s.",r,n.replacement):a.debug("Manifest modifier found nothing to replace for pattern %s to be replaced with %s.",r,n.replacement),i=!1),o},e),r(n.apply(t,l),o)}:t.parse=function(e,i,a){return r(n.apply(t,arguments),o)},t}function n(){return{system:void 0,setup:function(){n.prototype.setup.call(this),this.system.mapClass("parser",t)}}}function r(e,t){if(t&&"static"===e.type){var n="highest"==t?s(e):"lowest"==t?o(e):"higestCeil"==t?c(e):i(e);try{n>0&&(a.debug("Found missing presentationTimeOffset from segment start offset, based on the configured "+t+" policy.",n),e.Period_asArray.forEach(function(e){e.AdaptationSet_asArray.forEach(function(e){e.SegmentTemplate.presentationTimeOffset||(e.SegmentTemplate.presentationTimeOffset=n*(e.SegmentTemplate.timescale||1))})}))}catch(r){return a.error("Attempt of fixing presentationTimeOffset in manifest failed. Trying to continue anyway.",r,e),e}}return e}function i(e){var t=0,n=0,r=0,i=0;try{e.Period_asArray.forEach(function(e){e.AdaptationSet_asArray.forEach(function(e){var o=e.SegmentTemplate;if(o&&!o.presentationTimeOffset){var a=o.SegmentTimeline&&o.SegmentTimeline.S_asArray[0];if(a.t){var s=a.t/(o.timescale||1),c=a.d/(o.timescale||1);"video"===e.contentType?(t=s,i=c):"audio"===e.contentType&&(n=s,r=c)}}})})}catch(o){return a.error("Error when searching for start offset snapping to video segment start.",o),0}var s=t;return s}function o(e){var t=0;try{e.Period_asArray.forEach(function(e){e.AdaptationSet_asArray.forEach(function(e){var n=e.SegmentTemplate;if(n&&!n.presentationTimeOffset){var r=n.SegmentTimeline&&n.SegmentTimeline.S_asArray[0];if(r.t){var i=r.t/(n.timescale||1);t=0===t?i:Math.min(t,i)}}})})}catch(n){a.error("Error when searching for lowest start offset.",n)}return t}function s(e){var t=0;try{e.Period_asArray.forEach(function(e){e.AdaptationSet_asArray.forEach(function(e){var n=e.SegmentTemplate;if(n&&!n.presentationTimeOffset){var r=n.SegmentTimeline&&n.SegmentTimeline.S_asArray[0];if(r.t){var i=r.t/(n.timescale||1);t=Math.max(t,i)}}})})}catch(n){a.error("Error when searching for highest start offset.",n)}return t}function c(e){var t=0;return e.Period_asArray.forEach(function(e){e.AdaptationSet_asArray.forEach(function(e){var n=e.SegmentTemplate;if(n&&!n.presentationTimeOffset){var r=n.SegmentTimeline&&n.SegmentTimeline.S_asArray[0];r.t&&(t=Math.max(t,Math.ceil(r.t/(n.timescale||1))))}})}),t}return n.prototype=new Dash.di.DashContext,n.prototype.constructor=n,{HackDashContext:n,RewritingDashParser:t}}var i=n(7),o=n(35),a=i.get("dashOverrides");e.exports=o(r,"dashOverrides")},function(e,t,n){"use strict";function r(e,t){function n(t,n){if(E)return e.update(t,n)}function r(t){n(e.props.playState,t||b.ended&&e.playStates.inactive||b.paused&&e.playStates.paused||e.playStates.playing)}function i(){n(e.props.isPaused,b.paused)}function s(){n(e.props.volume,b.volume),n(e.props.isMuted,b.muted)}function u(){var t=new Date,r=new Date;t.setTime(1e3*w.timeAsUTC()),r.setTime(1e3*(w.durationAsUTC()-w.duration())),n(e.props.position,w.time()),n(e.props.absolutePosition,t),n(e.props.absoluteStartPosition,r)}function f(){n(e.props.duration,w.duration())}function p(){try{b.duration===1/0?n(e.props.playMode,e.playModes.live):isNaN(w.getDVRWindowSize())||w.getDVRWindowSize()===1/0?n(e.props.playMode,e.playModes.ondemand):w.duration()>d?n(e.props.playMode,e.playModes.livedvr):n(e.props.playMode,e.playModes.live)}catch(t){n(e.props.playMode,e.playModes.ondemand)}}function h(){n(e.props.isAtLivePosition,w.time()>w.duration()-l)}function m(){if(n(e.props.textTracks,o.getFromTrackList(b.textTracks)),w.getTracksFor){var t=w.getTracksFor("audio");if(t&&t.length>0){var r=t.map(function(e){var t=function(){w.setCurrentTrack(e)};return new a.AudioTrackSelectionModel(t,void 0!==e.id?e.id:e.index,e.kind,e.language?e.language:e.lang,e.label)});n(e.props.audioTracks,r)}}else c.debug("Unfortunately this particular Dash.js version does not support getTracksFor()")}function v(){n("error",b.error)}function g(){s(),r(),f(),u(),p(),h(),i(),m(),v()}function y(){k=!0}var b=t.domElement,w=t.implementationApi,E=!0,k=!1,S={abort:function(){},canplay:function(){},canplaythrough:function(){},durationchange:function(){p(),u(),f()},ended:function(){u(),r(e.playStates.inactive),i(),w.removeEventListener(MediaPlayer.events.MANIFEST_LOADED,y)},error:function(){v(),r(e.playStates.inactive),i()},loadeddata:function(){},loadedmetadata:function(){f(),u(),m()},loadstart:function(){i()},pause:function(){r(e.playStates.paused),i()},play:function(){r(e.playStates.playing),i()},playing:function(){r(e.playStates.playing),i()},progress:function(){},ratechange:function(){},seeked:function(){r(),i()},seeking:function(){r(e.playStates.seeking),i()},stalled:function(){i()},suspend:function(){},timeupdate:function(){u(),h(),f(),p()},volumechange:function(){s()},waiting:function(){r(e.playStates.buffering)}};g(),Object.getOwnPropertyNames(S).forEach(function(e){b.addEventListener(e,S[e])}),w.addEventListener("manifestLoaded",y),b.textTracks.addEventListener("addtrack",function(){m()}),b.textTracks.addEventListener("removetrack",function(){m()}),this.setActive=function(e){e!==E&&(E=e,c.debug("Setting DASH video observer "+(e?"active":"inactive")),E&&g())},this.unobserve=function(){Object.getOwnPropertyNames(S).forEach(function(e){b.removeEventListener(e,S[e])})}}function i(e){var t=e.domElement,n=e.implementationApi,r=t.volume,i=!0;this.play=function(){i&&t.play()},this.pause=function(){i&&t.pause()},this.setPosition=function(e){i&&(isNaN(e)||((isNaN(n.getDVRWindowSize())||n.getDVRWindowSize()===1/0)&&e>n.duration()-u?n.seek(n.duration()-u):n.seek(e)))},this.setVolume=function(e){t.muted=0===parseFloat(e),t.volume=e},this.setIsMuted=function(e){e?(r=t.volume,t.volume=0):t.volume=r,t.muted=e},this.gotoLive=function(){i&&!isNaN(n.duration())&&(c.debug("Seeking to live",n.duration()-u),n.seek(n.duration()-u))},this.capBitrate=function(e){isNaN(e)||e===1/0||e<0?(c.debug("Resetting restrictions for bitrate."),n.setMaxAllowedBitrateFor("video",NaN)):(c.debug("Applying restrictions for bitrate.",e),n.setMaxAllowedBitrateFor("video",e))},this.setActive=function(e){e!==i&&(c.debug("Setting DASH video updater "+(e?"active":"inactive")),i=e)}}var o=n(49),a=n(50),s=n(7),c=s.get("dashVideoModelAdapter"),u=20,l=30,d=100;e.exports={VideoUpdater:i,VideoObserver:r}},function(e,t,n){"use strict";function r(e,t){function n(){return b.time()}function r(){m.debug("Stopping and resetting playback.");try{b.reset()}catch(e){m.warn("Failed resettting Dash.js upon playback stop.",e)}try{w.src="",g&&g()}catch(e){m.error("Failed cleaning up upon playback stop.",e)}}function i(){y=b.time(),m.debug("Interrupting playback for ads.",y),w.pause()}function o(e){"number"==typeof e&&0!==e?(m.debug("Seeking upon resume according to interval:",e),b.seek(y+e)):y&&Math.abs(b.time()-y)>5?m.warn("The position upon resuming is different from the position upon ad break start.",b.time(),y):m.debug("Resuming playback after ads."),y=void 0,w.play()}function p(t,n){function r(){try{g&&g(),t(v.bufferingStarted,O),i();var e;if(n.licenseUrl){var r=I.licenseRequests&&I.licenseRequests.widevine&&I.licenseRequests.widevine.headers,o=I.licenseUrlModifier?n.licenseUrl.replace(I.licenseUrlModifier.match instanceof RegExp?I.licenseUrlModifier.match:new RegExp(I.licenseUrlModifier.match),I.licenseUrlModifier.replacement):n.licenseUrl;
e={},e[k]=new MediaPlayer.vo.protection.ProtectionData(o,r),m.debug("License URL for system "+k+" specified to Dash.js: "+o)}var a=I.streamUrlModifier?n.streamUrl.replace(I.streamUrlModifier.match instanceof RegExp?I.streamUrlModifier.match:new RegExp(I.streamUrlModifier.match),I.streamUrlModifier.replacement):n.streamUrl;e&&b.attachProtectionData&&b.attachProtectionData(e),b.attachSource(a,null,e),E.setTracks(n.tracks),g=R}catch(s){m.error("Start error",s),M.reject(s)}}function i(){w.addEventListener(f.playing,s),w.addEventListener(f.ended,c),w.addEventListener(f.error,x),w.addEventListener(f.timeupdate,p),w.addEventListener(f.durationchange,y),0===O&&(w.addEventListener(f.seeking,S),w.addEventListener(f.seeked,T)),w.addEventListener(f.loadedmetadata,o),b.addEventListener("error",C)}function o(){O>0&&(m.debug("Applying start position"),w.addEventListener(f.seeked,a),b.seek(O)),w.removeEventListener(f.loadedmetadata,o)}function a(){t(v.positioned,O),O=0,w.addEventListener(f.seeking,S),w.addEventListener(f.seeked,T)}function s(){t(v.bufferingEnded),w.removeEventListener(f.playing,s),D.notifyStart(),t(v.started),0===O&&t(v.positioned)}function c(){var e=t;D.notifyEnd(),R(),e(v.ended,L,_,!1),M.fulfill()}function p(){L=w.currentTime,t(v.temporalupdate,w.currentTime,w.duration,w.paused)}function y(){_=w.duration,t(v.temporalupdate,w.currentTime,w.duration,w.paused)}function S(){t(v.bufferingStarted),t(v.seekstarted,w.currentTime,w.duration,w.paused),N=!0}function T(){N=!1,t(v.bufferingEnded),t(v.seekended,w.currentTime,w.duration,w.paused)}function A(e){m.warn("Unrecoverable stream error.",e);var n=t;R(),n(v.failed,L,_,!1,e)}function P(e){e.severity=u.severities.warning,m.warn("Error from Dash.js player, but not considered fatal.",e),t(v.warning,L,_,w.paused,e)}function x(){D.notifyError(d.map(w.error))}function C(e){D.notifyError(d.map(e))}function R(){t=function(){},w.removeEventListener(f.error,x),w.removeEventListener(f.timeupdate,p),w.removeEventListener(f.durationchange,y),w.removeEventListener(f.playing,s),w.removeEventListener(f.ended,c),w.removeEventListener(f.seeking,S),w.removeEventListener(f.seeked,T),b.removeEventListener("error",C)}var O=+n.startPosition||0,M=h.defer(),L=0,_=0,N=!1,I=e.dash,D=new l(A,P);return r(),M.promise}var g,y,b=t.instance.implementationApi,w=t.instance.domElement,E=new c(w,e.subtitles),k=navigator.userAgent.indexOf("Chrome")>=0&&navigator.userAgent.indexOf("Edge")<0||navigator.userAgent.indexOf("Firefox")>=0&&navigator.userAgent.indexOf("Edge")<0?"com.widevine.alpha":"com.microsoft.playready";return a.getScheduler(new s.InterruptableMainCuer(p,r,n,i,o),t.adCuer)}var i=n(35),o=n(42),a=n(71),s=n(55),c=n(56),u=n(64),l=n(82),d=n(88),f=n(54),p=n(7),h=n(4),m=p.get("dashPlaybackScheduler"),v=o.basicEventTypes;e.exports={getPlaybackScheduler:i(r,"dashPlaybackScheduler")}},function(e,t,n){"use strict";function r(e){var t=i.codes.STREAM_ERROR,n="Stream playback failed";return e.error&&("key_session"===e.error&&(e.event.indexOf("DRM system for this content not supported")||e.event.indexOf("The protection system for this content is not supported"))?t=i.codes.STREAM_ERROR_DRM_CLIENT_UNAVAILABLE:"download"===e.error&&(t=i.codes.STREAM_ERROR_DOWNLOAD)),new i(t,n,e,"dash")}var i=n(64);e.exports={map:r}},function(e,t,n){"use strict";var r=n(90),i=n(107),o=n(21),a={init:function(){function e(e,t,n){return e({markers:null}).then(function(e){var t=e.markers.filter(function(e){return"AdBreak"==e.categoryName});return{adCuePoints:t}})}function t(e,t,n){var r=t("ads");return e({assetId:null}).then(function(e){return e.assetId}).then(function(e){var t=r.adTagUrl.split("?")[0],n=o.queryStringToObject(r.adTagUrl);n.vid=e||"",n.cmsid=r.cmsid||"",r.doNotEncodeParams.forEach(function(e){n.hasOwnProperty(e)&&(n[e]={noEscape:!0,value:n[e]})});var i=t+o.objectToQueryString(n,"?");return{adTagUrl:i}})}return{adCuePoints:e,adTagUrl:t}}};r.addResolver(a.init()),r.addResolver(i.init()),e.exports=r},function(e,t,n){"use strict";var r=n(91),i=n(92),o=n(97),a=n(105);r.addResolver(i.init(o,a));var s=n(106);r.addResolver(s.init()),e.exports=r},function(e,t,n){"use strict";function r(e){return function(t){return t({stream:null}).then(function(t){var n={cache:!1};return n[e]=t.stream&&t.stream[e],n})}}function i(e,t,n){}var o="model",a=n(4),s=n(7),c=s.get(o),u={streamUrl:r("streamUrl"),licenseUrl:r("licenseUrl"),contentType:r("contentType"),licenseType:r("licenseType"),userAgent:function(e){return e({}).then(function(e){return{userAgent:navigator.userAgent,cache:!0}})}},l={moduleName:o,dependencies:{configuration:"all"},init:function(e){function t(e){return!e||"object"==typeof e&&!Array.isArray(e)&&0===Object.getOwnPropertyNames(e).length}function n(e,n){if(t(n)&&E[e])return E[e];if(u[e]){if(w===e)throw new Error("Possible eternal loop in model.getResources detected! "+e);w=e;var i=a(u[e](l,r,n)).then(function(e){if(e&&e.cache){if(delete e.cache,!isNaN(e.cacheInSeconds)){var t=e.cacheInSeconds;delete e.cacheInSeconds,Object.getOwnPropertyNames(e).forEach(function(e){b[e]=(new Date).getTime()/1e3+t})}Object.getOwnPropertyNames(e).forEach(function(t){y[t]=e[t]})}return e});return i.then(function(){w=""},function(){w=""}),t(n)&&(E[e]=i,i["finally"](function(){delete E[e]})),i}var o={};return o[e]=null,w="",o}function r(t){return t.split(".").reduce(function(e,t){return e&&e[t]||void 0},e.configuration)}function o(e){return p(e,!1)}function l(e){return p(e,!0)}function d(e){if(y.hasOwnProperty(e))return!b[e]||(b[e]>(new Date).getTime()/1e3||(delete y[e],!1))}function f(e,t){return e.split(".").reduce(function(e,t){return e[t]},t)}function p(e,t){function r(t,r,s){var c=t.split(".")[0];return r.then(function(r){if(o.hasOwnProperty(c))r[t]=f(t,o);else{if(!d(c))return a(n(c,s)).then(function(e){return r[t]=f(t,e),Object.getOwnPropertyNames(e).forEach(function(t){o[t]=e[t]}),i("Resolved resources:",r,!0),r});r[t]=f(t,y)}return v(e,r),i("Resolved resources:",r,!0),r})}i("Requested resources:",e);var o={},s=t?a({}):k.then(function(){return{}});return Object.getOwnPropertyNames(e).forEach(function(t){s=r(t,s,e[t])}),k=s.then(function(e){return e})}function h(e){y={},Object.getOwnPropertyNames(e).forEach(function(t){y[t]=e[t]}),y.playbackSpecification=e}function m(e){Object.getOwnPropertyNames(e).forEach(function(t){y[t]=e[t]})}function v(e,t){c.enabledFor(s.DEBUG)&&(g||(g=[],window.debugRes=function(){console.table(g)}),e&&Object.getOwnPropertyNames(e).forEach(function(e){g[e]={data:JSON.stringify(t[e])}}))}c.debug("init",e);var g,y={},b={},w="",E={},k=a({});return{api:{model:{getResources:o,addResourcesToCache:m,setPlaybackSpecification:h}},cleanup:function(){c.debug("destroy")}}},addResolver:function(e){Object.getOwnPropertyNames(e).forEach(function(t){u[t]=e[t]})}};e.exports=l},function(e,t,n){"use strict";var r=n(4),i=n(93),o=n(96),a=n(69),s=n(7).get("vimondRestResolver"),c=n(33),u="Asset ID is not specified when inserting the player. Cannot look up what to play.",l={init:function(e,t){function n(e,t){if(e&&t&&t.itemList){var n=t.itemList.filter(function(t){return t.id==e});if(n.length>0)return n[0].timeBegin}return 0}function l(n,r,o,a){var s=i(t,o,e,a);return s.performRequest("playback",n,{parameters:r.parameters}).then(function(e){return e},m)}function d(e,t,n){var r={assetId:null};return n&&n.playbackProfile||(r.playbackProfile=null),e(r).then(function(r){if(r.assetId){var i=n&&n.playbackProfile||r.playbackProfile,a=t("rest");a.platform=i.platform;var s="";if(i.protocol||i.videoFormat||i.customParameters){i.protocol&&(s+="protocol="+i.protocol+"&"),i.videoFormat&&(s+="videoFormat="+i.videoFormat+"&");var c=i.appName||a.appName;c&&(s+="app_name="+c+"&"),i.customParameters&&(s+=i.customParameters)}var d=l(r.assetId,{parameters:s},a,e);return d.then(function(e){return{playback:e.data}})}throw new o(u)})}function f(r,c){var l=c("rest");return r({streamContext:null,assetId:null,startPosition:null,itemId:null}).then(function(c){if(c.assetId){l.platform=c.streamContext.platform;var d=i(t,l,e,r);return d.performRequest("asset",c.assetId).then(function(e){var t=0;try{t=a.extractTimeZoneOffsetFromIsoDate(e.data.liveBroadcastTime)}catch(r){s.warn("centralTimeZoneOffset could not be extracted.",r)}var i=c.startPosition||n(c.itemId,e.data),o=e.data.imageVersions.image&&e.data.imageVersions.image.url;return{contentId:e.data.id,title:e.data.title,description:e.data.description,posterImage:o,startPosition:i,views:e.data.views,categoryId:e.data.categoryId,markers:e.data.itemList,centralTimeZoneOffset:t,liveBroadcastTime:e.data.liveBroadcastTime,assetTypeName:e.data.assetTypeName,assetMetadata:e.data.metadata,cache:!0}},m)}throw new o(u)})}function p(n,r){var o=r("videoEngine.subtitles");if(o&&o.loadSubtitlesForAsset){var a=r("rest");return n({streamContext:null,assetId:null}).then(function(r){a.platform=r.streamContext.platform;var o=i(t,a,e,n);return o.performRequest("subtitles",r.assetId).then(function(e){return{tracks:e.data.map(function(e){return new c.constructors.Track(e.subtitles.uri,e.subtitles.name,e.subtitles.contentType&&e.subtitles.contentType.trim(),e.subtitles.locale,"HEARING_IMPAIRED"===e.subtitles.type?"captions":"subtitles")}),cache:!0}},m)})}return{tracks:[],cache:!0}}function h(n,r){var o=r("rest");return n({streamContext:null,categoryId:null}).then(function(r){o.platform=r.streamContext.platform;var a=i(t,o,e,n);return a.performRequest("category",r.categoryId).then(function(e){return{categoryTitle:e.data.title,category:e.data,cache:!0}},m)})}function m(e){var t=e&&e.response&&e.response.error&&e.response.error.code||"An error occured";return v.hasOwnProperty(t)&&(t=v[t]),r.reject(new o(t,e))}var v={ASSET_NOT_FOUND:"VIDEO_NOT_FOUND",ASSET_NOT_PUBLISHED:"VIDEO_NOT_PUBLISHED",ASSET_PLAYBACK_INVALID_GEO_LOCATION:"INVALID_GEO_LOCATION",ASSET_PLAYBACK_INVALID_VIDEO_FORMAT:"VIDEO_FORMAT_NOT_FOUND"};return{title:f,description:f,posterImage:f,markers:f,contentId:f,centralTimeZoneOffset:f,liveBroadcastTime:f,playback:d,categoryId:f,categoryTitle:h,category:h,assetTypeName:f,assetMetadata:f,assetPublishDate:f,views:f,tracks:p}}};e.exports=l},function(e,t,n){"use strict";function r(e,t,n,r){function u(e){return e.getProcessor(h,r)}function l(e){var t={};return Object.getOwnPropertyNames(e).forEach(function(n){Array.isArray(e[n])?t[n]=e[n].map(u):t[n]=l(e[n])}),t}function d(e,t){return e.then(function(e){return c(t(e))})}function f(e,t,n){var r=c(e);if(m[t]&&m[t][n])for(var i=0;i<m[t][n].length;i++)r=d(r,m[t][n][i].process);else if(m[n])for(var o=0;o<m[n].length;o++)r=d(r,m[n][o].process);return r}function p(e,t,n){var r=new i.RequestInfo(e,t,n),c=new i.ProcessableRequest(r),u=f(c,c.requestInfo.resourceType,"pre");return u=u.then(function(e){c=e;var t={withCredentials:h.restConfiguration.withCredentials||!1,authorization:h.restConfiguration.authorization};return s.doRequest(c.url,c.method,c.payload,c.requestHeaders,t)}),u=u.then(function(e){var t;try{t=JSON.parse(e.response)}catch(n){throw new a("xhr","Unable to parse response with JSON",c.url,n)}var r=new o(c,t,e.status,e.getAllResponseHeaders());return f(r,c.requestInfo.resourceType,"post")}),u.then(function(e){return e})}var h={resourceTypes:e,restConfiguration:t},m=l(n);return{performRequest:p}}var i=n(94),o=n(95),a=n(60),s=n(59),c=n(4);e.exports=r},function(e,t){"use strict";function n(e,t,n){this.reference=t,this.resourceType=e,this.data=n}function r(e){this.requestInfo=e,this.payload=null,this.method="GET",this.url="",this.requestHeaders={}}e.exports={RequestInfo:n,ProcessableRequest:r}},function(e,t){"use strict";function n(e,t,n,r){this.data=t,this.httpStatus=n,this.request=e,this.responseHeaders=r}e.exports=n},function(e,t){"use strict";function n(e,t){this.message=e||"Model error",this.originalError=t}n.prototype=new Error,n.prototype.constructor=n,e.exports=n},function(e,t,n){"use strict";var r=n(98),i=n(99),o=n(100),a=n(103),s=n(104),c={pre:[r],post:[i,o],playback:{pre:[r]},asset:{post:[i,o,a,s]}};e.exports=c},function(e,t,n){"use strict";function r(e,t){return"/"===e[0]?t+e:t+"/"+e}function i(e,t){return e.replace("{platform}",t.platform).replace("{id}",t.id).replace("{parameters}",t.parameters)}function o(e){function t(e){if(e.requestInfo&&e.requestInfo.reference)if(s.test(e.requestInfo.reference))e.url=e.requestInfo.reference;else if(isNaN(e.requestInfo.reference))e.url=r(e.requestInfo.reference,o.apiServer);else{var t=n[e.requestInfo.resourceType],c={id:e.requestInfo.reference,platform:o.platform,parameters:e.requestInfo.data&&e.requestInfo.data.parameters||""};e.url=i(o.apiServer+t.pattern,c)}return a(e)}var n=e.resourceTypes,o=e.restConfiguration,s=new RegExp("^(?:[a-z]+:)?//","i");return{process:t}}var a=n(4);e.exports={getProcessor:o}},function(e,t,n){"use strict";function r(e){function t(e){return e.httpStatus<200||e.httpStatus>=300?i.reject(new o("xhr","The server returned with status "+e.httpStatus+".",e.request.url,e.data)):i(e)}e.resourceTypes||{};return{process:t}}var i=n(4),o=n(60);e.exports={getProcessor:r}},function(e,t,n){"use strict";function r(e,t){return Object.getOwnPropertyNames(e).forEach(function(n){if("@"==n.charAt(0)){var i=n.substring(1);null==e[i]&&(e[i]=e[n])}else t&&(Array.isArray(e[n])?e[n].forEach(function(e){r(e,!0)}):s(e[n])&&r(e[n],!0))}),e["@uri"]&&null==e.reference&&(e.reference=e["@uri"]),e}function i(e,t){return t&&Object.getOwnPropertyNames(t).forEach(function(n){var r,i=t[n],o=e[n],a=o&&o[i];r=a?Array.isArray(a)?a:[a]:[],e[i+u]=r}),e}function o(e,t){return e&&t&&t in e?e[t]:e}function a(e){function t(e){var t=e.request.requestInfo.resourceType&&e.request.requestInfo.resourceType in n?n[e.request.requestInfo.resourceType]:{},a=o(e.data,t.collapseTopLevel);return a&&(a=r(a,!0),a=i(a,t.guaranteeLists)),e.data=a,c(e)}var n=e.resourceTypes||{};return{process:t}}var s=n(101),c=n(4),u="List";e.exports={getProcessor:a}},function(e,t,n){function r(e){return!!e&&"object"==typeof e}function i(e,t){return a(e,t,c)}function o(e){var t;if(!r(e)||f.call(e)!=u||s(e)||!d.call(e,"constructor")&&(t=e.constructor,"function"==typeof t&&!(t instanceof t)))return!1;var n;return i(e,function(e,t){n=t}),void 0===n||d.call(e,n)}var a=n(19),s=n(17),c=n(102),u="[object Object]",l=Object.prototype,d=l.hasOwnProperty,f=l.toString;e.exports=o},function(e,t,n){function r(e,t){return e="number"==typeof e||u.test(e)?+e:-1,t=null==t?f:t,e>-1&&e%1==0&&e<t}function i(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=f}function o(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function a(e){if(null==e)return[];o(e)||(e=Object(e));var t=e.length;t=t&&i(t)&&(c(e)||s(e))&&t||0;for(var n=e.constructor,a=-1,u="function"==typeof n&&n.prototype===e,l=Array(t),f=t>0;++a<t;)l[a]=a+"";for(var p in e)f&&r(p,t)||"constructor"==p&&(u||!d.call(e,p))||l.push(p);return l}var s=n(17),c=n(18),u=/^\d+$/,l=Object.prototype,d=l.hasOwnProperty,f=9007199254740991;e.exports=a},function(e,t,n){"use strict";function r(e){function t(e){return e.data&&e.data.itemList&&e.data.itemList.forEach(function(t){t.timeBegin=t.timeBegin-e.data.onDemandTimeBegin,t.timeEnd=t.timeEnd-e.data.onDemandTimeBegin}),i(e)}return{process:t}}var i=n(4);e.exports={getProcessor:r}},function(e,t,n){"use strict";function r(e){function t(e){return"asset"===e.request.requestInfo.resourceType&&e.data&&e.data.itemList&&e.data.itemList.forEach(function(e){n.urlPattern?e.imageUrl=n.urlPattern.replace("{picture}",e.picture):e.imageUrl=e.picture}),i(e)}var n=e.restConfiguration.markerImageUrlBuilder||{};return{process:t}}var i=n(4);e.exports={getProcessor:r}},function(e,t){e.exports={asset:{kind:"mainApi",pattern:"/api/{platform}/asset/{id}?expand=items,metadata,assetType&{parameters}",guaranteeLists:{items:"item"},collapseTopLevel:"asset"},playback:{kind:"mainApi",pattern:"/api/{platform}/asset/{id}/play?{parameters}",guaranteeLists:{items:"item"},collapseTopLevel:"playback"},subtitles:{kind:"mainApi",pattern:"/api/{platform}/asset/{id}/subtitles"},category:{kind:"mainApi",pattern:"/api/{platform}/category/{id}",collapseTopLevel:"category"},authenticationStatus:{kind:"mainApi",pattern:"/api/authentication/user/"},user:{kind:"mainApi",pattern:"/api/{platform}/user",user:"user"}}},function(e,t,n){"use strict";function r(){return{cache:!0,cacheInSeconds:120}}var i=n(4),o=n(96),a=n(7).get("streamLookupTechnologyResolver"),s={init:function(){function e(e,t){var n=t("streamLookup");return e({userAgent:null}).then(function(e){for(var t,r,i=0;i<n.contexts.length;i++){var o=new RegExp(n.contexts[i].match);if(o.test(e.userAgent)){r=n.contexts[i].match,t=n.contexts[i];break}}return a.debug("Stream context found.",t,r,e.userAgent),{streamContext:t,cache:!0}})}function t(e,n,r){function s(o){return n.length<=++r?i.reject(o):t(e,n,r)}function u(e){return e.playbackProfile.filter&&(e.playback.itemList=e.playback.itemList.filter(c(e.playbackProfile.filter))),!(e.playback.itemList&&e.playback.itemList.length<=0)&&!(e.playback.drmProtected&&(!e.playbackProfile.drmTypes||Array.isArray(e.playbackProfile.drmTypes)&&e.playbackProfile.drmTypes.length<=0))}return e({playback:{playbackProfile:n[r]}}).then(function(e){if(e.playbackProfile=n[r],u(e)){if(a.debug("Initiating playback of asset "+e.playback["@assetId"]+".",e.playbackProfile),"NOT_STARTED"===e.playback.playbackStatus)throw a.debug("Not started. Live broadcast time ",e.playback.liveBroadcastTime),new o("NOT_STARTED");return e}return"NOT_STARTED"===e.playback.playbackStatus?(a.debug("Not started. Live broadcast time ",e.playback.liveBroadcastTime),s(new o("NOT_STARTED"))):s(new o("VIDEO_FORMAT_NOT_FOUND"))},function(e){return"VIDEO_FORMAT_NOT_FOUND"===e.message?s(e):i.reject(e)})}function n(e,n){return e({streamContext:null}).then(function(i){var o=n("streamLookup").profiles,a=i.streamContext.canplay,s=a.map(function(e){var t=o[e.profile];return t.playbackTechnology=e.playbackTechnology,t.drmType=t.drmTypes&&e.drmType&&t.drmTypes[e.drmType],t});return t(e,s,0).then(function(e){var t=r();return t.playbackProfile=e.playbackProfile,t.playbackTechnology=e.playbackProfile.playbackTechnology,t.cachedPlaybackObject=f(e.playback,e.playbackProfile.drmType,n("rest")),t})})}function s(e,t){return e({cachedPlaybackObject:null}).then(function(e){return e.cachedPlaybackObject})}function c(e){return function(t){if(e){var n=e.bitrate;if(n)if(parseInt(n,10).toString()==n.toString()){if(t.bitrate!=n)return!1}else{if(n.minimum&&t.bitrate<n.minimum)return!1;if(n.maximum&&t.bitrate>n.maximum)return!1}if(e.mediaFormat&&e.mediaFormat!=t.mediaFormat)return!1;if(e.scheme&&e.scheme!=t.scheme)return!1}return!0}}function u(e,t){return e({playback:null}).then(function(e){var n=r();return n.cachedPlaybackObject=f(e.playback,null,t("rest")),n})}function l(e,t){if(t.log)return e.apiServer+t.log.uri}function d(e,t){if(e.license){var n=t&&e.license.drm&&e.license.drm.license;if(Array.isArray(n)){for(var r=0;r<n.length;r++)if(t==n[r].name)return a.debug("Found license URL matching the specified supported type "+t+":",n[r].uri),n[r].uri;return n[0].uri}return e.license.uri}return null}function f(e,t,n){var r={};if(e.itemList.length>0){var i=e.itemList[0];r.streamUrl=i.url,r.streamServer=i.server,r.mediaFormat=i.mediaFormat,r.cdnName=i.cdn,r.streamProtocol=i.protocol||i.url&&i.url.substring(0,i.url.indexOf(":")),r.licenseUrl=d(i,t),r.licenseType=t,r.logUrl=l(n,i);for(var o=[],a=1;a<e.itemList.length;a++)o.push(e.itemList[a].url);r.fallbackUrls=o}else r.streamUrl=null,r.streamServer=null,r.mediaFormat=null,r.cdnName=null,r.streamProtocol=null,r.licenseUrl=null,r.licenseType=null,r.logUrl=null;return r.assetId=parseInt(e.assetId),r.streamStartDateTime=e.encoderStartTime||e.liveBroadcastTime,r.streamRule=e.streamRule,r.logData=e.logData,r.isLive=e.live,r._fetchTime=new Date,r}return{streamContext:e,playbackProfile:n,playbackTechnology:n,streamUrl:s.bind({calledFor:"streamUrl"}),streamServer:s.bind({calledFor:"streamServer"}),mediaFormat:s.bind({calledFor:"mediaFormat"}),streamProtocol:s.bind({calledFor:"streamProtocol"}),cdnName:s.bind({calledFor:"cdnName"}),licenseUrl:s.bind({calledFor:"licenseUrl"}),licenseType:s.bind({calledFor:"licenseType"}),streamStartDateTime:s.bind({calledFor:"streamStartDateTime"}),streamRule:s.bind({calledFor:"streamRule"}),logUrl:s.bind({calledFor:"logUrl"}),logData:s.bind({calledFor:"logData"}),isLive:s.bind({calledFor:"isLive"}),fallbackUrls:s.bind({calledFor:"fallbackUrls"}),cachedPlaybackObject:u}}};e.exports=s},function(e,t,n){"use strict";var r=n(7).get("youbora-resolver"),i=(n(21),{init:function(){function e(e){return null==e?"":e.toString()}function t(t,n){return e(t&&t.assetMetadata&&t.assetMetadata[n]&&t.assetMetadata[n].$)}function n(e){var n={assetMetadata:null};return e(n).then(function(e){var n={streamUrl:t(e,"streamUrl"),isLive:t(e,"isLive"),contentId:t(e,"contentId"),title:t(e,"title"),duration:t(e,"duration"),assetTypeName:t(e,"assetTypeName"),categoryTitle:t(e,"categoryTitle"),genre:t(e,"genre"),director:t(e,"director"),publisher:t(e,"publisher"),hd:t(e,"hd"),"original-language":t(e,"original-language"),"spoken-languages":t(e,"spoken-languages"),"production-year":t(e,"production-year"),"parental-guidance":t(e,"parental-guidance")};return r.debug("youboraMetadata : "+n),{youboraMetadata:n}})}return{youboraMetadata:n}}});e.exports=i},function(e,t,n){"use strict";var r=n(26),i="errorScreen",o=n(7),a=o.get(i),s={moduleName:i,dependencies:{appContainer:null,loading:null,loadStart:null,strings:"errorMessages"},init:function(e){function t(t,n,r){i||(i=!0,e.loading.hide(),e.strings[t]&&(t=e.strings[t]),s.view.dom.innerHTML=t,o.addSubWidgets({errorscreen:s}))}function n(){i=!1,e.loadStart(),s.detach()}a.debug("init",e);var i=!1,o=e.appContainer.baseWidget,s=new r({className:"error",type:"p"});return{api:{errorScreen:{showMessage:t,hideMessage:n}},cleanup:function(){a.debug("destroy"),s.detach(),s=null}}}};e.exports=s},function(e,t,n){"use strict";var r="errorHandler",i=n(7),o=i.get(r),a={moduleName:r,dependencies:{playerApi:null,errorTracker:null},init:function(e){var t=e.playerApi.exposed,n=e.errorTracker.severity;return t.addEventListener(t.playerEvents.error,function(e){switch(e.severity){case n.FATAL:o.error("An error occured",e);break;case n.WARNING:o.warn("An error occured",e);break;case n.INFO:o.info("An error occured",e);break;default:o.debug("An error occured, but contained no recognized severity",e)}}),{api:{},cleanup:function(){}}}};e.exports=a},function(e,t,n){"use strict";var r="userActivity",i=n(7),o=i.get(r),a={moduleName:r,dependencies:{appContainer:null,configuration:"userInactivityInterval"},init:function(e){function t(){p=!0}function n(){h=!0,m=!0}function r(){m=!1}function i(){(p||h||m)&&(h=!1,p=!1,v===!1&&(v=!0,a(v)),clearTimeout(u),u=setTimeout(function(){g?(v=!0,a(v)):p||(v=!1,a(v))},y))}function a(t){e.appContainer.removeClass(t?f:d),e.appContainer.addClass(t?d:f),e.appContainer.baseWidget.emit("useractivity.change",{detail:{isActive:t},bubbles:!0})}function s(){window.clearInterval(l),e.appContainer.baseWidget&&e.appContainer.baseWidget.unListen(["mousemove","touchstart","touchend"]),e.appContainer.removeClass(d),e.appContainer.removeClass(f)}function c(){return v}o.debug("init",e);var u,l,d="user-active",f="user-inactive",p=!1,h=!1,m=!1,v=!1,g=!1,y=e.configuration||2e3;return e.appContainer.baseWidget&&e.appContainer.baseWidget.listen({mousemove:t,touchstart:n,touchend:r}),y>=0&&(l=window.setInterval(i,250)),v=!0,a(v),{api:{userActivity:{nudge:t,isUserActive:c,stop:s}},cleanup:s}}};e.exports=a},function(e,t,n){"use strict";var r="responsive",i=n(112),o=n(7),a=o.get(r),s={moduleName:r,dependencies:{appContainer:null,configuration:"responsivity"},init:function(e){function t(){if(n){var e=r.baseWidget.view.dom.clientWidth;Object.getOwnPropertyNames(n).forEach(function(t){r.removeClass(t),n[t].min&&n[t].max?n[t].min<=e&&n[t].max>=e&&r.addClass(t):n[t].min?n[t].min<=e&&r.addClass(t):n[t].max&&n[t].max>=e&&r.addClass(t)})}}a.debug("init",e);var n,r=e.appContainer;return e.configuration&&e.configuration.responsiveSize&&(n=e.configuration.responsiveSize,i.addResizeListener(r.baseWidget.view.dom,t),t()),"ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch?r.addClass("touch"):r.addClass("no-touch"),{api:{},cleanup:function(){}}}};e.exports=s},function(e,t){"use strict";function n(){if(!u){if(u=function(){var e=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||function(e){return window.setTimeout(e,20)};return function(t){return e(t)}}(),l=function(){var e=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.clearTimeout;return function(t){return e(t)}}(),d=document.createElement("fakeelement"),void 0!==d.style.animationName&&(v=!0),v===!1)for(var e=0;e<w.length;e++)if(void 0!==d.style[w[e]+"AnimationName"]){k=w[e],g=k+"Animation",y="-"+k.toLowerCase()+"-",b=E[e],v=!0;break}f="resizeanim",p="@"+y+"keyframes "+f+" { from { opacity: 0; } to { opacity: 0; } } ",h=y+"animation: 1ms "+f+"; "}}function r(e){var t=e.__resizeTriggers__,n=t.firstElementChild,r=t.lastElementChild,i=n.firstElementChild;r.scrollLeft=r.scrollWidth,r.scrollTop=r.scrollHeight,i.style.width=n.offsetWidth+1+"px",i.style.height=n.offsetHeight+1+"px",n.scrollLeft=n.scrollWidth,n.scrollTop=n.scrollHeight}function i(e){return e.offsetWidth!=e.__resizeLast__.width||e.offsetHeight!=e.__resizeLast__.height}function o(e){var t=this;r(this),this.__resizeRAF__&&l(this.__resizeRAF__),this.__resizeRAF__=u(function(){i(t)&&(t.__resizeLast__.width=t.offsetWidth,t.__resizeLast__.height=t.offsetHeight,t.__resizeListeners__.forEach(function(n){n.call(t,e)}))})}function a(){if(!m){var e=(p?p:"")+".resize-triggers { "+(h?h:"")+'visibility: hidden; opacity: 0; } .resize-triggers, .resize-triggers > div, .contract-trigger:before { content: " "; display: block; position: absolute; top: 0; left: 0; height: 100%; width: 100%; overflow: hidden; } .resize-triggers > div { background: #eee; overflow: auto; } .contract-trigger:before { width: 200%; height: 200%; }',t=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e)),t.appendChild(n),m=!0}}function s(e,t){n(),e.__resizeTriggers__||(a(),e.__resizeLast__={},e.__resizeListeners__=[],(e.__resizeTriggers__=document.createElement("div")).className="resize-triggers",e.__resizeTriggers__.innerHTML='<div class="expand-trigger"><div></div></div><div class="contract-trigger"></div>',e.appendChild(e.__resizeTriggers__),r(e),e.addEventListener("scroll",o,!0),b&&e.__resizeTriggers__.addEventListener(b,function(t){t.animationName==f&&r(e)})),e.__resizeListeners__.push(t)}function c(e,t){e.__resizeListeners__.splice(e.__resizeListeners__.indexOf(t),1),e.__resizeListeners__.length||(e.removeEventListener("scroll",o),e.__resizeTriggers__=!e.removeChild(e.__resizeTriggers__))}var u,l,d,f,p,h,m=!1,v=!1,g="animation",y="",b="animationstart",w="Webkit Moz O ms".split(" "),E="webkitAnimationStart animationstart oAnimationStart MSAnimationStart".split(" "),k="";e.exports={addResizeListener:s,removeResizeListener:c}},function(e,t,n){"use strict";var r=n(114),i="loadingScreen",o=n(7),a=o.get(i),s={moduleName:i,dependencies:{appContainer:null},setSpinnerWidget:function(e){this.spinnerWidget=e},init:function(e){function t(e){i.addSubWidgets({spinner:o}),s=!0}function n(e){s&&o.detach()}a.debug("init",e);var i=e.appContainer.baseWidget,o=this.spinnerWidget?new this.spinnerWidget({classname:"spinner"}):new r({className:"spinner"}),s=!1;return{api:{setSpinnerWidget:this.setSpinnerWidget,loadingScreen:{showLoadingscreen:t,hideLoadingscreen:n}},cleanup:function(){return a.debug("destroy"),n(),{loadingScreen:null}}}}};e.exports=s},function(e,t,n){"use strict";function r(e){var t='<div style="top:80px;left:93px;width:14px;height:40px;background:#fff;-webkit-transform:rotate(0deg) translate(0,-60px);transform:rotate(0deg) translate(0,-60px);border-radius:4px;position:absolute;"></div>       <div style="top:80px;left:93px;width:14px;height:40px;background:#fff;-webkit-transform:rotate(32deg) translate(0,-60px);transform:rotate(32deg) translate(0,-60px);border-radius:4px;position:absolute;"></div> <div style="top:80px;left:93px;width:14px;height:40px;background:#fff;-webkit-transform:rotate(65deg) translate(0,-60px);transform:rotate(65deg) translate(0,-60px);border-radius:4px;position:absolute;"></div> <div style="top:80px;left:93px;width:14px;height:40px;background:#fff;-webkit-transform:rotate(98deg) translate(0,-60px);transform:rotate(98deg) translate(0,-60px);border-radius:4px;position:absolute;"></div> <div style="top:80px;left:93px;width:14px;height:40px;background:#fff;-webkit-transform:rotate(130deg) translate(0,-60px);transform:rotate(130deg) translate(0,-60px);border-radius:4px;position:absolute;"></div> <div style="top:80px;left:93px;width:14px;height:40px;background:#fff;-webkit-transform:rotate(163deg) translate(0,-60px);transform:rotate(163deg) translate(0,-60px);border-radius:4px;position:absolute;"></div> <div style="top:80px;left:93px;width:14px;height:40px;background:#fff;-webkit-transform:rotate(196deg) translate(0,-60px);transform:rotate(196deg) translate(0,-60px);border-radius:4px;position:absolute;"></div> <div style="top:80px;left:93px;width:14px;height:40px;background:#fff;-webkit-transform:rotate(229deg) translate(0,-60px);transform:rotate(229deg) translate(0,-60px);border-radius:4px;position:absolute;"></div> <div style="top:80px;left:93px;width:14px;height:40px;background:#fff;-webkit-transform:rotate(261deg) translate(0,-60px);transform:rotate(261deg) translate(0,-60px);border-radius:4px;position:absolute;"></div> <div style="top:80px;left:93px;width:14px;height:40px;background:#fff;-webkit-transform:rotate(294deg) translate(0,-60px);transform:rotate(294deg) translate(0,-60px);border-radius:4px;position:absolute;"></div> <div style="top:80px;left:93px;width:14px;height:40px;background:#fff;-webkit-transform:rotate(327deg) translate(0,-60px);transform:rotate(327deg) translate(0,-60px);border-radius:4px;position:absolute;"></div>',n={type:"div",className:e.className,children:{circlespinner:new i({className:"circle-spinner"})}};i.call(this,n),this.circlespinner.view.dom.innerHTML=t,this.addClass("spinner")}var i=n(26);r.prototype=Object.create(i.prototype),e.exports=r},function(e,t,n){"use strict";var r="userSettings",i=n(7).get(r),o={moduleName:r,dependencies:{configuration:"settingsStoragePolicy"},init:function(e){function t(e){if(e in a){var t=r(e);return t&&t[o+"_"+e]||a[e].defaultValue}return null}function n(e,t){if(e in a){var n=r(e);n&&(i.debug("Storing user setting "+e+" with value "+t),n[o+"_"+e]=t)}}function r(e){switch(a[e].policy){case"persistent":return s;case"session":return c;default:return null}}i.debug("init",e);var o=e.configuration.storageKeyPrefix||"vup",a=e.configuration||{},s=window.localStorage,c=window.sessionStorage;return{api:{userSettings:{get:t,set:n}},cleanup:function(){i.debug("destroy")}}}};e.exports=o},function(e,t,n){"use strict";var r="autoplay workaround handler",i=n(7),o=i.get(r),a={moduleName:r,dependencies:{model:null,configuration:"autoplaySupport"},init:function(e){function t(){return r}function n(e){r=e}o.debug("init",e);var r=!0;return e.model.getResources({userAgent:null}).then(function(i){var a=e.configuration;if(a)for(var s=0;s<a.length;s++){var c=new RegExp(a[s].match);if(c.test(i.userAgent)){r=a[s].supportsAutoplay;break}}return{api:{autoplayWorkaroundHandler:{getSupportsAutoplay:t,setSupportsAutoplay:n}},cleanup:function(){o.debug("destroy")}}}.bind(this))}};e.exports=a},function(e,t,n){"use strict";var r="poster",i=n(7),o=n(118),a=(n(26),i.get(r)),s={moduleName:r,dependencies:{appContainer:null,loadPlayback:null,model:null,loading:null,errorTracker:null,autoplayWorkaroundHandler:"optional",vastAdLoader:"optional"},init:function(e){a.debug("init",e),e.loading.show();
var t;return e.model.getResources({posterImage:null}).then(function(n){function r(){e.loading.hide()}t=new o({className:"start-poster-widget",type:"span",onload:r,background:n.posterImage}),e.loadPlayback&&t.listen({click:function(t){if(t.preventDefault(),e.appContainer.videoElement){var n=e.appContainer.videoElement,r=n.play();r&&r.then?r.then(function(){n.pause()})["catch"](function(e){a.debug(e)}):n.pause(),e.autoplayWorkaroundHandler&&e.autoplayWorkaroundHandler.setSupportsAutoplay(!0)}e.vastAdLoader&&e.vastAdLoader.createDisplayContainer(),e.loading.show(),e.loadPlayback()}}),e.appContainer.baseWidget.addSubWidgets({poster:t})}).fail(function(t){e.errorTracker.track({type:e.errorTracker.types.START_POSTER_ERROR,severity:e.errorTracker.severity.FATAL,originalError:t})}),{api:{},cleanup:function(){a.debug("destroy");try{t.detach()}catch(e){a.warn("The targeted poster widget does not exist",e)}}}}};e.exports=s},function(e,t,n){"use strict";function r(e){var t="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNgYAAAAAMAASsJTYQAAAAASUVORK5CYII=",n={className:e.className,type:e.type||"span",children:{image:new i({type:"img",className:"poster-image",properties:{src:e.background||t}}),link:new i({type:"a",properties:{href:e.url||""}})}};i.call(this,n),this.renderBlackImage=function(){this.image.view.dom.setAttribute("src",t)},e.onload&&this.image.listen({load:e.onload,error:this.renderBlackImage.bind(this)}),e.onclick&&this.listen({click:e.onclick})}var i=n(26);r.prototype=Object.create(i.prototype),e.exports=r},function(e,t,n){"use strict";var r="notStartedPoster",i=n(26),o=n(21),a=n(7),s=a.get(r),c={moduleName:r,dependencies:{appContainer:null,model:null,loadPlayback:null,loading:null,strings:"all"},init:function(e){function t(){a.addSubWidgets({notstartedscreen:c}),e.loading.hide()}s.debug("init",e);var n="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNgYAAAAAMAASsJTYQAAAAASUVORK5CYII=",r={title:null,posterImage:null,liveBroadcastTime:null,userAgent:null},a=e.appContainer.baseWidget,c=new i({type:"div",className:"not-started-wrapper",children:{container:new i({className:"not-started-container",type:"div",children:{content:new i({type:"div",className:"content",children:{title:new i({type:"p",className:"title"}),info:new i({type:"p",className:"info",properties:{innerHTML:e.strings.errorMessages.NOT_STARTED}}),startTime:new i({type:"p",className:"start-time"})}})}})}}),u=e.model.getResources(r);return u.then(function(t){if(t.title&&(c.container.content.title.view.dom.innerHTML=t.title),t.posterImage&&c.container.addSubWidgets({image:new i({type:"img",properties:{src:t.posterImage}})}),t.liveBroadcastTime){var n=o.formatDateAndTime(new Date(t.liveBroadcastTime));c.container.content.startTime.view.dom.innerHTML=e.strings.starttime+": "+n}},function(e){s.debug(e),c.container.image&&c.container.image.view.dom.setAttribute("src",n)})["catch"](console.error.bind(console)),{api:{notStartedPoster:{showPoster:t}},cleanup:function(){s.debug("destroy notStartedModule")}}}};e.exports=c},function(e,t,n){"use strict";function r(e,t,n,r,i){return s.debug("Video engine config",n),o.videoEngineFactory.applyContext(n,i).create(r,e,t).then(function(e){return s.debug("Inserted video engine:",e.technologyName),e})}var i="videoEngine",o=n(33),a=n(7),s=a.get(i),c={moduleName:i,dependencies:{appContainer:null,model:null,handleError:null,streamFailover:"optional",configuration:"videoEngine"},init:function(e){return s.debug("init",e),e.model.getResources({playbackTechnology:null,manifestModifier:null}).then(function(t){return t.playbackTechnology?(t.manifestModifier&&"dash"==t.playbackTechnology&&(e.configuration.dash.manifestModifier=t.manifestModifier,s.debug("Adding manifestModifier from resolver")),r(e.appContainer.baseWidget.view.dom,e.appContainer.videoElement,e.configuration,t.playbackTechnology,{streamFailover:e.streamFailover}).then(function(t){return!e.appContainer.videoElement&&t.instance.domElement&&e.appContainer.setVideoElement(t.instance.domElement),s.debug("videoEngine created"),{api:{videoEngine:t},cleanup:function(){return s.debug("removing videoEngine"),t.remove().then(function(){return{videoEngine:null}})}}})):void e.handleError("notechnology",e.handleError.types.fatal)})}};e.exports=c},function(e,t,n){"use strict";var r="vastAdLoader",i=n(26),o=n(21),a=n(7).get("vastAdLoader"),s={moduleName:r,dependencies:{appContainer:null,model:null,configuration:"ads",errorTracker:null},init:function(e){function t(){return r||c||u(),a.debug("Instancing adsLoader"),n=new s.AdsLoader(r)}var n,r,s,c,u=function(){e.configuration.enabled&&e.configuration.libraryUrl?(a.debug("Creating AdDisplayContainer"),s.settings.setLocale(e.configuration.locale),c=new i({className:"ad-container"}),e.appContainer.baseWidget.addSubWidgets({adContainer:c}),r=new s.AdDisplayContainer(c.view.dom,e.appContainer.videoElement),r.initialize(),t()):a.debug("Ads not enabled or libraryUrl missing")}.bind(this);return this.libLoaded=o.promiseScript("google.ima",e.configuration.libraryUrl).then(function(e){return s=e,{api:{vastAdLoader:{createDisplayContainer:u,createAdsLoader:t,adLib:s}},cleanup:function(){}}}).fail(function(t){var n=e.errorTracker;return n.track({type:n.types.ADS_SCRIPT_LOAD_ERROR,severity:n.severity.INFO,originalError:t}),{api:{vastAdLoader:null},cleanup:function(){}}})}};e.exports=s},function(e,t,n){"use strict";function r(e,t,n){this.event=e,this.position=t||0,this.duration=n||0}var i="videoAdProvider",o=n(4),a=n(33).scheduleEventTypes,s=n(44),c=(n(26),n(21),n(7).get("videoAdProvider")),u=n(123),l={moduleName:i,dependencies:{appContainer:null,model:null,vastAdLoader:null,configuration:"ads",errorTracker:null},init:function(e){function t(e){var t={duration:0};return e.observe("position",function(e,n){t.currentTime=e}),e.observe("duration",function(e,n){isNaN(e)||(t.duration=e)}),t}function n(e){var t=e;return x.cuepoints&&x.cuepoints.forEach(function(n){e>=n.timeBegin-5&&e<n.timeEnd?(t=n.timeEnd,c.debug("Found resume position from time end",n,t)):c.debug("Non-matching ad break when looking for resume position",n,t)}),t}function i(e){var t=!1;return x.cuepoints&&x.cuepoints.forEach(function(n){n.timeBegin>=e-5&&n.timeBegin<=e+5&&(t=!0)}),t}function l(){c.debug("AdsManager starting ad block"),x.isAdsManagerStarted=!0,x.adsManager.start()}function d(t){var n=new C.AdsRenderingSettings;n.restoreCustomPlaybackStateOnAdBreakComplete=!1,e.configuration.uiElements?(n.uiElements=[],e.configuration.uiElements.forEach(function(e){n.uiElements.push(C.UiElements[e])})):n.uiElements=[C.UiElements.COUNTDOWN,C.UiElements.AD_ATTRIBUTION],x.adsManager=t.getAdsManager(P,n),x.adVideoAdapters.resolve({updater:new u.AdVideoUpdater(x.adsManager),observer:new u.AdVideoObserver(x.adsManager,C)}),x.adsManager.addEventListener(C.AdEvent.Type.CONTENT_PAUSE_REQUESTED,v),x.adsManager.addEventListener(C.AdEvent.Type.CONTENT_RESUME_REQUESTED,g),x.adsManager.addEventListener(C.AdEvent.Type.AD_BREAK_READY,p),x.adsManager.addEventListener(C.AdEvent.Type.ALL_ADS_COMPLETED,h),x.adsManager.addEventListener(C.AdEvent.Type.LOADED,b),x.adsManager.addEventListener(C.AdEvent.Type.STARTED,w),x.adsManager.addEventListener(C.AdEvent.Type.COMPLETE,E),x.adsManager.addEventListener(C.AdEvent.Type.CLICK,y),x.adsManager.addEventListener(C.AdErrorEvent.Type.AD_ERROR,m);try{x.adsManager.init(x.videoElement.width,x.videoElement.height,C.ViewMode.NORMAL)}catch(r){m()}}function f(t){var r=!1;return e.configuration.doNotPlayAdType&&e.configuration.doNotPlayAdType.forEach(function(e){x.adMode==e&&(r=!0)}),"midroll"==x.adMode&&!e.configuration.preventSeekPastAd&&i(t.adBreakTime)&&n(t.adBreakTime)<=P.currentTime&&(r=!0),x.adBreakComplete.promise.isRejected()&&(r=!0),r}function p(e){c.debug("Ad break ready for playback");var t=e.getAdData();f(t)?(c.debug("Skipping ad break"),g()):(c.debug("Starting adsManager from onAdBreakReady"),l())}function h(e){c.debug("Ad break completed",e),g()}function m(t){e.errorTracker.track({type:e.errorTracker.types.AD_ERROR,severity:e.errorTracker.severity.INFO,originalError:t.getError()}),x.adsManager&&x.adsManager.destroy(),g()}function v(){e.appContainer.addClass("playing-ads"),c.debug("Setting resume position on pause",P.currentTime),P.resumePosition=P.currentTime,"midroll"==x.adMode&&A(),x.adModelUpdater=setInterval(function(){x.adVideoModel.update("isAdSkipEnabled",x.adsManager.getAdSkippableState()),x.adVideoModel.update("remainingDuration",x.adsManager.getRemainingTime())},1e3)}function g(){e.appContainer.removeClass("playing-ads");var t=n(P.resumePosition);clearInterval(x.adModelUpdater),c.debug("onContentResumeRequested, position:",t,x.videoElement.currentTime),"preroll"==x.adMode&&(x.adMode="midroll"),x.adVideoModel.update("isAdsPlaying",!1),x.isAdsManagerStarted=!1,x.midrollAdReadyWaiting=!1,x.adBreakComplete.resolve({resumePosition:t})}function y(e){x.adVideoModel.update("isAdClicked",!0)}function b(e){"midroll"==x.adMode&&(x.midrollAdReadyWaiting=!0),!x.isAdsManagerStarted&&x.adBreakComplete.promise.isPending()&&l(),x.adBreakComplete.notify(new r(a.adReady))}function w(e){x.adBreakComplete.notify(new r(a.adStarted));var t=x.adsManager.getCurrentAd();x.adVideoModel.update("scheduleType",x.adMode),x.adVideoModel.update("isAdsPlaying",!0),x.adVideoModel.update("isAdSkipEnabled",x.adsManager.getAdSkippableState()),x.adVideoModel.update("remainingDuration",x.adsManager.getRemainingTime()),x.adVideoModel.update("adCount",t.getAdPodInfo().getTotalAds()),x.adVideoModel.update("adNumber",t.getAdPodInfo().getAdPosition())}function E(e){c.debug("ad complete",e),x.adVideoModel.update("isAdClicked",!1),x.adBreakComplete.notify(new r(a.adEnded))}function k(){e.model.getResources({adTagUrl:null,adCuePoints:null}).then(function(t){x.cuepoints=t.adCuePoints;var n=new C.AdsRequest;n.adTagUrl=t.adTagUrl||e.configuration.adTagUrl,n.linearAdSlotWidth=e.appContainer.baseWidget.view.dom.offsetWidth,n.linearAdSlotHeight=e.appContainer.baseWidget.view.dom.offsetHeight,n.nonLinearAdSlotWidth=e.appContainer.baseWidget.view.dom.offsetWidth,n.nonLinearAdSlotHeight=e.appContainer.baseWidget.view.dom.offsetHeight,R.getSettings().setAutoPlayAdBreaks(!1),R.requestAds(n)}).fail(function(t){e.errorTracker.track({type:e.errorTracker.types.RESOLVE_AD_METADATA_ERROR,severity:e.errorTracker.severity.INFO,originalError:t}),x.hasFailed=!0})}function S(){function n(t,n,i){return x.adMode=t,x.adBreakComplete=o.defer(),x.adBreakComplete.promise.fail(function(t){throw e.errorTracker.track({type:e.errorTracker.types.SCHEDULE_ADS_FAILED,severity:e.errorTracker.severity.INFO,originalError:t}),t}),e.configuration.enabled&&!x.hasFailed?"postroll"==t?R.contentComplete():"midroll"==x.adMode&&x.midrollAdReadyWaiting&&window.setTimeout(function(){c.debug("Faking adReady notification for midrolls"),x.adBreakComplete.notify(new r(a.adReady)),x.midrollAdReadyWaiting=!1},10):x.adBreakComplete.resolve(),x.adBreakComplete.promise}function i(e,t){O.updatePosition(e)}return x.adVideoModel=e.videoEngine.adVideoModel,x.adVideoAdapters=o.defer(),x.videoModel=e.videoEngine.videoModel,x.videoElement=e.videoEngine.instance.domElement,P=t(x.videoModel),R||(e.errorTracker.track({type:e.errorTracker.types.AD_ERROR,severity:e.errorTracker.severity.WARNING,originalError:"AdsLoader is "+R}),R=e.vastAdLoader.getAdLoader()),R.addEventListener(C.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,d,!1),R.addEventListener(C.AdErrorEvent.Type.AD_ERROR,m,!1),k(),{scheduleAds:n,reportPosition:i,interstitialSetup:{positions:{},resumeOffset:0},getAdVideoAdapters:function(){return x.adVideoAdapters.promise},stop:function(){R&&R.destroy(),x.adsManager&&x.adsManager.destroy()},registerInterstitialBreaker:function(e){A=e}}}function T(t){t.hasOwnProperty("videoEngine")&&t.videoEngine&&(e.videoEngine=t.videoEngine),t.hasOwnProperty("vastAdLoader")&&t.vastAdLoader&&(e.vastAdLoader=t.vastAdLoader)}if(c.debug("Initializing video ad scheduler."),!e.configuration.enabled||!e.vastAdLoader)return{api:{videoAdProvider:null},cleanup:function(){}};var A,P,x={adsManager:null,adMode:"preroll",midrollAdReadyWaiting:!1,cuepoints:null,adBreakComplete:null},C=e.vastAdLoader.adLib,R=e.vastAdLoader.createAdsLoader(),O=new s.PositionNotificator((!0));return{api:{videoAdProvider:{createSession:S}},newDependenciesCallback:T,cleanup:function(){R&&R.destroy(),x.adsManager&&x.adsManager.destroy()}}}};e.exports=l},function(e,t){"use strict";function n(e,t){function n(e,t){if(m)return d.update(e,t)}function r(){n(d.props.isPaused,!1),n(d.props.playState,d.playStates.playing)}function i(){n(d.props.isPaused,!0),n(d.props.playState,d.playStates.paused)}function o(){h(!1)}function a(){clearInterval(p)}function s(){n(d.props.volume,e.getVolume())}function c(t){n(d.props.isMuted,function(){return e.getVolume()>0})}function u(){m||h(!0),l(),f=e.getRemainingTime(),p=setInterval(function(){n(d.props.position,f-e.getRemainingTime())},1e3)}function l(){a(),s(),c(),n(d.props.playState,d.playStates.starting),n(d.props.duration,e.getRemainingTime()),n(d.props.position,0),n(d.props.isPaused,!1)}var d,f,p,h,m=!1,v=[{eventName:t.AdEvent.Type.LOADED,handler:u},{eventName:t.AdEvent.Type.STARTED,handler:r},{eventName:t.AdEvent.Type.PAUSED,handler:i},{eventName:t.AdEvent.Type.RESUMED,handler:r},{eventName:t.AdEvent.Type.COMPLETE,handler:a},{eventName:t.AdEvent.Type.VOLUME_CHANGED,handler:s},{eventName:t.AdEvent.Type.VOLUME_MUTED,handler:c},{eventName:t.AdEvent.Type.CONTENT_RESUME_REQUESTED,handler:o}];v.forEach(function(t){e.addEventListener(t.eventName,t.handler)}),this.setVideoModel=function(e){d=e},this.setAdActivityNotifier=function(e){h=e},this.setActive=function(e){e!==m&&(m=e,m&&l())},this.unobserve=function(){clearInterval(p),v.forEach(function(t){e.removeEventListener(t.eventName,t.handler)})}}function r(e){var t=!1,n=e.getVolume();this.play=function(){t&&e.resume()},this.pause=function(){t&&e.pause()},this.setPosition=function(){},this.gotoLive=function(){},this.setVolume=function(t){e.setVolume(t)},this.setIsMuted=function(t){t?(n=e.getVolume(),e.setVolume(0)):e.setVolume(n)},this.setActive=function(e){e!==t&&(t=e)}}e.exports={AdVideoObserver:n,AdVideoUpdater:r}},function(e,t,n){"use strict";var r="PlaybackKeyboardShortcuts",i=n(7),o=i.get(r),a={moduleName:r,dependencies:{videoEngine:null,appContainer:null,userActivity:null,configuration:"playbackKeyboardShortcuts"},init:function(e){function t(t){var n=r[t.keyCode];if(n)try{n(t),o.debug("Keyboard shortcut executed."),e.userActivity.nudge(),t.preventDefault()}catch(i){o.error("Keyboard shortcut for code "+t.keyCode+" failed.",i)}}function n(e){e&&Object.getOwnPropertyNames(e).forEach(function(t){Array.isArray(e[t])&&u[t]&&e[t].forEach(function(e){r[e]=u[t]})})}o.debug("init",e);var r={},i=!1,a=e.configuration.eventName||"keyup",s="document"===e.configuration.scope?document:e.appContainer.baseWidget.view.dom,c=e.videoEngine.videoModel,u={playpause:function(){c.playState!==c.playStates.inactive&&(c.isPaused?c.play():c.pause())},exit:function(){i||e.appContainer.isFullscreen||(o.debug("wasFullscreen/isFullscreen",i,e.appContainer.isFullscreen),e.appContainer.exit())},fullscreen:function(){e.appContainer.setIsFullscreen(!e.appContainer.isFullscreen)},togglemute:function(){c.setIsMuted(!c.isMuted)},decreasevolume:function(){c.setVolume(Math.max(c.volume-.1,0))},increasevolume:function(){c.setVolume(Math.min(c.volume+.1,1))}};return n(e.configuration.playback),e.configuration.reserveEscapeDuringFullscreen&&e.appContainer.observe("isFullscreen",function(e,t){e?(o.debug("Registering wasFullscreen",e),i=!0):window.setTimeout(function(){o.debug("Delayed fullscreen state changed.",e),i=!1},3e3)}),"document"!==e.configuration.scope&&s.setAttribute("tabindex","1"),s.addEventListener(a,t),{api:{},cleanup:function(){o.debug("Detaching keyboard listener."),s.removeEventListener(a,t)}}}};e.exports=a},function(e,t,n){"use strict";var r="videoStateClasses",i=n(7),o=i.get(r),a={moduleName:r,dependencies:{appContainer:null,videoEngine:null},init:function(e){function t(t,r){n[t]&&e.appContainer.removeClass(n[t]),n[t]=r,r&&e.appContainer.addClass(r)}o.debug("init",e);var n={},r=e.videoEngine.videoModel;return r.observe("playState",function(e){t("playState",e)}),r.observe("playMode",function(e){t("playMode",e)}),r.observe("volume",function(e){e<=.33?t("volume","vol33"):e<=.66?t("volume","vol66"):t("volume","vol100")}),e.appContainer.observe("isFullscreen",function(e){t("fullscreenMode",e?"fullscreen":"")}),r.observe("isMuted",function(e){t("muteState",e?"muted":"")}),{api:{},cleanup:function(){Object.getOwnPropertyNames(n).forEach(function(t){e.appContainer.removeClass(n[t])})}}}};e.exports=a},function(e,t,n){"use strict";var r="videoSettings",i=n(7),o=i.get(r),a={moduleName:r,dependencies:{userSettings:null,model:null,videoEngine:null},init:function(e){return o.debug("init",e),e.videoEngine.videoModel.setVolume(e.userSettings.get("volume")||1),e.model.getResources({muted:null,volume:null}).then(function(t){t.volume&&e.videoEngine.videoModel.setVolume(t.volume),t.muted&&e.videoEngine.videoModel.setIsMuted(t.muted)}),{api:{},cleanup:function(){}}}};e.exports=a},function(e,t,n){"use strict";var r="playback",i=n(7),o=i.get(r),a=n(33).constructors.VideoSource,s={moduleName:r,dependencies:{videoEngine:null,model:null,loadEnd:null,loading:null,handleError:null,videoAdProvider:"optional",errorTracker:null},init:function(e){function t(){n||e.loadEnd()}if(o.debug("init",e),!e.videoEngine)throw new Error("No videoengine defined");var n=!1,r=!0,i=e.model.getResources({streamUrl:null,licenseUrl:null,startPosition:null,isLive:null,contentId:null,posterImage:null,supportsAutoplay:null,streamTimingModel:null,tracks:null,fallbackUrls:null}),s=i.then(function(t){t.supportsAutoplay===!1&&e.videoEngine.instance&&e.videoEngine.instance.domElement&&(r=t.supportsAutoplay,e.videoEngine.instance.domElement.poster=t.posterImage);var n=new a(t.streamUrl,t.startPosition,t.isLive,t.licenseUrl,t.fallbackUrls,t.tracks,t.streamTimingModel);n.metadata={contentId:t.contentId};var i=e.videoAdProvider&&e.videoAdProvider.createSession();return e.videoEngine.playbackScheduler.schedule(n,i)});return s.then(function(){t()},function(t){e.errorTracker.track({type:e.errorTracker.types.PLAYBACK_ERROR,severity:e.errorTracker.severity.FATAL,originalError:t}),e.handleError(t,e.handleError.types.fatal)},function(t){switch(o.debug("Playback progress "+t.event,t),t.event){case"mainContentStarted":case"adStarted":r=!0;break;case"bufferingStarted":r&&e.loading.show();break;case"bufferingEnded":e.loading.hide();break;case"waitingForUserInteraction":e.loading.hide();break;case"streamError":e.loading.hide(),e.errorTracker.track({type:e.errorTracker.types.STREAM_ERROR,severity:e.errorTracker.severity.FATAL,originalError:t.error}),e.handleError(t.error,e.handleError.types.fatal);break;case"streamWarning":e.errorTracker.track({type:e.errorTracker.types.STREAM_WARNING,severity:e.errorTracker.severity.WARNING,originalError:t.error})}}),{api:{playbackSchedule:s},cleanup:function(){return o.debug("destroy"),n=!0,{playbackSchedule:null}}}}};e.exports=s},function(e,t,n){"use strict";var r="vimond-playback-tracker",i=n(33).scheduleEventTypes,o=n(59),a=n(7),s=a.get(r),c={moduleName:r,dependencies:{model:null,playbackSchedule:null},init:function(e){function t(){r&&a?o.doRequest(r,"POST","payload="+encodeURIComponent(a),{"Content-Type":"application/x-www-form-urlencoded"},null).then(function(e){(e.status>299||e.status<200)&&s.error("Log post request returned with: "+e.status),s.debug("Vimond logging post was sent")},function(e){s.debug("Could not send vimond logging post",e)}):n=!0}s.debug("init",e);var n,r,a,c=e.model.getResources({logUrl:null,logData:null});return c.then(function(e){r=e.logUrl,a=e.logData,n&&t()}),e.playbackSchedule.then(function(e){},function(e){},function(e){switch(e.event){case i.mainContentStarted:t()}}),{api:{},cleanup:function(){s.debug("destroy")}}}};e.exports=c},function(e,t,n){"use strict";var r="videoViewResponder",i=n(26),o=n(7),a=o.get(r),s={moduleName:r,dependencies:{appContainer:null,videoEngine:null,userActivity:null,videoViewClick:"optional",videoViewDoubleClick:"optional"},init:function(e){function t(t){return"click"===t.type&&n?(clearTimeout(n),void(n=null)):("touchend"===t.type&&(clearTimeout(n),n=setTimeout(function(){n=null},3e3)),void(e.videoViewClick&&e.videoViewClick(t)||("playing"==r.playState?r.pause():r.play())))}a.debug("init",e);var n,r=e.videoEngine.videoModel,o=!1,s=new i({className:"click-overlay"});return s.listen({click:t,touchmove:function(){o=!0},touchend:function(i){o?o=!1:i.defaultPrevented||(e.userActivity.isUserActive()||"playing"!=r.playState?t(i):(clearTimeout(n),n=setTimeout(function(){n=null},3e3)))},dblclick:function(t){e.videoViewDoubleClick&&e.videoViewDoubleClick(t)||(e.appContainer.setIsFullscreen(!e.appContainer.isFullscreen),r.play())}}),e.appContainer.baseWidget.addSubWidgets({clickOverlay:s}),{api:{},cleanup:function(){a.debug("destroy"),s.detach()}}}};e.exports=s},function(e,t,n){"use strict";var r="widgets",i=n(131),o=n(133),a=n(7),s=n(26),c=n(168),u=n(169),l=n(170),d=n(171),f=n(172),p=n(173),h=n(180),m=n(184),v=n(185),g=n(187),y=n(188),b=a.get(r),w={moduleName:r,dependencies:{model:null,appContainer:null,videoEngine:null,configuration:"all",userSettings:null,strings:"all"},init:function(e){b.debug("init",e);var t=e.strings,n=e.videoEngine.videoModel,r=new s({className:"overlays"});r.addSubWidgets([new s({key:"sidePanel",className:"side-panel",children:{commentsPanel:new o({className:"comments-panel",widgets:e.appContainer.baseWidget,videoModel:n,appContainer:e.appContainer})}}),new y({key:"videoInfo",className:"videoinfo hidden",videoModel:n,framework:e.configuration.framework||{},title:t.global.close}),new g({key:"playbackInfo",className:"playbackinfo hidden",videoModel:n}),new s({key:"bottomOverlay",className:"bottom-overlay",children:[new s({className:"logo",type:"a",properties:{href:"http://vimond.com",target:"_blank"},children:{logoWatermark:new c}}),new u({key:"playpause",className:"playpause",titles:{on:t.widgets.pause,off:t.widgets.play},classes:{on:"playing",off:"paused"},videoModel:n}),new h({key:"timeline",videoModel:n}),new l({key:"livetoggle",titles:{on:t.widgets.live,off:t.widgets.gotolive},content:"titles",videoModel:n}),new m({key:"timedisplay",duration:0,startPosition:0,videoModel:n}),new v({strings:{label:t.widgets.subtitles,subtitles:t.widgets.subtitles},videoModel:n,userSettings:e.userSettings}),new f({key:"soundtoggle",className:"sound",titles:{on:t.widgets.unmute,off:t.widgets.mute},classes:{on:"muted"},videoModel:n}),new p({key:"volume",className:"volume-container",videoModel:n,userSettings:e.userSettings}),new i({key:"commentstoggle",className:"comments-button",appContainer:e.appContainer,titles:{off:t.widgets.enableComments,on:t.widgets.disableComments},classes:{on:"comments-enabled"}}),new d({key:"fullscreen",className:"fullscreen",titles:{on:t.widgets.exitfullscreen,off:t.widgets.enterfullscreen},appContainer:e.appContainer})]})]);var a=r.getComponents();return a.timedisplay.setTimeline(a.timeline),a.timeline.setTimedisplay(a.timedisplay),a.commentstoggle.setCommentsPanel(a.commentsPanel),e.model.getResources({markers:null,title:null,assetId:null}).then(function(e){e.markers&&a.timeline.addMarkers(e.markers),e.title&&a.videoInfo.setProperty("Title",e.title),e.assetId&&a.videoInfo.setProperty("assetId",e.assetId)}.bind(this)),e.appContainer.baseWidget.addSubWidgets({widgetModule:r}),{api:{},cleanup:function(){r.detach(),r=null}}}};e.exports=w},function(e,t,n){"use strict";function r(e){i.call(this,e);var t;e.appContainer&&this.listen({toggle:function(n){n.detail.newStateOn?(e.appContainer.addClass("show-comments"),t.emit("openPanel")):(e.appContainer.removeClass("show-comments"),t.emit("closePanel"))}}),this.setCommentsPanel=function(e){t=e}}var i=n(132);r.prototype=Object.create(i.prototype),e.exports=r},function(e,t,n){"use strict";function r(e){i.call(this,e),this.addClass("toggle-button"),this.onClass=e.classes&&e.classes.on?e.classes.on:"on",this.offClass=e.classes&&e.classes.off?e.classes.off:"off",this.onTitle=e.titles&&e.titles.on||"",this.offTitle=e.titles&&e.titles.off||"","titles"==e.content?(this.onContent=this.onTitle,this.offContent=this.offTitle):e.content&&e.content.html?(this.htmlInsert=!0,this.onContent=e.content.html.on||e.content.html,this.offContent=e.content.html.off||this.onContent):e.content&&(this.onContent=e.content,this.offContent=this.onContent),this.state=!!e.onByDefault,this.isEnabled=!e.disabledByDefault;var t,n=new CustomEvent("toggle",{detail:{},bubbles:!0}),r=function(e){return"click"===e.type&&t?(clearTimeout(t),void(t=null)):("touchend"===e.type&&(t=setTimeout(function(){t=null},3e3)),void(this.isEnabled&&(n.detail.newStateOn=!this.state,this.setOn(!this.state),this.view.dom.dispatchEvent(n))))}.bind(this);this.view.dom.addEventListener("click",r),this.view.dom.addEventListener("touchend",r),this.setOn=function(e){this.state=e,this.addClass(e?this.onClass:this.offClass),this.removeClass(e?this.offClass:this.onClass),this.view.dom.setAttribute("title",(e?this.onTitle:this.offTitle)||""),this.htmlInsert?this.view.dom.innerHTML=e?this.onContent:this.offContent:this.onContent&&this.offContent&&(this.view.dom.textContent=e?this.onContent:this.offContent),this.view.dom.setAttribute("aria-label",e?this.onTitle:this.offTitle)},this.setIsEnabled=function(e){this.isEnabled=e},this.init=function(){this.setOn(this.state)}}var i=n(26);r.prototype=Object.create(i.prototype),e.exports=r},function(e,t,n){"use strict";function r(e){function t(){function t(){Ye.indexOf("all")>-1?o():y.getFollowing(Re.userId,Oe).then(function(e){e.length>0&&(Re.followingArray=JSON.parse(e),p().then(function(e){o(e)}))})}function o(e){y.getComments(Oe,e).then(function(e){Ce.innerHTML="",Te=JSON.parse(e),Te.forEach(function(e){ke(e);var t=ae(e);Ce.appendChild(t)})})}function p(){for(var e=Re.userId+",",t=0;t<Re.followingArray.length;++t)e+=Re.followingArray[t]+",";return i.fcall(function(){return e.substring(0,e.length-1)})}function h(){Me=n.querySelector(".vimond-connect-footer").getBoundingClientRect().height;var e=document.querySelector(".vimond-player-comments-panel").getBoundingClientRect().height;De=e-Me}function b(e,t){e.onclick=function(e){e.stopPropagation(),W(e)||ce(e,t)}}function w(){var e=a();n.innerHTML=e}function E(){var e=s({user:Re}),t=n.querySelector(".vimond-connect-header-left");t.innerHTML=e}function k(){y.getFollowing(Re.userId,Oe).then(function(e){e.length>0&&(Re.followingArray=JSON.parse(e))}),y.getFollowers(Re.userId,Oe).then(function(e){e.length>0&&(Re.followersArray=JSON.parse(e))})}function S(){var e=window.getComputedStyle(qe).getPropertyValue("width"),t=parseInt(e.substring(0,e.length-2));t>268?(_e.classList.remove("vimond-connect-user-view-narrow"),_e.classList.add("vimond-connect-user-view-wide")):(_e.classList.remove("vimond-connect-user-view-wide"),_e.classList.add("vimond-connect-user-view-narrow"))}function T(e){e.stopPropagation(),_e.style.display="none"}function A(){Ae=document.querySelector("#vimond-connect-comment-input"),Ae.disabled=!0,Ae.placeholder="You must be logged in to comment"}function P(){var e=n.querySelector(".vimond-connect-settings-popup"),t=u();e.innerHTML=t,C(),e.style.display="block"}function x(){Ae=document.querySelector("#vimond-connect-comment-input"),Ae.onkeydown=function(e){G(e)};var e=document.querySelector(".vimond-connect-glyphicons-settings");e.onclick=function(e){e.stopPropagation();var t=n.querySelector(".vimond-connect-settings-popup");"block"==t.style.display?t.style.display="none":P()},Ce=n.querySelector("#vimond-connect-comments"),n.querySelector(".vimond-connect-middle").addEventListener("wheel",H),Pe=n.querySelector("#vimond-connect-new-comments"),Pe.onclick=function(e){K()};var t=n.querySelector("#vimond-connect-drag-side-view");t.onmousedown=function(e){W(e),V(e)},n.onmouseup=function(e){B(e),S()},n.onclick=function(e){if(W(e));else{var t=F(e);if(t){var n=Ie[t.id.substring(23)];e.target.classList.contains("vimond-connect-comment-delete")?Q(n):$(n)}}}}function C(){for(var e=n.getElementsByClassName("vimond-connect-settings-filter-choice"),t=0;t<e.length;++t){var r=e[t];Ye.indexOf(r.innerHTML)>-1&&r.classList.add("vimond-connect-settings-selected"),r.onclick=function(e){e.stopPropagation(),R(e)}}for(var i=n.getElementsByClassName("vimond-connect-settings-size-choice"),t=0;t<i.length;++t){var o=i[t];Ke==o.classList[1].substring(29)&&o.classList.add("vimond-connect-settings-size-selected"),o.onclick=function(e){e.stopPropagation(),O(e)}}}function R(e){var n=e.target.classList[1].substring(38);e.target.classList.contains("vimond-connect-settings-selected")?(e.target.classList.remove("vimond-connect-settings-selected"),Ye.splice(Ye.indexOf(n),1),t()):(e.target.classList.add("vimond-connect-settings-selected"),Ye.push(n),t())}function O(e){for(var t=n.getElementsByClassName("vimond-connect-settings-size-choice"),r=0;r<t.length;++r){var i=t[r];i.classList.remove("vimond-connect-settings-size-selected")}e.target.classList.add("vimond-connect-settings-size-selected");var o=e.target.classList[1].substring(29);Ke=o,M(o)}function M(e){"normal"==e?Fe=0:"large"==e?Fe=1:"x-large"==e&&(Fe=2),Ce.classList.remove("normal"),Ce.classList.remove("large"),Ce.classList.remove("x-large"),Ce.classList.add(e)}function L(e,t){if(t==e)return!0;for(var n=t.parentNode;null!=n;){if(n===e)return!0;n=n.parentNode}return!1}function _(e,t){return"followers"==t?y.getFollowers(e.userId,Oe).then(function(e){return N(e)}):"following"==t?y.getFollowing(e.userId,Oe).then(function(e){return N(e)}):void 0}function N(e){var t,n=[];t=e.length>0?JSON.parse(e):[];for(var r=0;r<t.length;++r){var i=ze[t[r]];i.isFollowing=Re.followingArray.indexOf(i.userId)>-1,i.isSelf=Re.userId===i.userId,n.push(i)}return n}function I(e){var t=f(e);_e.innerHTML=t}function D(e,t){var r=n.querySelector(".vimond-connect-arrow-left");r.onclick=function(n){n.stopPropagation(),le(n,e.templateObj,t)};var i=n.querySelector(".vimond-connect-user-view-close");i.onclick=function(e){T(e)};for(var o=n.getElementsByClassName("vimond-connect-self-user-image"),a=0;a<o.length;++a){var s=o[a];s.onclick=function(t){t.stopPropagation();var n=t.target,r=n.getAttribute("data-userId"),i=ze[r],o={user:i,following:Re.followingArray.indexOf(i.userId)>-1,self:i.userId===Re.userId};le(t,o,e)}}for(var c=n.getElementsByClassName("vimond-connect-user-list-view-entry-name"),a=0;a<c.length;++a){var u=c[a];u.onclick=function(t){t.stopPropagation();var n=t.target,r=n.getAttribute("data-userId"),i=ze[r],o={user:i,following:Re.followingArray.indexOf(i.userId)>-1,self:i.userId===Re.userId};le(t,o,e)}}for(var l=n.getElementsByClassName("vimond-connect-following"),a=0;a<l.length;++a){var d=l[a];d.onclick=function(e){e.stopPropagation();var t=e.target,n=t.id.substring(13),r=ze[n];me(r,t)}}for(var f=n.getElementsByClassName("vimond-connect-add"),a=0;a<f.length;++a){var p=f[a];p.onclick=function(e){e.stopPropagation();var t=e.target,n=t.id.substring(13),r=ze[n];he(r,t)}}}function U(e,t){_(e.user,"followers").then(function(n){var r={users:n,headline:"Followers",user:e.user},i={templateObj:e,listViewObj:r,prev:t};I(r),D(i,t)})}function j(e,t){_(e.user,"following").then(function(n){var r={users:n,headline:"Following",user:e.user},i={templateObj:e,listViewObj:r,prev:t};I(r),D(i,t)})}function F(e){return e.target.classList.contains("vimond-connect-comment")?e.target:e.target.parentNode.classList.contains("vimond-connect-comment")?e.target.parentNode:e.target.parentNode.parentNode.classList.contains("vimond-connect-comment")?e.target.parentNode.parentNode:null}function V(t){var n=e.widgets.view.dom.querySelector(".vimond-player-click-overlay"),r=window.getComputedStyle(n).getPropertyValue("width"),i=parseFloat(r.substring(0,r.length-2));We.classList.add("slide-mode"),He.classList.add("slide-mode"),
qe.classList.add("slide-mode"),document.onmousemove=function(e){q(e,n,i,qe,He,We)}}function B(e){document.onmousemove=function(e){},We.classList.remove("slide-mode"),He.classList.remove("slide-mode"),qe.classList.remove("slide-mode")}function q(e,t,n,r,i,o){var a=t.getBoundingClientRect().left,s=(e.clientX-a)/n,c=100*(1-s),u=100*s;c>100&&(c=100),u>100&&(u=100),r.style.width=c+"%",i.style.width=u+"%",o.style.width=u+"%"}function H(e){e.stopPropagation(),e.preventDefault();var t=Ce.style.transform,n=t.indexOf(","),i=t.indexOf(",",n+1),o=parseInt(t.substring(n+2,i-2)),a=o-e.deltaY,s=Math.floor(r.position);if(a<=De){W(e),e.deltaY<0&&z();var c=re(s);if("null"!==c){var u="#vimond-connect-comment-"+c,l=Ce.querySelector(u);if(l){var d=l.offsetTop,f=l.offsetHeight;a>De-(d+f)?Ce.style.transform="translate3d(0,"+a+"px, 0)":Y()}}}}function W(e){var t=!1,r=n.querySelector(".vimond-connect-confirm-delete");if("block"==r.style.display&&(L(r,e.target)||(r.style.display="none",t=!0)),"flex"==_e.style.display){var i=n.querySelector(".vimond-connect-user-view");L(i,e.target)||(T(e),t=!0)}var o=n.querySelector(".vimond-connect-settings-popup");return"block"==o.style.display&&(L(o,e.target)||(o.style.display="none",t=!0)),t}function z(){Ve=!0,Ce.classList.add("scroll")}function Y(){Ve=!1,Ce.classList.remove("scroll"),Pe.style.opacity=0}function K(){Se(r.position),Y()}function G(e){if(e.stopPropagation(),13==e.keyCode){var t=Ae.value;Ae.value="";var n=r.position,i="PT"+n+"S",o={tenant:"vimond",userId:Re.userId,comment:t,createdTime:(new Date).toISOString(),airingTime:"2015-11-18T08:54:36.000Z",offsetTime:i},a=JSON.stringify(o);y.postComment(a,"2d2276fc-8dd2-11e5-8994-feff819cdc9f",Oe).then(function(e){var t=JSON.parse(e);Ie[t.id]=o,t.offset=Math.floor(t.offsetTime.substring(2,t.offsetTime.length-1)),t.offsetFormatted=J(t.offset),we(t)})}}function J(e){var t="";if(e<60)t="00:",t+=e<10?"0"+e:e;else{var n=Math.floor(e/60),r=e%60;t=n<10?"0"+n+":":n+":",t+=r<10?"0"+r:r}return t}function X(e,t){return Z(e,t)}function Z(e,t){for(var n=0,r=e+1;r<=t;++r){var i=Ne[r];i&&(n+=i.length)}return n}function $(e){r.setPosition(e.offset),xe=e.offset,Y(),Se(e.offset)}function Q(e){z();var t=n.querySelector(".vimond-connect-confirm-delete");ee(t),te(e,t)}function ee(t){var n=c();t.innerHTML=n,t.style.display="block";var r=e.widgets.view.dom.querySelector(".vimond-player-click-overlay"),i=r.getBoundingClientRect().top,o=event.clientY-i,a=event.target||event.srcElement;t.style.left=a.offsetLeft-85+"px",t.style.top=(o-19).toString()+"px"}function te(e,t){var r=n.querySelector(".vimond-connect-confirm");r.onclick=function(n){ne(n,e,t)};var i=n.querySelector(".vimond-connect-cancel");i.onclick=function(e){t.style.display="none"}}function ne(e,r,i){i.style.display="none";var o=n.querySelector("#vimond-connect-comment-"+r.id),a=r.offset,s=Ne[a];if(s.splice(s.indexOf(r.id),1),r.offset==xe){Se(a-1);var c=re(a-1),u=Ie[c];xe=u.offset,Y()}else Se(xe,o.getBoundingClientRect().height);y.deleteComment(r.id,Oe).then(function(){o.style.display="none",t()})}function re(e){for(var t=e;t>0;--t)if(Ne[t]&&Ne[t].length>0){var n=Ne[t];if("[object Array]"===Object.prototype.toString.call(n))return n[n.length-1]}return"null"}function ie(){je||(De=document.querySelector(".vimond-player-comments-panel").getBoundingClientRect().height-Ue,n.querySelector(".vimond-connect-middle").style.height=De)}function oe(e){var t=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],n=new Date,r=new Date(n.getFullYear(),n.getMonth(),n.getDate(),0,0,0),i=Math.floor(n.getTime()-r.getTime()),o=n-e;if(o<18e4)return"just now";if(o<=i)return"today";var e=new Date(e);return e.getDate()+" "+t[e.getMonth()]}function ae(e){e.dateDifference=oe(new Date(e.createdTime));var t=document.createElement("div"),n=l({comment:e});return t.innerHTML=n,b(t.querySelector(".vimond-connect-comment-user-image"),e.userId),b(t.querySelector(".vimond-connect-comment-name"),e.userId),t.classList.add("vimond-connect-comment"),t.id="vimond-connect-comment-"+e.id,t}function se(e){for(var t=!1,n=0;n<Re.followingArray.length;++n)Re.followingArray[n]==e&&(t=!0);return i.fcall(function(){return t})}function ce(e,t){var n=t;if(Re)if(n==Re.userId){var r={user:Re,following:!1,self:!0};le(e,r),ue(e)}else se(n).then(function(t){if(ze[n]){var r=ze[n],i={user:r,following:t,self:!1};le(e,i),ue(e)}else y.getUser(n,Oe).then(function(t){var n=JSON.parse(t);ze[n.userId]=n;var r={user:n,following:t,self:!1};le(e,r),ue(e)})})}function ue(t){_e.style.display="flex";var n=e.widgets.view.dom.querySelector(".vimond-player-click-overlay"),r=t.target||t.srcElement,i=n.getBoundingClientRect().top,o=t.clientY-i,a=qe.offsetWidth,s=qe.offsetHeight,c=_e.offsetWidth,u=_e.offsetHeight;r.offsetLeft+70+c<a?_e.style.left=r.offsetLeft+50+"px":(_e.style.left="auto",_e.style.right="15px"),o+10+u<s?_e.style.top=o+10+"px":(_e.style.top="auto",_e.style.bottom="10px")}function le(e,t,r){r&&r.templateObj&&(t.back=r.templateObj.user);var i=d(t),o=n.querySelector(".vimond-connect-user-view");o.innerHTML=i,de(t,r)}function de(e,t){if(t){var r=n.querySelector(".vimond-connect-arrow-left");r.onclick=function(e){e.stopPropagation();var n=t.listViewObj;I(n),D(t,t.prev)}}for(var i=document.getElementsByClassName("vimond-connect-edit-input"),o=0;o<i.length;++o){var a=i[o];a.onkeydown=function(e){e.stopPropagation(),13==e.keyCode&&fe()},a.onclick=function(e){e.stopPropagation(),"Short description"===a.value&&(a.value="")}}var s=n.querySelector(".vimond-connect-user-edit-confirm");s&&(s.onclick=function(e){fe(e)});var c=n.querySelector(".vimond-connect-user-edit-cancel");c&&(c.onclick=function(e){e.stopPropagation();var t={user:Re,following:!1,self:!0,edit:!1};le(event,t)});var u=n.querySelector(".vimond-connect-user-view-followers");u.onclick=function(n){n.stopPropagation(),U(e,t)};var l=n.querySelector(".vimond-connect-user-view-following");l.onclick=function(n){n.stopPropagation(),j(e,t)};var d=n.querySelector(".vimond-connect-user-view-close");d.onclick=function(e){T(e)};var f=n.querySelector(".vimond-connect-user-view-top-overlay-right-button");Re&&f&&(f.onclick=function(t){var r=n.querySelector(".vimond-connect-user-view-num-followers");f.classList.contains("vimond-connect-button-following")?(t.stopPropagation(),e.following=!1,ge(e.user,f,r)):f.classList.contains("vimond-connect-button-follow")&&(t.stopPropagation(),e.following=!0,ve(e.user,f,r))});var p=n.querySelector(".vimond-connect-profile-edit");p&&(p.onclick=function(e){e.stopPropagation(),pe(e)})}function fe(e){var t=n.querySelector(".vimond-connect-user-view-edit-username").value,r=n.querySelector(".vimond-connect-user-view-edit-description").value;y.postEditUser(Re.userId,t,r,Oe).then(function(e){Re.username=t,Re.description=r;var i=n.querySelector(".vimond-connect-self-user-name");i.innerHTML=t;var o={user:Re,following:!1,self:!0,edit:!1};le(event,o)},function(e){var t=n.querySelector(".vimond-connect-edit-error-box");t.style.opacity=1,t.style.visibility="visible",setTimeout(function(){t.style.opacity=0,setTimeout(function(){t.style.visibility="hidden"},200)},3e3)})}function pe(e){var t={user:Re,following:!1,self:!0,edit:!0};le(e,t)}function he(e,n){Re.followingArray.push(e.userId),t(),y.followUser(Re.userId,e.userId,Oe).then(function(e){Ye.indexOf("all")<0&&t()}),n.classList.remove("vimond-connect-add"),n.classList.add("vimond-connect-following"),n.setAttribute("title","Following"),n.onclick=function(t){t.stopPropagation(),me(e,n)},e.followers++,Re.followees++}function me(e,n){var r=Re.followingArray.indexOf(e.userId);r>-1&&Re.followingArray.splice(r,1),t(),y.unfollowUser(Re.userId,e.userId,Oe).then(function(e){Ye.indexOf("all")<0&&t()}),n.classList.remove("vimond-connect-following"),n.classList.add("vimond-connect-add"),n.setAttribute("title","Follow"),n.onclick=function(t){t.stopPropagation(),he(e,n)},e.followers--,Re.followees--}function ve(e,n,r){Re.followingArray.push(e.userId),y.followUser(Re.userId,e.userId,Oe).then(function(e){Ye.indexOf("all")<0&&t()}),n.classList.remove("vimond-connect-button-follow"),n.classList.add("vimond-connect-button-following");var i=parseInt(r.innerHTML);i++,r.innerHTML=i,Re.followees++,e.followers++}function ge(e,n,r){var i=Re.followingArray.indexOf(e.userId);i>-1&&Re.followingArray.splice(i,1),y.unfollowUser(Re.userId,e.userId,Oe).then(function(e){Ye.indexOf("all")<0&&t()}),n.classList.remove("vimond-connect-button-following"),n.classList.add("vimond-connect-button-follow");var o=parseInt(r.innerHTML);o--,r.innerHTML=o,Re.followees--,e.followers--}function ye(e){Ne[e.offset]?Ne[e.offset].push(e.id):Ne[e.offset]=[e.id]}function be(e){var t="#vimond-connect-comment-"+e.id,n=Ce.querySelector(t);return void 0!=n&&(console.log("Already have the message, going to ignore it"),!0)}function we(e){var t=be(e);if(!t){ke(e,!0);var n=ae(e),r=re(e.offset);if("null"!==r){var i="#vimond-connect-comment-"+r,o=Ce.querySelector(i);o.parentNode.insertBefore(n,o.nextSibling)}else Ce.insertBefore(n,Ce.firstElementChild);ye(e)}}function Ee(e){return e.substring(2,e.length-1)}function ke(e,t){e.offset=Math.floor(Ee(e.offsetTime)),e.offsetFormatted=J(e.offset),Ie[e.id]=e,t||ye(e),e.username?e.userName=e.username:ze[e.userId]?e.userName=ze[e.userId].username:e.userName="Unknown user",e.imageUrl?e.image=e.imageUrl:ze[e.userId]?e.image=ze[e.userId].imageUrl:e.image="/resources/mockdata/images/basicProfileImage.png",Re&&e.userId===Re.userId&&(e.canDelete=!0)}function Se(e,t){var n=Math.floor(e),r=re(n);if("null"!==r){var i="#vimond-connect-comment-"+r,o=Ce.querySelector(i),a=Ie[r];if(xe=a.offset,o){var s=o.getBoundingClientRect(),c=Le.getBoundingClientRect(),u=s.top-c.top,l=o.offsetHeight,d=De-u-l;t&&(d+=t),Ce.style.transform="translate3d(0,"+d+"px, 0)"}}else Ce&&(Ce.style.transform="translate3d(0,"+De+"px, 0)")}var Te,Ae,Pe,xe,Ce,Re,Oe,Me,Le,_e,Ne={},Ie={},De=500,Ue=50,je=!1,Fe=0,Ve=!1,Be=0,qe=n,He=e.widgets.view.dom.querySelector(".vimond-player-video"),We=g.view.dom.querySelector(".vimond-player-bottom-overlay"),ze={},Ye=["all"],Ke="normal";je=v.isFullscreen;var Ge=a();n.innerHTML=Ge;var _e=n.querySelector(".vimond-connect-user-view");m.addResizeListener(n,function(e){S()});var Je,Xe=localStorage.getItem("fbUser");if(w(),m.addResizeListener(n,function(e){S()}),Xe){var Ze=JSON.parse(Xe);Ze.user&&Ze.user.id?(Oe=Ze.user.accessToken,Je=Ze.user,y.getUsers(Oe).then(function(e){for(var r=JSON.parse(e),i=0;i<r.length;++i){var o=r[i];ze[o.userId]=o,o.userId==Je.id&&(Re=o,Re.followingArray=[],Re.followersArray=[],k(),E(),b(n.querySelector(".vimond-connect-self-user-image"),Re.userId),b(n.querySelector(".vimond-connect-self-user-name"),Re.userId),t())}})):A()}else A();return"complete"===document.readyState?(h(),He=e.widgets.view.dom.querySelector(".vimond-player-video"),We=g.view.dom.querySelector(".vimond-player-bottom-overlay"),_e=n.querySelector(".vimond-connect-user-view"),Le=n.querySelector("#vimond-connect-comments"),je=v.isFullscreen,x(),S()):window.addEventListener("onload",function(){x()},!1),v.observe("isFullscreen",function(e){qe.style.width="25%",He.style.width="75%",We.style.width="75%",W()}),r.observe("position",function(e){var t=Math.floor(e);if(v.isFullscreen!=je&&(je=v.isFullscreen,ie()),h(),n.querySelector(".vimond-connect-middle").style.height=De,Ve){if(Be=X(xe,t),Be>0){var r=n.querySelector("#vimond-connect-num-new-comments");r.innerHTML=""+Be;var i=n.querySelector("#vimond-connect-new-comments-text");1==Be?i.innerHTML=" new comment":i.innerHTML=" new comments",Pe.style.opacity=.8}}else Se(e)}),{insertPushedComment:we}}var n,r,v,g,y=new p,b=new h,w={className:e.className,children:{commentList:new o({className:"comment-list"})}};o.call(this,w),this.addClass("comments-panel"),this.listen({openPanel:function(i){n=this.view.dom,r=e.videoModel,v=e.appContainer,g=e.widgets.widgetModule,b.testAndSubscribe(t());var o=n,a=e.widgets.view.dom.querySelector(".vimond-player-video"),s=g.view.dom.querySelector(".vimond-player-bottom-overlay");o.style.width="25%",a.style.width="75%",s.style.width="75%"},closePanel:function(){var t=n,r=e.widgets.view.dom.querySelector(".vimond-player-video"),i=g.view.dom.querySelector(".vimond-player-bottom-overlay");t.style.width="0%",r.style.width="100%",i.style.width="100%"}})}var i=n(4),o=n(26),a=n(134),s=n(154),c=n(155),u=n(156),l=n(157),d=n(158),f=n(159),p=n(160),h=n(161),m=n(112);r.prototype=Object.create(o.prototype),e.exports=r},function(e,t,n){var r=n(135);e.exports=(r["default"]||r).template({compiler:[7,">= 4.0.0"],main:function(e,t,n,r,i){return'<link href=\'https://fonts.googleapis.com/css?family=Open+Sans:400,300\' rel=\'stylesheet\' type=\'text/css\'>\n<div id="vimond-connect-side-panel">\n    <div class="vimond-connect-user-view vimond-connect-user-view-wide"></div>\n    <div id="vimond-connect-drag-side-view"></div>\n    <div class="vimond-connect-header">\n        <div class="vimond-connect-header-left">\n\n        </div>\n        <div class="vimond-connect-header-right">\n            <div class="vimond-connect-settings-popup"></div>\n            <!--span id="vimond-connect-header-resize" class="glyphicons glyphicons-text-size" title="Resize"></span-->\n            <span class="glyphicons vimond-connect-glyphicons-settings" title="Settings"></span>\n        </div>\n    </div>\n    <div class="vimond-connect-middle">\n        <div class="vimond-connect-confirm-delete"></div>\n        <div id="vimond-connect-comments" class="vimond-connect-comments normal">\n\n        </div>\n    </div>\n    <div class="vimond-connect-footer">\n        <div id="vimond-connect-new-comments">\n            <span class="vimond-connect-new-comments-writing">\n                <span id="vimond-connect-num-new-comments"></span><span id="vimond-connect-new-comments-text"> new comments</span>\n            </span>\n            <span id="vimond-connect-new-comments-icon" class="glyphicons glyphicons-chevron-down" title="New Comments"></span>\n        </div>\n        <input id="vimond-connect-comment-input" type="text" placeholder="Type your comment here">\n    </div>\n</div>\n'},useData:!0})},function(e,t,n){e.exports=n(136)["default"]},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function o(){var e=new s.HandlebarsEnvironment;return p.extend(e,s),e.SafeString=u["default"],e.Exception=d["default"],e.Utils=p,e.escapeExpression=p.escapeExpression,e.VM=m,e.template=function(t){return m.template(t,e)},e}t.__esModule=!0;var a=n(137),s=i(a),c=n(151),u=r(c),l=n(139),d=r(l),f=n(138),p=i(f),h=n(152),m=i(h),v=n(153),g=r(v),y=o();y.create=o,g["default"](y),y["default"]=y,t["default"]=y,e.exports=t["default"]},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t,n){this.helpers=e||{},this.partials=t||{},this.decorators=n||{},c.registerDefaultHelpers(this),u.registerDefaultDecorators(this)}t.__esModule=!0,t.HandlebarsEnvironment=i;var o=n(138),a=n(139),s=r(a),c=n(140),u=n(148),l=n(150),d=r(l),f="4.0.5";t.VERSION=f;var p=7;t.COMPILER_REVISION=p;var h={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:"== 1.x.x",5:"== 2.0.0-alpha.x",6:">= 2.0.0-beta.1",7:">= 4.0.0"};t.REVISION_CHANGES=h;var m="[object Object]";i.prototype={constructor:i,logger:d["default"],log:d["default"].log,registerHelper:function(e,t){if(o.toString.call(e)===m){if(t)throw new s["default"]("Arg not supported with multiple helpers");o.extend(this.helpers,e)}else this.helpers[e]=t},unregisterHelper:function(e){delete this.helpers[e]},registerPartial:function(e,t){if(o.toString.call(e)===m)o.extend(this.partials,e);else{if("undefined"==typeof t)throw new s["default"]('Attempting to register a partial called "'+e+'" as undefined');this.partials[e]=t}},unregisterPartial:function(e){delete this.partials[e]},registerDecorator:function(e,t){if(o.toString.call(e)===m){if(t)throw new s["default"]("Arg not supported with multiple decorators");o.extend(this.decorators,e)}else this.decorators[e]=t},unregisterDecorator:function(e){delete this.decorators[e]}};var v=d["default"].log;t.log=v,t.createFrame=o.createFrame,t.logger=d["default"]},function(e,t){"use strict";function n(e){return l[e]}function r(e){for(var t=1;t<arguments.length;t++)for(var n in arguments[t])Object.prototype.hasOwnProperty.call(arguments[t],n)&&(e[n]=arguments[t][n]);return e}function i(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1}function o(e){if("string"!=typeof e){if(e&&e.toHTML)return e.toHTML();if(null==e)return"";if(!e)return e+"";e=""+e}return f.test(e)?e.replace(d,n):e}function a(e){return!e&&0!==e||!(!m(e)||0!==e.length)}function s(e){var t=r({},e);return t._parent=e,t}function c(e,t){return e.path=t,e}function u(e,t){return(e?e+".":"")+t}t.__esModule=!0,t.extend=r,t.indexOf=i,t.escapeExpression=o,t.isEmpty=a,t.createFrame=s,t.blockParams=c,t.appendContextPath=u;var l={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;","=":"&#x3D;"},d=/[&<>"'`=]/g,f=/[&<>"'`=]/,p=Object.prototype.toString;t.toString=p;var h=function(e){return"function"==typeof e};h(/x/)&&(t.isFunction=h=function(e){return"function"==typeof e&&"[object Function]"===p.call(e)}),t.isFunction=h;var m=Array.isArray||function(e){return!(!e||"object"!=typeof e)&&"[object Array]"===p.call(e)};t.isArray=m},function(e,t){"use strict";function n(e,t){var i=t&&t.loc,o=void 0,a=void 0;i&&(o=i.start.line,a=i.start.column,e+=" - "+o+":"+a);for(var s=Error.prototype.constructor.call(this,e),c=0;c<r.length;c++)this[r[c]]=s[r[c]];Error.captureStackTrace&&Error.captureStackTrace(this,n),i&&(this.lineNumber=o,this.column=a)}t.__esModule=!0;var r=["description","fileName","lineNumber","message","name","number","stack"];n.prototype=new Error,t["default"]=n,e.exports=t["default"]},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e){a["default"](e),c["default"](e),l["default"](e),f["default"](e),h["default"](e),v["default"](e),y["default"](e)}t.__esModule=!0,t.registerDefaultHelpers=i;var o=n(141),a=r(o),s=n(142),c=r(s),u=n(143),l=r(u),d=n(144),f=r(d),p=n(145),h=r(p),m=n(146),v=r(m),g=n(147),y=r(g)},function(e,t,n){"use strict";t.__esModule=!0;var r=n(138);t["default"]=function(e){e.registerHelper("blockHelperMissing",function(t,n){var i=n.inverse,o=n.fn;if(t===!0)return o(this);if(t===!1||null==t)return i(this);if(r.isArray(t))return t.length>0?(n.ids&&(n.ids=[n.name]),e.helpers.each(t,n)):i(this);if(n.data&&n.ids){var a=r.createFrame(n.data);a.contextPath=r.appendContextPath(n.data.contextPath,n.name),n={data:a}}return o(t,n)})},e.exports=t["default"]},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}t.__esModule=!0;var i=n(138),o=n(139),a=r(o);t["default"]=function(e){e.registerHelper("each",function(e,t){function n(t,n,o){u&&(u.key=t,u.index=n,u.first=0===n,u.last=!!o,l&&(u.contextPath=l+t)),c+=r(e[t],{data:u,blockParams:i.blockParams([e[t],t],[l+t,null])})}if(!t)throw new a["default"]("Must pass iterator to #each");var r=t.fn,o=t.inverse,s=0,c="",u=void 0,l=void 0;if(t.data&&t.ids&&(l=i.appendContextPath(t.data.contextPath,t.ids[0])+"."),i.isFunction(e)&&(e=e.call(this)),t.data&&(u=i.createFrame(t.data)),e&&"object"==typeof e)if(i.isArray(e))for(var d=e.length;s<d;s++)s in e&&n(s,s,s===e.length-1);else{var f=void 0;for(var p in e)e.hasOwnProperty(p)&&(void 0!==f&&n(f,s-1),f=p,s++);void 0!==f&&n(f,s-1,!0)}return 0===s&&(c=o(this)),c})},e.exports=t["default"]},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}t.__esModule=!0;var i=n(139),o=r(i);t["default"]=function(e){e.registerHelper("helperMissing",function(){if(1!==arguments.length)throw new o["default"]('Missing helper: "'+arguments[arguments.length-1].name+'"')})},e.exports=t["default"]},function(e,t,n){"use strict";t.__esModule=!0;var r=n(138);t["default"]=function(e){e.registerHelper("if",function(e,t){return r.isFunction(e)&&(e=e.call(this)),!t.hash.includeZero&&!e||r.isEmpty(e)?t.inverse(this):t.fn(this)}),e.registerHelper("unless",function(t,n){return e.helpers["if"].call(this,t,{fn:n.inverse,inverse:n.fn,hash:n.hash})})},e.exports=t["default"]},function(e,t){"use strict";t.__esModule=!0,t["default"]=function(e){e.registerHelper("log",function(){for(var t=[void 0],n=arguments[arguments.length-1],r=0;r<arguments.length-1;r++)t.push(arguments[r]);var i=1;null!=n.hash.level?i=n.hash.level:n.data&&null!=n.data.level&&(i=n.data.level),t[0]=i,e.log.apply(e,t)})},e.exports=t["default"]},function(e,t){"use strict";t.__esModule=!0,t["default"]=function(e){e.registerHelper("lookup",function(e,t){return e&&e[t]})},e.exports=t["default"]},function(e,t,n){"use strict";t.__esModule=!0;var r=n(138);t["default"]=function(e){e.registerHelper("with",function(e,t){r.isFunction(e)&&(e=e.call(this));var n=t.fn;if(r.isEmpty(e))return t.inverse(this);var i=t.data;return t.data&&t.ids&&(i=r.createFrame(t.data),i.contextPath=r.appendContextPath(t.data.contextPath,t.ids[0])),n(e,{data:i,blockParams:r.blockParams([e],[i&&i.contextPath])})})},e.exports=t["default"]},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e){a["default"](e)}t.__esModule=!0,t.registerDefaultDecorators=i;var o=n(149),a=r(o)},function(e,t,n){"use strict";t.__esModule=!0;var r=n(138);t["default"]=function(e){e.registerDecorator("inline",function(e,t,n,i){var o=e;return t.partials||(t.partials={},o=function(i,o){var a=n.partials;n.partials=r.extend({},a,t.partials);var s=e(i,o);return n.partials=a,s}),t.partials[i.args[0]]=i.fn,o})},e.exports=t["default"]},function(e,t,n){"use strict";t.__esModule=!0;var r=n(138),i={methodMap:["debug","info","warn","error"],level:"info",lookupLevel:function(e){if("string"==typeof e){var t=r.indexOf(i.methodMap,e.toLowerCase());e=t>=0?t:parseInt(e,10)}return e},log:function(e){if(e=i.lookupLevel(e),"undefined"!=typeof console&&i.lookupLevel(i.level)<=e){var t=i.methodMap[e];console[t]||(t="log");for(var n=arguments.length,r=Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];console[t].apply(console,r)}}};t["default"]=i,e.exports=t["default"]},function(e,t){"use strict";function n(e){this.string=e}t.__esModule=!0,n.prototype.toString=n.prototype.toHTML=function(){return""+this.string},t["default"]=n,e.exports=t["default"]},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function o(e){var t=e&&e[0]||1,n=g.COMPILER_REVISION;if(t!==n){if(t<n){var r=g.REVISION_CHANGES[n],i=g.REVISION_CHANGES[t];throw new v["default"]("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+r+") or downgrade your runtime to an older version ("+i+").")}throw new v["default"]("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+e[1]+").")}}function a(e,t){function n(n,r,i){i.hash&&(r=h.extend({},r,i.hash),i.ids&&(i.ids[0]=!0)),n=t.VM.resolvePartial.call(this,n,r,i);var o=t.VM.invokePartial.call(this,n,r,i);if(null==o&&t.compile&&(i.partials[i.name]=t.compile(n,e.compilerOptions,t),o=i.partials[i.name](r,i)),null!=o){if(i.indent){for(var a=o.split("\n"),s=0,c=a.length;s<c&&(a[s]||s+1!==c);s++)a[s]=i.indent+a[s];o=a.join("\n")}return o}throw new v["default"]("The partial "+i.name+" could not be compiled when running in runtime-only mode")}function r(t){function n(t){return""+e.main(i,t,i.helpers,i.partials,a,c,s)}var o=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],a=o.data;r._setup(o),!o.partial&&e.useData&&(a=d(t,a));var s=void 0,c=e.useBlockParams?[]:void 0;return e.useDepths&&(s=o.depths?t!==o.depths[0]?[t].concat(o.depths):o.depths:[t]),(n=f(e.main,n,i,o.depths||[],a,c))(t,o)}if(!t)throw new v["default"]("No environment passed to template");if(!e||!e.main)throw new v["default"]("Unknown template object: "+typeof e);e.main.decorator=e.main_d,t.VM.checkRevision(e.compiler);var i={strict:function(e,t){if(!(t in e))throw new v["default"]('"'+t+'" not defined in '+e);return e[t]},lookup:function(e,t){for(var n=e.length,r=0;r<n;r++)if(e[r]&&null!=e[r][t])return e[r][t]},lambda:function(e,t){return"function"==typeof e?e.call(t):e},escapeExpression:h.escapeExpression,invokePartial:n,fn:function(t){var n=e[t];return n.decorator=e[t+"_d"],n},programs:[],program:function(e,t,n,r,i){var o=this.programs[e],a=this.fn(e);return t||i||r||n?o=s(this,e,a,t,n,r,i):o||(o=this.programs[e]=s(this,e,a)),o},data:function(e,t){for(;e&&t--;)e=e._parent;return e},merge:function(e,t){var n=e||t;return e&&t&&e!==t&&(n=h.extend({},t,e)),n},noop:t.VM.noop,compilerInfo:e.compiler};return r.isTop=!0,r._setup=function(n){n.partial?(i.helpers=n.helpers,i.partials=n.partials,i.decorators=n.decorators):(i.helpers=i.merge(n.helpers,t.helpers),e.usePartial&&(i.partials=i.merge(n.partials,t.partials)),(e.usePartial||e.useDecorators)&&(i.decorators=i.merge(n.decorators,t.decorators)))},r._child=function(t,n,r,o){if(e.useBlockParams&&!r)throw new v["default"]("must pass block params");if(e.useDepths&&!o)throw new v["default"]("must pass parent depths");return s(i,t,e[t],n,0,r,o)},r}function s(e,t,n,r,i,o,a){function s(t){var i=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],s=a;return a&&t!==a[0]&&(s=[t].concat(a)),n(e,t,e.helpers,e.partials,i.data||r,o&&[i.blockParams].concat(o),s)}return s=f(n,s,e,a,r,o),s.program=t,s.depth=a?a.length:0,s.blockParams=i||0,s}function c(e,t,n){return e?e.call||n.name||(n.name=e,e=n.partials[e]):e="@partial-block"===n.name?n.data["partial-block"]:n.partials[n.name],e}function u(e,t,n){n.partial=!0,n.ids&&(n.data.contextPath=n.ids[0]||n.data.contextPath);var r=void 0;if(n.fn&&n.fn!==l&&(n.data=g.createFrame(n.data),r=n.data["partial-block"]=n.fn,r.partials&&(n.partials=h.extend({},n.partials,r.partials))),void 0===e&&r&&(e=r),void 0===e)throw new v["default"]("The partial "+n.name+" could not be found");if(e instanceof Function)return e(t,n)}function l(){return""}function d(e,t){return t&&"root"in t||(t=t?g.createFrame(t):{},t.root=e),t}function f(e,t,n,r,i,o){if(e.decorator){var a={};t=e.decorator(t,a,n,r&&r[0],i,o,r),h.extend(t,a)}return t}t.__esModule=!0,t.checkRevision=o,t.template=a,t.wrapProgram=s,t.resolvePartial=c,t.invokePartial=u,t.noop=l;var p=n(138),h=i(p),m=n(139),v=r(m),g=n(137)},function(e,t){(function(n){"use strict";t.__esModule=!0,t["default"]=function(e){var t="undefined"!=typeof n?n:window,r=t.Handlebars;e.noConflict=function(){return t.Handlebars===e&&(t.Handlebars=r),e}},e.exports=t["default"]}).call(t,function(){return this}())},function(e,t,n){var r=n(135);e.exports=(r["default"]||r).template({compiler:[7,">= 4.0.0"],main:function(e,t,n,r,i){var o,a=e.lambda,s=e.escapeExpression;return'<img class="vimond-connect-self-user-image"src='+s(a(null!=(o=null!=t?t.user:t)?o.imageUrl:o,t))+'>\n<span class="vimond-connect-self-user-name">'+s(a(null!=(o=null!=t?t.user:t)?o.username:o,t))+"</span>"},useData:!0})},function(e,t,n){var r=n(135);e.exports=(r["default"]||r).template({compiler:[7,">= 4.0.0"],main:function(e,t,n,r,i){return'<span class="vimond-connect-confirm-delete-text">Delete comment?</span>\n<div class="vimond-connect-confirm-buttons">\n    <span class="glyphicons vimond-connect-confirm" title="Confirm"></span>\n    <span class="glyphicons vimond-connect-cancel" title="Cancel"></span>\n</div>'},useData:!0})},function(e,t,n){var r=n(135);e.exports=(r["default"]||r).template({compiler:[7,">= 4.0.0"],main:function(e,t,n,r,i){return'<div class="vimond-connect-settings-headline">Settings</div>\n<div class="vimond-connect-settings-body">\n    <div class="vimond-connect-settings-element vimond-connect-settings-body-filter">\n        <div class="vimond-connect-settings-text">Get comments from</div>\n        <div class="vimond-connect-settings-filter-choices">\n            <div class="vimond-connect-settings-filter-choice vimond-connect-settings-filter-choice-friends">friends</div>\n            <div class="vimond-connect-settings-filter-choice vimond-connect-settings-filter-choice-all">all</div>\n        </div>\n    </div>\n    <div class="vimond-connect-settings-element vimond-connect-settings-body-font-size">\n        <div class="vimond-connect-settings-text">Font size</div>\n        <div class="vimond-connect-settings-size-choices">\n            <div class="vimond-connect-settings-size-choice vimond-connect-settings-size-normal" title="Normal">A</div>\n            <div class="vimond-connect-settings-size-choice vimond-connect-settings-size-large" title="Large">A</div>\n            <div class="vimond-connect-settings-size-choice vimond-connect-settings-size-x-large" title="X-large">A</div>\n        </div>\n    </div>\n</div>'},useData:!0})},function(e,t,n){var r=n(135);e.exports=(r["default"]||r).template({1:function(e,t,n,r,i){return'        <span class="glyphicons vimond-connect-comment-delete" title="Delete"></span>\n'},compiler:[7,">= 4.0.0"],main:function(e,t,n,r,i){var o,a=e.lambda,s=e.escapeExpression;return'<img src="'+s(a(null!=(o=null!=t?t.comment:t)?o.image:o,t))+'" class="vimond-connect-comment-user-image">\n<div class="vimond-connect-comment-information">\n    <div class="vimond-connect-comment-title">\n        <div class="vimond-connect-comment-title-left">\n            <h3 class="vimond-connect-comment-name">'+s(a(null!=(o=null!=t?t.comment:t)?o.userName:o,t))+'</h3>\n            <span class="vimond-connect-comment-player-time">'+s(a(null!=(o=null!=t?t.comment:t)?o.offsetFormatted:o,t))+'</span>\n        </div>\n        <div class="vimond-connect-comment-title-right">\n            <span class="vimond-connect-comment-time-from-now">'+s(a(null!=(o=null!=t?t.comment:t)?o.dateDifference:o,t))+'</span>\n        </div>\n    </div>\n    <div class="vimond-connect-comment-text">\n        '+s(a(null!=(o=null!=t?t.comment:t)?o.comment:o,t))+"\n    </div>\n"+(null!=(o=n["if"].call(null!=t?t:{},null!=(o=null!=t?t.comment:t)?o.canDelete:o,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i}))?o:"")+"</div>"},useData:!0})},function(e,t,n){var r=n(135);e.exports=(r["default"]||r).template({1:function(e,t,n,r,i){return'<span class="glyphicons vimond-connect-arrow-left" title="Back"></span>\n'},3:function(e,t,n,r,i){var o;return'                <form>\n                    <input class="vimond-connect-edit-input vimond-connect-user-view-edit-username" type="text" name="username" value="'+e.escapeExpression(e.lambda(null!=(o=null!=t?t.user:t)?o.username:o,t))+'">\n                    <br>\n'+(null!=(o=n["if"].call(null!=t?t:{},null!=(o=null!=t?t.user:t)?o.description:o,{name:"if",hash:{},fn:e.program(4,i,0),inverse:e.program(6,i,0),data:i}))?o:"")+"                </form>\n"},4:function(e,t,n,r,i){var o;return'                    <input class="vimond-connect-edit-input vimond-connect-user-view-edit-description" type="text" name="description" value="'+e.escapeExpression(e.lambda(null!=(o=null!=t?t.user:t)?o.description:o,t))+'">\n'},6:function(e,t,n,r,i){return'                    <input class="vimond-connect-edit-input vimond-connect-user-view-edit-description" type="text" name="description" value="Short description">\n'},8:function(e,t,n,r,i){var o,a=e.lambda,s=e.escapeExpression;return'                <div class="vimond-connect-user-view-top-overlay-left-headline">'+s(a(null!=(o=null!=t?t.user:t)?o.username:o,t))+'</div>\n                <div class="vimond-connect-user-view-top-overlay-left-description">'+s(a(null!=(o=null!=t?t.user:t)?o.description:o,t))+"</div>\n"},10:function(e,t,n,r,i){var o;return null!=(o=n["if"].call(null!=t?t:{},null!=t?t.edit:t,{name:"if",hash:{},fn:e.program(11,i,0),inverse:e.program(13,i,0),data:i}))?o:""},11:function(e,t,n,r,i){
return'                        <div class="vimond-connect-user-edit-confirm-buttons">\n                            <span class="glyphicons vimond-connect-user-edit-cancel" title="Cancel"></span>\n                            <span class="glyphicons vimond-connect-user-edit-confirm" title="Confirm"></span>\n                        </div>\n'},13:function(e,t,n,r,i){return'                        <div class="vimond-connect-overlay-right-edit">\n                            <span class="glyphicons vimond-connect-profile-edit" title="Edit profile"></span>\n                        </div>\n'},15:function(e,t,n,r,i){var o;return null!=(o=n["if"].call(null!=t?t:{},null!=t?t.following:t,{name:"if",hash:{},fn:e.program(16,i,0),inverse:e.program(18,i,0),data:i}))?o:""},16:function(e,t,n,r,i){return'                        <div class="vimond-connect-user-view-top-overlay-right-button vimond-connect-button-following"></div>\n'},18:function(e,t,n,r,i){return'                        <div class="vimond-connect-user-view-top-overlay-right-button vimond-connect-button-follow"></div>\n'},compiler:[7,">= 4.0.0"],main:function(e,t,n,r,i){var o,a=null!=t?t:{},s=e.lambda,c=e.escapeExpression;return'<span class="glyphicons vimond-connect-user-view-close" title="Close"></span>\n<span class="vimond-connect-user-view-close-background"></span>\n'+(null!=(o=n["if"].call(a,null!=t?t.back:t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i}))?o:"")+'</div>\n<div class="vimond-connect-user-view-top">\n    <img src="'+c(s(null!=(o=null!=t?t.user:t)?o.imageUrl:o,t))+'?height=500&width=500" class="vimond-connect-user-view-image">\n    <div class="vimond-connect-user-view-top-overlay"></div>\n    <div class="vimond-connect-user-view-top-overlay-content">\n        <div class="vimond-connect-user-view-top-overlay-left">\n'+(null!=(o=n["if"].call(a,null!=t?t.edit:t,{name:"if",hash:{},fn:e.program(3,i,0),inverse:e.program(8,i,0),data:i}))?o:"")+'        </div>\n            <div class="vimond-connect-user-view-top-overlay-right">\n                <div class="vimond-connect-edit-error-box">\n                    <div class="vimond-connect-edit-error-message">\n                        <div class="vimond-connect-edit-error-left">\n                            <span class="glyphicons vimond-connect-user-edit-error" title="Cancel"></span>\n                            <span class="vimond-connect-user-edit-error-background"></span>\n                        </div>\n                        <div class="vimond-connect-edit-error-right">\n                            <div class="vimond-connect-edit-error-headline">So sorry!</div>\n                            <div class="vimond-connect-edit-error-text">We were not able to save your changes. Please try again or come back later.</div>\n                        </div>\n                    </div>\n                </div>\n'+(null!=(o=n["if"].call(a,null!=t?t.self:t,{name:"if",hash:{},fn:e.program(10,i,0),inverse:e.program(15,i,0),data:i}))?o:"")+'            </div>\n    </div>\n</div>\n<div class="vimond-connect-user-view-bottom">\n    <div class="vimond-connect-user-view-bottom-box vimond-connect-user-view-following">\n        <div class="vimond-connect-user-view-bottom-box-title">Following</div>\n        <div class="vimond-connect-user-view-bottom-box-number vimond-connect-user-view-num-following">'+c(s(null!=(o=null!=t?t.user:t)?o.followees:o,t))+'</div>\n    </div>\n    <div class="vimond-connect-user-view-bottom-box vimond-connect-user-view-followers">\n        <div class="vimond-connect-user-view-bottom-box-title">Followers</div>\n        <div class="vimond-connect-user-view-bottom-box-number vimond-connect-user-view-num-followers">'+c(s(null!=(o=null!=t?t.user:t)?o.followers:o,t))+'</div>\n    </div>\n    <div class="vimond-connect-user-view-bottom-box">\n        <div class="vimond-connect-user-view-bottom-box-title">Comments</div>\n        <div class="vimond-connect-user-view-bottom-box-number">'+c(s(null!=(o=null!=t?t.user:t)?o.messagesCounter:o,t))+"</div>\n    </div>\n</div>\n\n"},useData:!0})},function(e,t,n){var r=n(135);e.exports=(r["default"]||r).template({1:function(e,t,n,r,i){var o,a=e.lambda,s=e.escapeExpression;return'        <div class="vimond-connect-user-list-view-entry">\n            <img data-userId="'+s(a(null!=t?t.userId:t,t))+'" class="vimond-connect-self-user-image" src='+s(a(null!=t?t.imageUrl:t,t))+'>\n            <div class="vimond-connect-user-list-view-entry-text">\n                <div data-userId="'+s(a(null!=t?t.userId:t,t))+'" class="vimond-connect-user-list-view-entry-name">'+s(a(null!=t?t.username:t,t))+'</div>\n                <div class="vimond-connect-user-list-view-entry-description">'+s(a(null!=t?t.description:t,t))+'</div>\n            </div>\n            <div class="vimond-connect-user-list-view-entry-add">\n'+(null!=(o=n.unless.call(null!=t?t:{},null!=t?t.isSelf:t,{name:"unless",hash:{},fn:e.program(2,i,0),inverse:e.noop,data:i}))?o:"")+"            </div>\n        </div>\n"},2:function(e,t,n,r,i){var o;return null!=(o=n["if"].call(null!=t?t:{},null!=t?t.isFollowing:t,{name:"if",hash:{},fn:e.program(3,i,0),inverse:e.program(5,i,0),data:i}))?o:""},3:function(e,t,n,r,i){return'                        <span id="following-id-'+e.escapeExpression(e.lambda(null!=t?t.userId:t,t))+'" class="glyphicons vimond-connect-following" title="Following"></span>\n'},5:function(e,t,n,r,i){return'                        <span id="following-id-'+e.escapeExpression(e.lambda(null!=t?t.userId:t,t))+'" class="glyphicons vimond-connect-add" title="Follow"></span>\n'},compiler:[7,">= 4.0.0"],main:function(e,t,n,r,i){var o,a,s=null!=t?t:{};return'<div class="vimond-connect-user-list-view-header">\n    <span class="glyphicons vimond-connect-arrow-left" title="Back"></span>\n    <span class="glyphicons vimond-connect-user-view-close vimond-connect-user-view-close-grey-header" title="Close"></span>\n    <span class="vimond-connect-user-list-view-header-headline">'+e.escapeExpression((a=null!=(a=n.headline||(null!=t?t.headline:t))?a:n.helperMissing,"function"==typeof a?a.call(s,{name:"headline",hash:{},data:i}):a))+'</span>\n</div>\n<div class="vimond-connect-user-list-view-body">\n'+(null!=(o=n.each.call(s,null!=t?t.users:t,{name:"each",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i}))?o:"")+"</div>\n\n"},useData:!0})},function(e,t,n){"use strict";var r=n(4),i=n(7).get("connect-api"),o=function(){function e(){return p("/config").then(function(e){var t=JSON.parse(e);i.info("[connect] got config "+JSON.stringify(t)+"from GET /config"),g=t.vimondConnectCommentServiceURL||g,y=t.vimondUserServiceURL||y},function(e){i.warn("[connect] failed retrieving config",e)})}function t(e,t){var n=b+"/comment/asset/2d2276fc-8dd2-11e5-8994-feff819cdc9f";return t&&(n+="?userIds="+t),p(n,e)}function n(e,t,n){return h(e,g+"/comment/asset/"+t,n)}function o(e,t,n,r){var i=y+"/user/"+e+"/update?username="+encodeURI(t)+"&description="+encodeURI(n);return h({},i,r)}function a(e,t){return p(y+"/user/"+e+"/info",t)}function s(e){return p(y+"/search/user",e)}function c(e,t){return p(y+"/user/"+e+"/following",t)}function u(e,t){return p(y+"/user/"+e+"/followers",t)}function l(e,t,n){return m({},y+"/user/"+e+"/following/"+t,n)}function d(e,t,n){return v(y+"/user/"+e+"/following/"+t,n)}function f(e,t){return v(g+"/comment/"+e,t)}function p(e,t){var n=r.defer(),i=new XMLHttpRequest;return i.open("GET",e,!0),i.setRequestHeader("Authorization","Bearer "+t),i.onreadystatechange=function(){4===i.readyState&&(i.status>=200&&i.status<300?n.resolve(i.responseText):n.reject(new Error("error")))},i.send(),n.promise}function h(e,t,n){var i=r.defer(),o=new XMLHttpRequest;return o.open("POST",t,!0),o.setRequestHeader("Content-type","application/json"),o.setRequestHeader("Authorization","Bearer "+n),o.onreadystatechange=function(){4===o.readyState&&(o.status>=200&&o.status<300?i.resolve(o.responseText):i.reject(new Error("error")))},o.send(e),i.promise}function m(e,t,n){var i=r.defer(),o=new XMLHttpRequest;return o.open("PUT",t,!0),o.setRequestHeader("Content-type","application/json"),o.setRequestHeader("Authorization","Bearer "+n),o.onreadystatechange=function(){4===o.readyState&&(o.status>=200&&o.status<300?i.resolve(o.responseText):i.reject(new Error("error")))},o.send(e),i.promise}function v(e,t){var n=r.defer(),i=new XMLHttpRequest;return i.open("DELETE",e,!0),i.setRequestHeader("Authorization","Bearer "+t),i.onreadystatechange=function(){4===i.readyState&&(i.status>=200&&i.status<300?n.resolve(i.responseText):n.reject(new Error("error")))},i.send(),n.promise}var g="http://vimond-connect-comment.ha:8144",y="http://vimond-user-service.ha:8142",b="https://vimond-connect.ha.dev.vops.io";return e(),{postComment:n,getComments:t,getUser:a,getFollowing:c,getFollowers:u,followUser:l,unfollowUser:d,getUsers:s,deleteComment:f,postEditUser:o}};e.exports=o},function(e,t,n){"use strict";var r=n(162),i=function(){function e(e){"WebSocket"in window?(console.log("WebSocket is supported by your Browser!"),t(e)):console.log("WebSocket is NOT supported by your Browser!")}function t(e){var t="video-comments";r(n+"/user","access","access432").then(function(i){var o=JSON.parse(i);console.log("Got user json from backend: %j",o);var a=o.user.accessToken;r(n+"/config","access","access432").then(function(n){var r=JSON.parse(n).eventserviceWebsocketURI,i=r+"/websocket/comments?topics="+t+"&access_token="+a;console.log("Connecting to eventservice at %s",i);var o=new WebSocket(i);o.onopen=function(){console.log("Established websocket connection")},o.onmessage=function(t){var n=JSON.parse(t.data);console.log("Received push msg: %j",n),e.insertPushedComment(n.comment)},o.onclose=function(){console.log("Websocket connection is closed.")}})})}var n="";return{testAndSubscribe:e}};e.exports=i},function(e,t,n){(function(t){"use strict";var r=n(167);e.exports=function(e,n,i){var o=r.defer(),a=new XMLHttpRequest;return a.open("GET",e,!0),a.withCredentials=!0,a.setRequestHeader("Content-type","application/json"),a.setRequestHeader("Authorization","Basic "+new t(n+":"+i).toString("base64")),a.onreadystatechange=function(){4===a.readyState&&(200===a.status?o.resolve(a.responseText):o.reject(new Error("error")))},a.send(),o.promise}}).call(t,n(163).Buffer)},function(e,t,n){(function(e,r){/*!
	 * The buffer module from node.js, for the browser.
	 *
	 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
	 * @license  MIT
	 */
"use strict";function i(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(t){return!1}}function o(){return e.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function a(t,n){if(o()<n)throw new RangeError("Invalid typed array length");return e.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(n),t.__proto__=e.prototype):(null===t&&(t=new e(n)),t.length=n),t}function e(t,n,r){if(!(e.TYPED_ARRAY_SUPPORT||this instanceof e))return new e(t,n,r);if("number"==typeof t){if("string"==typeof n)throw new Error("If encoding is specified then the first argument must be a string");return l(this,t)}return s(this,t,n,r)}function s(e,t,n,r){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?p(e,t,n,r):"string"==typeof t?d(e,t,n):h(e,t)}function c(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function u(e,t,n,r){return c(t),t<=0?a(e,t):void 0!==n?"string"==typeof r?a(e,t).fill(n,r):a(e,t).fill(n):a(e,t)}function l(t,n){if(c(n),t=a(t,n<0?0:0|m(n)),!e.TYPED_ARRAY_SUPPORT)for(var r=0;r<n;++r)t[r]=0;return t}function d(t,n,r){if("string"==typeof r&&""!==r||(r="utf8"),!e.isEncoding(r))throw new TypeError('"encoding" must be a valid string encoding');var i=0|g(n,r);t=a(t,i);var o=t.write(n,r);return o!==i&&(t=t.slice(0,o)),t}function f(e,t){var n=t.length<0?0:0|m(t.length);e=a(e,n);for(var r=0;r<n;r+=1)e[r]=255&t[r];return e}function p(t,n,r,i){if(n.byteLength,r<0||n.byteLength<r)throw new RangeError("'offset' is out of bounds");if(n.byteLength<r+(i||0))throw new RangeError("'length' is out of bounds");return n=void 0===r&&void 0===i?new Uint8Array(n):void 0===i?new Uint8Array(n,r):new Uint8Array(n,r,i),e.TYPED_ARRAY_SUPPORT?(t=n,t.__proto__=e.prototype):t=f(t,n),t}function h(t,n){if(e.isBuffer(n)){var r=0|m(n.length);return t=a(t,r),0===t.length?t:(n.copy(t,0,0,r),t)}if(n){if("undefined"!=typeof ArrayBuffer&&n.buffer instanceof ArrayBuffer||"length"in n)return"number"!=typeof n.length||X(n.length)?a(t,0):f(t,n);if("Buffer"===n.type&&Q(n.data))return f(t,n.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function m(e){if(e>=o())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o().toString(16)+" bytes");return 0|e}function v(t){return+t!=t&&(t=0),e.alloc(+t)}function g(t,n){if(e.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var r=t.length;if(0===r)return 0;for(var i=!1;;)switch(n){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return z(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return G(t).length;default:if(i)return z(t).length;n=(""+n).toLowerCase(),i=!0}}function y(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if(n>>>=0,t>>>=0,n<=t)return"";for(e||(e="utf8");;)switch(e){case"hex":return _(this,t,n);case"utf8":case"utf-8":return R(this,t,n);case"ascii":return M(this,t,n);case"latin1":case"binary":return L(this,t,n);case"base64":return C(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return N(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function b(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function w(t,n,r,i,o){if(0===t.length)return-1;if("string"==typeof r?(i=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,isNaN(r)&&(r=o?0:t.length-1),r<0&&(r=t.length+r),r>=t.length){if(o)return-1;r=t.length-1}else if(r<0){if(!o)return-1;r=0}if("string"==typeof n&&(n=e.from(n,i)),e.isBuffer(n))return 0===n.length?-1:E(t,n,r,i,o);if("number"==typeof n)return n=255&n,e.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(t,n,r):Uint8Array.prototype.lastIndexOf.call(t,n,r):E(t,[n],r,i,o);throw new TypeError("val must be string, number or Buffer")}function E(e,t,n,r,i){function o(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}var a=1,s=e.length,c=t.length;if(void 0!==r&&(r=String(r).toLowerCase(),"ucs2"===r||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;a=2,s/=2,c/=2,n/=2}var u;if(i){var l=-1;for(u=n;u<s;u++)if(o(e,u)===o(t,l===-1?0:u-l)){if(l===-1&&(l=u),u-l+1===c)return l*a}else l!==-1&&(u-=u-l),l=-1}else for(n+c>s&&(n=s-c),u=n;u>=0;u--){for(var d=!0,f=0;f<c;f++)if(o(e,u+f)!==o(t,f)){d=!1;break}if(d)return u}return-1}function k(e,t,n,r){n=Number(n)||0;var i=e.length-n;r?(r=Number(r),r>i&&(r=i)):r=i;var o=t.length;if(o%2!==0)throw new TypeError("Invalid hex string");r>o/2&&(r=o/2);for(var a=0;a<r;++a){var s=parseInt(t.substr(2*a,2),16);if(isNaN(s))return a;e[n+a]=s}return a}function S(e,t,n,r){return J(z(t,e.length-n),e,n,r)}function T(e,t,n,r){return J(Y(t),e,n,r)}function A(e,t,n,r){return T(e,t,n,r)}function P(e,t,n,r){return J(G(t),e,n,r)}function x(e,t,n,r){return J(K(t,e.length-n),e,n,r)}function C(e,t,n){return 0===t&&n===e.length?Z.fromByteArray(e):Z.fromByteArray(e.slice(t,n))}function R(e,t,n){n=Math.min(e.length,n);for(var r=[],i=t;i<n;){var o=e[i],a=null,s=o>239?4:o>223?3:o>191?2:1;if(i+s<=n){var c,u,l,d;switch(s){case 1:o<128&&(a=o);break;case 2:c=e[i+1],128===(192&c)&&(d=(31&o)<<6|63&c,d>127&&(a=d));break;case 3:c=e[i+1],u=e[i+2],128===(192&c)&&128===(192&u)&&(d=(15&o)<<12|(63&c)<<6|63&u,d>2047&&(d<55296||d>57343)&&(a=d));break;case 4:c=e[i+1],u=e[i+2],l=e[i+3],128===(192&c)&&128===(192&u)&&128===(192&l)&&(d=(15&o)<<18|(63&c)<<12|(63&u)<<6|63&l,d>65535&&d<1114112&&(a=d))}}null===a?(a=65533,s=1):a>65535&&(a-=65536,r.push(a>>>10&1023|55296),a=56320|1023&a),r.push(a),i+=s}return O(r)}function O(e){var t=e.length;if(t<=ee)return String.fromCharCode.apply(String,e);for(var n="",r=0;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=ee));return n}function M(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(127&e[i]);return r}function L(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(e[i]);return r}function _(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);for(var i="",o=t;o<n;++o)i+=W(e[o]);return i}function N(e,t,n){for(var r=e.slice(t,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function I(e,t,n){if(e%1!==0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function D(t,n,r,i,o,a){if(!e.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(n>o||n<a)throw new RangeError('"value" argument is out of bounds');if(r+i>t.length)throw new RangeError("Index out of range")}function U(e,t,n,r){t<0&&(t=65535+t+1);for(var i=0,o=Math.min(e.length-n,2);i<o;++i)e[n+i]=(t&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function j(e,t,n,r){t<0&&(t=4294967295+t+1);for(var i=0,o=Math.min(e.length-n,4);i<o;++i)e[n+i]=t>>>8*(r?i:3-i)&255}function F(e,t,n,r,i,o){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function V(e,t,n,r,i){return i||F(e,t,n,4,3.4028234663852886e38,-3.4028234663852886e38),$.write(e,t,n,r,23,4),n+4}function B(e,t,n,r,i){return i||F(e,t,n,8,1.7976931348623157e308,-1.7976931348623157e308),$.write(e,t,n,r,52,8),n+8}function q(e){if(e=H(e).replace(te,""),e.length<2)return"";for(;e.length%4!==0;)e+="=";return e}function H(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function W(e){return e<16?"0"+e.toString(16):e.toString(16)}function z(e,t){t=t||1/0;for(var n,r=e.length,i=null,o=[],a=0;a<r;++a){if(n=e.charCodeAt(a),n>55295&&n<57344){if(!i){if(n>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(a+1===r){(t-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(t-=3)>-1&&o.push(239,191,189),i=n;continue}n=(i-55296<<10|n-56320)+65536}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((t-=1)<0)break;o.push(n)}else if(n<2048){if((t-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function Y(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}function K(e,t){for(var n,r,i,o=[],a=0;a<e.length&&!((t-=2)<0);++a)n=e.charCodeAt(a),r=n>>8,i=n%256,o.push(i),o.push(r);return o}function G(e){return Z.toByteArray(q(e))}function J(e,t,n,r){for(var i=0;i<r&&!(i+n>=t.length||i>=e.length);++i)t[i+n]=e[i];return i}function X(e){return e!==e}var Z=n(164),$=n(165),Q=n(166);t.Buffer=e,t.SlowBuffer=v,t.INSPECT_MAX_BYTES=50,e.TYPED_ARRAY_SUPPORT=void 0!==r.TYPED_ARRAY_SUPPORT?r.TYPED_ARRAY_SUPPORT:i(),t.kMaxLength=o(),e.poolSize=8192,e._augment=function(t){return t.__proto__=e.prototype,t},e.from=function(e,t,n){return s(null,e,t,n)},e.TYPED_ARRAY_SUPPORT&&(e.prototype.__proto__=Uint8Array.prototype,e.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&e[Symbol.species]===e&&Object.defineProperty(e,Symbol.species,{value:null,configurable:!0})),e.alloc=function(e,t,n){return u(null,e,t,n)},e.allocUnsafe=function(e){return l(null,e)},e.allocUnsafeSlow=function(e){return l(null,e)},e.isBuffer=function(e){return!(null==e||!e._isBuffer)},e.compare=function(t,n){if(!e.isBuffer(t)||!e.isBuffer(n))throw new TypeError("Arguments must be Buffers");if(t===n)return 0;for(var r=t.length,i=n.length,o=0,a=Math.min(r,i);o<a;++o)if(t[o]!==n[o]){r=t[o],i=n[o];break}return r<i?-1:i<r?1:0},e.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},e.concat=function(t,n){if(!Q(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return e.alloc(0);var r;if(void 0===n)for(n=0,r=0;r<t.length;++r)n+=t[r].length;var i=e.allocUnsafe(n),o=0;for(r=0;r<t.length;++r){var a=t[r];if(!e.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(i,o),o+=a.length}return i},e.byteLength=g,e.prototype._isBuffer=!0,e.prototype.swap16=function(){var e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)b(this,t,t+1);return this},e.prototype.swap32=function(){var e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)b(this,t,t+3),b(this,t+1,t+2);return this},e.prototype.swap64=function(){var e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)b(this,t,t+7),b(this,t+1,t+6),b(this,t+2,t+5),b(this,t+3,t+4);return this},e.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?R(this,0,e):y.apply(this,arguments)},e.prototype.equals=function(t){if(!e.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===e.compare(this,t)},e.prototype.inspect=function(){var e="",n=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(e+=" ... ")),"<Buffer "+e+">"},e.prototype.compare=function(t,n,r,i,o){if(!e.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===n&&(n=0),void 0===r&&(r=t?t.length:0),void 0===i&&(i=0),void 0===o&&(o=this.length),n<0||r>t.length||i<0||o>this.length)throw new RangeError("out of range index");if(i>=o&&n>=r)return 0;if(i>=o)return-1;if(n>=r)return 1;if(n>>>=0,r>>>=0,i>>>=0,o>>>=0,this===t)return 0;for(var a=o-i,s=r-n,c=Math.min(a,s),u=this.slice(i,o),l=t.slice(n,r),d=0;d<c;++d)if(u[d]!==l[d]){a=u[d],s=l[d];break}return a<s?-1:s<a?1:0},e.prototype.includes=function(e,t,n){return this.indexOf(e,t,n)!==-1},e.prototype.indexOf=function(e,t,n){return w(this,e,t,n,!0)},e.prototype.lastIndexOf=function(e,t,n){return w(this,e,t,n,!1)},e.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t=0|t,isFinite(n)?(n=0|n,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-t;if((void 0===n||n>i)&&(n=i),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return k(this,e,t,n);case"utf8":case"utf-8":return S(this,e,t,n);case"ascii":return T(this,e,t,n);case"latin1":case"binary":return A(this,e,t,n);case"base64":return P(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return x(this,e,t,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},e.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var ee=4096;e.prototype.slice=function(t,n){var r=this.length;t=~~t,n=void 0===n?r:~~n,t<0?(t+=r,t<0&&(t=0)):t>r&&(t=r),n<0?(n+=r,n<0&&(n=0)):n>r&&(n=r),n<t&&(n=t);var i;if(e.TYPED_ARRAY_SUPPORT)i=this.subarray(t,n),i.__proto__=e.prototype;else{var o=n-t;i=new e(o,(void 0));for(var a=0;a<o;++a)i[a]=this[a+t]}return i},e.prototype.readUIntLE=function(e,t,n){e=0|e,t=0|t,n||I(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r},e.prototype.readUIntBE=function(e,t,n){e=0|e,t=0|t,n||I(e,t,this.length);for(var r=this[e+--t],i=1;t>0&&(i*=256);)r+=this[e+--t]*i;return r},e.prototype.readUInt8=function(e,t){return t||I(e,1,this.length),this[e]},e.prototype.readUInt16LE=function(e,t){return t||I(e,2,this.length),this[e]|this[e+1]<<8},e.prototype.readUInt16BE=function(e,t){return t||I(e,2,this.length),this[e]<<8|this[e+1]},e.prototype.readUInt32LE=function(e,t){return t||I(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},e.prototype.readUInt32BE=function(e,t){return t||I(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},e.prototype.readIntLE=function(e,t,n){e=0|e,t=0|t,n||I(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return i*=128,r>=i&&(r-=Math.pow(2,8*t)),r},e.prototype.readIntBE=function(e,t,n){e=0|e,t=0|t,n||I(e,t,this.length);for(var r=t,i=1,o=this[e+--r];r>0&&(i*=256);)o+=this[e+--r]*i;return i*=128,o>=i&&(o-=Math.pow(2,8*t)),o},e.prototype.readInt8=function(e,t){return t||I(e,1,this.length),128&this[e]?(255-this[e]+1)*-1:this[e]},e.prototype.readInt16LE=function(e,t){t||I(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},e.prototype.readInt16BE=function(e,t){t||I(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},e.prototype.readInt32LE=function(e,t){return t||I(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},e.prototype.readInt32BE=function(e,t){return t||I(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},e.prototype.readFloatLE=function(e,t){return t||I(e,4,this.length),$.read(this,e,!0,23,4)},e.prototype.readFloatBE=function(e,t){return t||I(e,4,this.length),$.read(this,e,!1,23,4)},e.prototype.readDoubleLE=function(e,t){return t||I(e,8,this.length),$.read(this,e,!0,52,8)},e.prototype.readDoubleBE=function(e,t){return t||I(e,8,this.length),$.read(this,e,!1,52,8)},e.prototype.writeUIntLE=function(e,t,n,r){if(e=+e,t=0|t,n=0|n,!r){var i=Math.pow(2,8*n)-1;D(this,e,t,n,i,0)}var o=1,a=0;for(this[t]=255&e;++a<n&&(o*=256);)this[t+a]=e/o&255;return t+n},e.prototype.writeUIntBE=function(e,t,n,r){if(e=+e,t=0|t,n=0|n,!r){var i=Math.pow(2,8*n)-1;D(this,e,t,n,i,0)}var o=n-1,a=1;for(this[t+o]=255&e;--o>=0&&(a*=256);)this[t+o]=e/a&255;return t+n},e.prototype.writeUInt8=function(t,n,r){return t=+t,n=0|n,r||D(this,t,n,1,255,0),e.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[n]=255&t,n+1},e.prototype.writeUInt16LE=function(t,n,r){return t=+t,n=0|n,r||D(this,t,n,2,65535,0),e.TYPED_ARRAY_SUPPORT?(this[n]=255&t,this[n+1]=t>>>8):U(this,t,n,!0),n+2},e.prototype.writeUInt16BE=function(t,n,r){return t=+t,n=0|n,r||D(this,t,n,2,65535,0),e.TYPED_ARRAY_SUPPORT?(this[n]=t>>>8,this[n+1]=255&t):U(this,t,n,!1),n+2},e.prototype.writeUInt32LE=function(t,n,r){return t=+t,n=0|n,r||D(this,t,n,4,4294967295,0),e.TYPED_ARRAY_SUPPORT?(this[n+3]=t>>>24,this[n+2]=t>>>16,this[n+1]=t>>>8,this[n]=255&t):j(this,t,n,!0),n+4},e.prototype.writeUInt32BE=function(t,n,r){return t=+t,n=0|n,r||D(this,t,n,4,4294967295,0),e.TYPED_ARRAY_SUPPORT?(this[n]=t>>>24,this[n+1]=t>>>16,this[n+2]=t>>>8,this[n+3]=255&t):j(this,t,n,!1),n+4},e.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t=0|t,!r){var i=Math.pow(2,8*n-1);D(this,e,t,n,i-1,-i)}var o=0,a=1,s=0;for(this[t]=255&e;++o<n&&(a*=256);)e<0&&0===s&&0!==this[t+o-1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+n},e.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t=0|t,!r){var i=Math.pow(2,8*n-1);D(this,e,t,n,i-1,-i)}var o=n-1,a=1,s=0;for(this[t+o]=255&e;--o>=0&&(a*=256);)e<0&&0===s&&0!==this[t+o+1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+n},e.prototype.writeInt8=function(t,n,r){return t=+t,n=0|n,r||D(this,t,n,1,127,-128),e.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[n]=255&t,n+1},e.prototype.writeInt16LE=function(t,n,r){return t=+t,n=0|n,r||D(this,t,n,2,32767,-32768),e.TYPED_ARRAY_SUPPORT?(this[n]=255&t,this[n+1]=t>>>8):U(this,t,n,!0),n+2},e.prototype.writeInt16BE=function(t,n,r){return t=+t,n=0|n,r||D(this,t,n,2,32767,-32768),e.TYPED_ARRAY_SUPPORT?(this[n]=t>>>8,this[n+1]=255&t):U(this,t,n,!1),n+2},e.prototype.writeInt32LE=function(t,n,r){return t=+t,n=0|n,r||D(this,t,n,4,2147483647,-2147483648),e.TYPED_ARRAY_SUPPORT?(this[n]=255&t,this[n+1]=t>>>8,this[n+2]=t>>>16,this[n+3]=t>>>24):j(this,t,n,!0),n+4},e.prototype.writeInt32BE=function(t,n,r){return t=+t,n=0|n,r||D(this,t,n,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),e.TYPED_ARRAY_SUPPORT?(this[n]=t>>>24,this[n+1]=t>>>16,this[n+2]=t>>>8,this[n+3]=255&t):j(this,t,n,!1),n+4},e.prototype.writeFloatLE=function(e,t,n){return V(this,e,t,!0,n)},e.prototype.writeFloatBE=function(e,t,n){return V(this,e,t,!1,n)},e.prototype.writeDoubleLE=function(e,t,n){return B(this,e,t,!0,n)},e.prototype.writeDoubleBE=function(e,t,n){return B(this,e,t,!1,n)},e.prototype.copy=function(t,n,r,i){if(r||(r=0),i||0===i||(i=this.length),n>=t.length&&(n=t.length),n||(n=0),i>0&&i<r&&(i=r),i===r)return 0;if(0===t.length||0===this.length)return 0;if(n<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),t.length-n<i-r&&(i=t.length-n+r);var o,a=i-r;if(this===t&&r<n&&n<i)for(o=a-1;o>=0;--o)t[o+n]=this[o+r];else if(a<1e3||!e.TYPED_ARRAY_SUPPORT)for(o=0;o<a;++o)t[o+n]=this[o+r];else Uint8Array.prototype.set.call(t,this.subarray(r,r+a),n);return a},e.prototype.fill=function(t,n,r,i){if("string"==typeof t){if("string"==typeof n?(i=n,n=0,r=this.length):"string"==typeof r&&(i=r,r=this.length),1===t.length){var o=t.charCodeAt(0);o<256&&(t=o)}if(void 0!==i&&"string"!=typeof i)throw new TypeError("encoding must be a string");if("string"==typeof i&&!e.isEncoding(i))throw new TypeError("Unknown encoding: "+i)}else"number"==typeof t&&(t=255&t);if(n<0||this.length<n||this.length<r)throw new RangeError("Out of range index");if(r<=n)return this;n>>>=0,r=void 0===r?this.length:r>>>0,t||(t=0);var a;if("number"==typeof t)for(a=n;a<r;++a)this[a]=t;else{var s=e.isBuffer(t)?t:z(new e(t,i).toString()),c=s.length;for(a=0;a<r-n;++a)this[a+n]=s[a%c]}return this};var te=/[^+\/0-9A-Za-z-_]/g}).call(t,n(163).Buffer,function(){return this}())},function(e,t){"use strict";function n(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");return"="===e[t-2]?2:"="===e[t-1]?1:0}function r(e){return 3*e.length/4-n(e)}function i(e){var t,r,i,o,a,s,c=e.length;a=n(e),s=new l(3*c/4-a),i=a>0?c-4:c;var d=0;for(t=0,r=0;t<i;t+=4,r+=3)o=u[e.charCodeAt(t)]<<18|u[e.charCodeAt(t+1)]<<12|u[e.charCodeAt(t+2)]<<6|u[e.charCodeAt(t+3)],s[d++]=o>>16&255,s[d++]=o>>8&255,s[d++]=255&o;return 2===a?(o=u[e.charCodeAt(t)]<<2|u[e.charCodeAt(t+1)]>>4,s[d++]=255&o):1===a&&(o=u[e.charCodeAt(t)]<<10|u[e.charCodeAt(t+1)]<<4|u[e.charCodeAt(t+2)]>>2,s[d++]=o>>8&255,s[d++]=255&o),s}function o(e){return c[e>>18&63]+c[e>>12&63]+c[e>>6&63]+c[63&e]}function a(e,t,n){for(var r,i=[],a=t;a<n;a+=3)r=(e[a]<<16)+(e[a+1]<<8)+e[a+2],i.push(o(r));return i.join("")}function s(e){for(var t,n=e.length,r=n%3,i="",o=[],s=16383,u=0,l=n-r;u<l;u+=s)o.push(a(e,u,u+s>l?l:u+s));return 1===r?(t=e[n-1],i+=c[t>>2],i+=c[t<<4&63],i+="=="):2===r&&(t=(e[n-2]<<8)+e[n-1],i+=c[t>>10],i+=c[t>>4&63],i+=c[t<<2&63],i+="="),o.push(i),o.join("")}t.byteLength=r,t.toByteArray=i,t.fromByteArray=s;for(var c=[],u=[],l="undefined"!=typeof Uint8Array?Uint8Array:Array,d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",f=0,p=d.length;f<p;++f)c[f]=d[f],u[d.charCodeAt(f)]=f;u["-".charCodeAt(0)]=62,u["_".charCodeAt(0)]=63},function(e,t){t.read=function(e,t,n,r,i){var o,a,s=8*i-r-1,c=(1<<s)-1,u=c>>1,l=-7,d=n?i-1:0,f=n?-1:1,p=e[t+d];for(d+=f,o=p&(1<<-l)-1,p>>=-l,l+=s;l>0;o=256*o+e[t+d],d+=f,l-=8);for(a=o&(1<<-l)-1,o>>=-l,l+=r;l>0;a=256*a+e[t+d],d+=f,l-=8);if(0===o)o=1-u;else{if(o===c)return a?NaN:(p?-1:1)*(1/0);a+=Math.pow(2,r),o-=u}return(p?-1:1)*a*Math.pow(2,o-r)},t.write=function(e,t,n,r,i,o){var a,s,c,u=8*o-i-1,l=(1<<u)-1,d=l>>1,f=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:o-1,h=r?1:-1,m=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=l):(a=Math.floor(Math.log(t)/Math.LN2),t*(c=Math.pow(2,-a))<1&&(a--,c*=2),t+=a+d>=1?f/c:f*Math.pow(2,1-d),t*c>=2&&(a++,c/=2),a+d>=l?(s=0,a=l):a+d>=1?(s=(t*c-1)*Math.pow(2,i),a+=d):(s=t*Math.pow(2,d-1)*Math.pow(2,i),a=0));i>=8;e[n+p]=255&s,p+=h,s/=256,i-=8);for(a=a<<i|s,u+=i;u>0;e[n+p]=255&a,p+=h,a/=256,u-=8);e[n+p-h]|=128*m}},function(e,t){var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},function(e,t,n){(function(t,n){/*!
	 *
	 * Copyright 2009-2012 Kris Kowal under the terms of the MIT
	 * license found at http://github.com/kriskowal/q/raw/master/LICENSE
	 *
	 * With parts by Tyler Close
	 * Copyright 2007-2009 Tyler Close under the terms of the MIT X license found
	 * at http://www.opensource.org/licenses/mit-license.html
	 * Forked at ref_send.js version: 2009-05-11
	 *
	 * With parts by Mark Miller
	 * Copyright (C) 2011 Google Inc.
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 *
	 */
!function(t){"function"==typeof bootstrap?bootstrap("promise",t):e.exports=t()}(function(){"use strict";function e(e){var t=Function.call;return function(){return t.apply(e,arguments)}}function r(e){return e===Object(e)}function i(e){return"[object StopIteration]"===we(e)||e instanceof ue}function o(e,t){if(ae&&t.stack&&"object"==typeof e&&null!==e&&e.stack&&e.stack.indexOf(ke)===-1){for(var n=[],r=t;r;r=r.source)r.stack&&n.unshift(r.stack);n.unshift(e.stack);var i=n.join("\n"+ke+"\n");e.stack=a(i)}}function a(e){for(var t=e.split("\n"),n=[],r=0;r<t.length;++r){var i=t[r];u(i)||s(i)||!i||n.push(i)}return n.join("\n")}function s(e){return e.indexOf("(module.js:")!==-1||e.indexOf("(node.js:")!==-1}function c(e){var t=/at .+ \((.+):(\d+):(?:\d+)\)$/.exec(e);if(t)return[t[1],Number(t[2])];var n=/at ([^ ]+):(\d+):(?:\d+)$/.exec(e);if(n)return[n[1],Number(n[2])];var r=/.*@(.+):(\d+)$/.exec(e);return r?[r[1],Number(r[2])]:void 0}function u(e){var t=c(e);if(!t)return!1;var n=t[0],r=t[1];return n===ce&&r>=le&&r<=Ce}function l(){if(ae)try{throw new Error}catch(e){var t=e.stack.split("\n"),n=t[0].indexOf("@")>0?t[1]:t[2],r=c(n);if(!r)return;return ce=r[0],r[1]}}function d(e,t,n){return function(){return"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(t+" is deprecated, use "+n+" instead.",new Error("").stack),e.apply(e,arguments)}}function f(e){return R(e)}function p(){function e(e){t=e,o.source=e,he(n,function(t,n){fe(function(){e.promiseDispatch.apply(e,n)})},void 0),n=void 0,r=void 0}var t,n=[],r=[],i=ge(p.prototype),o=ge(m.prototype);if(o.promiseDispatch=function(e,i,o){var a=pe(arguments);n?(n.push(a),"when"===i&&o[1]&&r.push(o[1])):fe(function(){t.promiseDispatch.apply(t,a)})},o.valueOf=d(function(){if(n)return o;var e=v(t);return g(e)&&(t=e),e},"valueOf","inspect"),o.inspect=function(){return t?t.inspect():{state:"pending"}},f.longStackSupport&&ae)try{throw new Error}catch(a){o.stack=a.stack.substring(a.stack.indexOf("\n")+1)}return i.promise=o,i.resolve=function(n){t||e(R(n))},i.fulfill=function(n){t||e(C(n))},i.reject=function(n){t||e(x(n))},i.notify=function(e){t||he(r,function(t,n){fe(function(){n(e)})},void 0)},i}function h(e){if("function"!=typeof e)throw new TypeError("resolver must be a function.");var t=p();return q(e,t.resolve,t.reject,t.notify).fail(t.reject),t.promise}function m(e,t,n){void 0===t&&(t=function(e){return x(new Error("Promise does not support operation: "+e))}),void 0===n&&(n=function(){return{state:"unknown"}});var r=ge(m.prototype);if(r.promiseDispatch=function(n,i,o){var a;try{a=e[i]?e[i].apply(r,o):t.call(r,i,o)}catch(s){a=x(s)}n&&n(a)},r.inspect=n,n){var i=n();"rejected"===i.state&&(r.exception=i.reason),r.valueOf=d(function(){var e=n();return"pending"===e.state||"rejected"===e.state?r:e.value})}return r}function v(e){if(g(e)){var t=e.inspect();if("fulfilled"===t.state)return t.value}return e}function g(e){return r(e)&&"function"==typeof e.promiseDispatch&&"function"==typeof e.inspect}function y(e){return r(e)&&"function"==typeof e.then}function b(e){return g(e)&&"pending"===e.inspect().state}function w(e){return!g(e)||"fulfilled"===e.inspect().state}function E(e){return g(e)&&"rejected"===e.inspect().state}function k(){Ae||"undefined"==typeof window||window.Touch||!window.console||console.warn("[Q] Unhandled rejection reasons (should be empty):",Se),Ae=!0}function S(){for(var e=0;e<Se.length;e++){var t=Se[e];t&&"undefined"!=typeof t.stack?console.warn("Unhandled rejection reason:",t.stack):console.warn("Unhandled rejection reason (no stack):",t)}}function T(){Se.length=0,Te.length=0,Ae=!1,Pe||(Pe=!0,"undefined"!=typeof t&&t.on&&t.on("exit",S))}function A(e,t){Pe&&(Te.push(e),Se.push(t),k())}function P(e){if(Pe){var t=me(Te,e);t!==-1&&(Te.splice(t,1),Se.splice(t,1))}}function x(e){var t=m({when:function(t){return t&&P(this),t?t(e):this}},function(){return this},function(){return{state:"rejected",reason:e}});return A(t,e),t}function C(e){return m({when:function(){return e},get:function(t){return e[t]},set:function(t,n){e[t]=n},"delete":function(t){delete e[t]},post:function(t,n){return null===t||void 0===t?e.apply(void 0,n):e[t].apply(e,n)},apply:function(t,n){return e.apply(t,n)},keys:function(){return be(e)}},void 0,function(){return{state:"fulfilled",value:e}})}function R(e){return g(e)?e:y(e)?O(e):C(e)}function O(e){var t=p();return fe(function(){try{e.then(t.resolve,t.reject,t.notify)}catch(n){t.reject(n)}}),t.promise}function M(e){return m({isDef:function(){}},function(t,n){return j(e,t,n)},function(){return R(e).inspect()})}function L(e,t,n,r){return f(e).then(t,n,r)}function _(e,t,n){return L(e,function(e){return W(e).then(function(e){return t.apply(void 0,e)},n)},n)}function N(e){return function(){function t(e,t){var a;if(Ee){try{a=n[e](t)}catch(s){return x(s)}return a.done?a.value:L(a.value,r,o)}try{a=n[e](t)}catch(s){return i(s)?s.value:x(s)}return L(a,r,o)}var n=e.apply(this,arguments),r=t.bind(t,"send"),o=t.bind(t,"throw");return r()}}function I(e){f.done(f.async(e)())}function D(e){throw new ue(e)}function U(e){return function(){return _([this,W(arguments)],function(t,n){return e.apply(t,n)})}}function j(e,t,n){var r=p();return fe(function(){R(e).promiseDispatch(r.resolve,t,n)}),r.promise}function F(e){return function(t){var n=pe(arguments,1);return j(t,e,n)}}function V(e,t){var n=pe(arguments,2);return xe(e,t,n)}function B(e,t){return j(e,"apply",[void 0,t])}function q(e){var t=pe(arguments,1);return B(e,t)}function H(e){var t=pe(arguments,1);return function(){var n=t.concat(pe(arguments));return j(e,"apply",[this,n])}}function W(e){return L(e,function(e){var t=0,n=p();return he(e,function(r,i,o){var a;g(i)&&"fulfilled"===(a=i.inspect()).state?e[o]=a.value:(++t,L(i,function(r){e[o]=r,0===--t&&n.resolve(e)},n.reject))},void 0),0===t&&n.resolve(e),n.promise})}function z(e){return L(e,function(e){return e=ve(e,R),L(W(ve(e,function(e){return L(e,de,de)})),function(){return e})})}function Y(e){return L(e,function(e){return W(ve(e,function(t,n){return L(t,function(t){return e[n]={state:"fulfilled",value:t},e[n]},function(t){return e[n]={state:"rejected",reason:t},e[n]})})).thenResolve(e)})}function K(e,t){return L(e,void 0,t)}function G(e,t){return L(e,void 0,void 0,t)}function J(e,t){return L(e,function(e){return L(t(),function(){return e})},function(e){return L(t(),function(){return x(e)})})}function X(e,n,r,i){var a=function(t){fe(function(){if(o(t,e),!f.onerror)throw t;f.onerror(t)})},s=n||r||i?L(e,n,r,i):e;"object"==typeof t&&t&&t.domain&&(a=t.domain.bind(a)),K(s,a)}function Z(e,t,n){var r=p(),i=setTimeout(function(){r.reject(new Error(n||"Timed out after "+t+" ms"))},t);return L(e,function(e){clearTimeout(i),r.resolve(e)},function(e){clearTimeout(i),r.reject(e)},r.notify),r.promise}function $(e,t){void 0===t&&(t=e,e=void 0);var n=p();return L(e,void 0,void 0,n.notify),setTimeout(function(){n.resolve(e)},t),n.promise}function Q(e,t){var n=pe(t),r=p();return n.push(r.makeNodeResolver()),B(e,n).fail(r.reject),r.promise}function ee(e){var t=pe(arguments,1),n=p();return t.push(n.makeNodeResolver()),B(e,t).fail(n.reject),n.promise}function te(e){var t=pe(arguments,1);return function(){var n=t.concat(pe(arguments)),r=p();return n.push(r.makeNodeResolver()),B(e,n).fail(r.reject),r.promise}}function ne(e,t){var n=pe(arguments,2);return function(){function r(){return e.apply(t,arguments)}var i=n.concat(pe(arguments)),o=p();return i.push(o.makeNodeResolver()),B(r,i).fail(o.reject),o.promise}}function re(e,t,n){var r=pe(n||[]),i=p();return r.push(i.makeNodeResolver()),xe(e,t,r).fail(i.reject),i.promise}function ie(e,t){var n=pe(arguments,2),r=p();return n.push(r.makeNodeResolver()),xe(e,t,n).fail(r.reject),r.promise}function oe(e,t){return t?void e.then(function(e){fe(function(){t(null,e)})},function(e){fe(function(){t(e)})}):e}var ae=!1;try{throw new Error}catch(se){ae=!!se.stack}var ce,ue,le=l(),de=function(){},fe=function(){function e(){for(;r.next;){r=r.next;var t=r.task;r.task=void 0;var n=r.domain;n&&(r.domain=void 0,n.enter());try{t()}catch(i){if(s)throw n&&n.exit(),setTimeout(e,0),n&&n.enter(),i;setTimeout(function(){throw i},0)}n&&n.exit()}o=!1}var r={task:void 0,next:null},i=r,o=!1,a=void 0,s=!1;if(fe=function(e){i=i.next={task:e,domain:s&&t.domain,next:null},o||(o=!0,a())},"undefined"!=typeof t&&t.nextTick)s=!0,a=function(){t.nextTick(e)};else if("function"==typeof n)a="undefined"!=typeof window?n.bind(window,e):function(){n(e)};else if("undefined"!=typeof MessageChannel&&!navigator.userAgent.indexOf("afari")>=0){var c=new MessageChannel;c.port1.onmessage=e,a=function(){c.port2.postMessage(0)}}else a=function(){setTimeout(e,0)};return fe}(),pe=e(Array.prototype.slice),he=e(Array.prototype.reduce||function(e,t){var n=0,r=this.length;if(1===arguments.length)for(;;){if(n in this){t=this[n++];break}if(++n>=r)throw new TypeError}for(;n<r;n++)n in this&&(t=e(t,this[n],n));return t}),me=e(Array.prototype.indexOf||function(e){for(var t=0;t<this.length;t++)if(this[t]===e)return t;return-1}),ve=e(Array.prototype.map||function(e,t){var n=this,r=[];return he(n,function(i,o,a){r.push(e.call(t,o,a,n))},void 0),r}),ge=Object.create||function(e){function t(){}return t.prototype=e,new t},ye=e(Object.prototype.hasOwnProperty),be=Object.keys||function(e){var t=[];for(var n in e)ye(e,n)&&t.push(n);return t},we=e(Object.prototype.toString);ue="undefined"!=typeof ReturnValue?ReturnValue:function(e){this.value=e};var Ee;try{new Function("(function* (){ yield 1; })"),Ee=!0}catch(se){Ee=!1}var ke="From previous event:";f.nextTick=fe,f.longStackSupport=!1,f.defer=p,p.prototype.makeNodeResolver=function(){var e=this;return function(t,n){t?e.reject(t):arguments.length>2?e.resolve(pe(arguments,1)):e.resolve(n)}},f.promise=h,f.makePromise=m,m.prototype.then=function(e,t,n){function r(t){try{return"function"==typeof e?e(t):t}catch(n){return x(n)}}function i(e){if("function"==typeof t){o(e,s);try{return t(e)}catch(n){return x(n)}}return x(e)}function a(e){return"function"==typeof n?n(e):e}var s=this,c=p(),u=!1;return fe(function(){s.promiseDispatch(function(e){u||(u=!0,c.resolve(r(e)))},"when",[function(e){u||(u=!0,c.resolve(i(e)))}])}),s.promiseDispatch(void 0,"when",[void 0,function(e){var t,n=!1;try{t=a(e)}catch(r){if(n=!0,!f.onerror)throw r;f.onerror(r)}n||c.notify(t)}]),c.promise},m.prototype.thenResolve=function(e){return L(this,function(){return e})},m.prototype.thenReject=function(e){return L(this,function(){throw e})},he(["isFulfilled","isRejected","isPending","dispatch","when","spread","get","set","del","delete","post","send","mapply","invoke","mcall","keys","fapply","fcall","fbind","all","allResolved","timeout","delay","catch","finally","fail","fin","progress","done","nfcall","nfapply","nfbind","denodeify","nbind","npost","nsend","nmapply","ninvoke","nmcall","nodeify"],function(e,t){m.prototype[t]=function(){return f[t].apply(f,[this].concat(pe(arguments)))}},void 0),m.prototype.toSource=function(){return this.toString()},m.prototype.toString=function(){return"[object Promise]"},f.nearer=v,f.isPromise=g,f.isPromiseAlike=y,f.isPending=b,f.isFulfilled=w,f.isRejected=E;var Se=[],Te=[],Ae=!1,Pe=!0;f.resetUnhandledRejections=T,f.getUnhandledReasons=function(){return Se.slice()},f.stopUnhandledRejectionTracking=function(){T(),"undefined"!=typeof t&&t.on&&t.removeListener("exit",S),Pe=!1},T(),f.reject=x,f.fulfill=C,f.resolve=R,f.master=M,f.when=L,f.spread=_,f.async=N,f.spawn=I,f["return"]=D,f.promised=U,f.dispatch=j,f.dispatcher=F,f.get=F("get"),f.set=F("set"),f["delete"]=f.del=F("delete");var xe=f.post=F("post");f.mapply=xe,f.send=V,f.invoke=V,f.mcall=V,f.fapply=B,f["try"]=q,f.fcall=q,f.fbind=H,f.keys=F("keys"),f.all=W,f.allResolved=d(z,"allResolved","allSettled"),f.allSettled=Y,f["catch"]=f.fail=K,f.progress=G,f["finally"]=f.fin=J,f.done=X,f.timeout=Z,f.delay=$,f.nfapply=Q,f.nfcall=ee,f.nfbind=te,f.denodeify=f.nfbind,f.nbind=ne,f.npost=re,f.nmapply=re,f.nsend=ie,f.ninvoke=f.nsend,f.nmcall=f.nsend,f.nodeify=oe;var Ce=l();return f})}).call(t,n(5),n(6).setImmediate)},function(e,t,n){"use strict";function r(e){var t={type:"div",className:e&&e.className||""};i.call(this,t),this.addClass("watermark")}var i=n(26);r.prototype=Object.create(i.prototype),e.exports=r},function(e,t,n){"use strict";function r(e){i.call(this,e),e.videoModel&&(e.videoModel.observe("playState",function(e){switch(e){case"playing":this.setOn(!0);break;case"paused":this.setOn(!1)}}.bind(this)),this.listen({toggle:function(t){t.detail.newStateOn?e.videoModel.play():e.videoModel.pause()}}))}var i=n(132);r.prototype=Object.create(i.prototype),e.exports=r},function(e,t,n){"use strict";function r(e){i.call(this,e),this.addClass("livetoggle"),e.videoModel&&(e.videoModel.observe("isAtLivePosition",function(e){this.setIsEnabled(!e),this.setOn(e)}.bind(this)),this.listen({toggle:function(t){t.detail.newStateOn&&e.videoModel.gotoLive()}}))}var i=n(132);r.prototype=Object.create(i.prototype),e.exports=r},function(e,t,n){"use strict";function r(e){i.call(this,e),e.appContainer&&(e.appContainer.observe("isFullscreen",function(e){this.setOn(e)}.bind(this)),this.listen({toggle:function(t){e.appContainer.setIsFullscreen(t.detail.newStateOn)}}))}var i=n(132);r.prototype=Object.create(i.prototype),e.exports=r},function(e,t,n){"use strict";function r(e){i.call(this,e),e.videoModel&&(e.videoModel.observe("isMuted",function(e){this.setOn(e)}.bind(this)),e.content&&e.content.html&&e.videoModel.observe("volume",function(t){t>=.66&&e.content.html.sound3?this.offContent=e.content.html.sound3:t>=.33&&e.content.html.sound2?this.offContent=e.content.html.sound2:e.content.html.sound1&&(this.offContent=e.content.html.sound1),this.setOn(e.videoModel.isMuted)}.bind(this)),this.listen({toggle:function(t){e.videoModel.setIsMuted(t.detail.newStateOn)}}))}var i=n(132);r.prototype=Object.create(i.prototype),e.exports=r},function(e,t,n){"use strict";function r(e){i.call(this,e),this.addSubWidgets([new o({key:"bar",className:"bar-container",vertical:e&&e.vertical||!1}),new a({key:"slider",className:"volume",vertical:e&&e.vertical||!1})]),e.videoModel&&(this.slider.setThumbPos(e.videoModel.volume),this.bar.setProgress(e.videoModel.volume),e.videoModel.observe("volume",function(e){this.slider.setThumbPos(e),this.bar.setProgress(e)}.bind(this)),this.listen({"sliderstart, sliderdrag, sliderchange":function(t){e.videoModel.setVolume(t.detail.positionPercent),e.userSettings&&e.userSettings.set("volume",t.detail.positionPercent)}}))}var i=n(26),o=n(174),a=n(175);r.prototype=Object.create(i.prototype),e.exports=r},function(e,t,n){"use strict";function r(e){i.call(this,e),this.addClass((e.vertical?"vertical-":"")+"progressbar"),this.addSubWidget({progress:new i({className:e.className+"-progress progress"})}),this.name=e.id,this.vertical=!!e.vertical,this.setProgress=function(e){return e<0&&(e=0),e>1&&(e=1),this.vertical?this.progress.view.dom.style.height=100*e+"%":this.progress.view.dom.style.width=100*e+"%",e}}var i=n(26);r.prototype=Object.create(i.prototype),e.exports=r},function(e,t,n){"use strict";function r(e){function t(e){(1==e.which||c)&&(this.isDragging=!0,this.addClass("dragging"),this.lastThumbPos=h(this.view),d.detail.positionPercent=p(m(this.view,e)),this.view.dom.dispatchEvent(d))}function n(e){this.isDragging&&(f.detail.positionPercent=p(m(this.view,e)),f.detail.type=e.type,this.view.dom.dispatchEvent(f),e.preventDefault())}function r(t){(1==t.which||c)&&this.isDragging&&(l.detail.positionPercent=p(m(this.view,t)),e.shadow_thumb&&p(l.detail.positionPercent,this.shadow_thumb.view.dom),this.view.dom.dispatchEvent(l),this.isDragging=!1,this.removeClass("dragging"),t.preventDefault())}function s(e){this.isDragging&&(this.isDragging=!1,this.removeClass("dragging"),p(this.lastThumbPos))}i.call(this,e),this.addClass((e.vertical?"vertical-":"")+"slider"),this.addSubWidget({thumb:new i({className:e.className+"-thumb thumb"})}),e.shadow_thumb&&this.addSubWidget({shadow_thumb:new i({className:e.className+"-shadow-thumb shadow-thumb"})}),this.name=e.id,this.vertical=!!e.vertical,this.position=0,this.isDragging=!1,this.lastThumbPos=0,this.globalListeners={},this.setThumbPos=function(t){this.position=t,p(t,this.thumb.view.dom),e.shadow_thumb&&p(t,this.shadow_thumb.view.dom)};var c="ontouchend"in window,u="onmouseup"in window;c&&(this.listen({touchstart:t}),this.listen({touchmove:n}),this.listen({touchend:r}),a(this.globalListeners,{touchmove:n,touchend:r})),u&&(this.listen({mousedown:t}),this.listen({mousemove:n}),this.listen({mouseup:r}),a(this.globalListeners,{mousemove:n,mouseup:r,mouseleave:s}));var l=new CustomEvent("sliderchange",{detail:{},bubbles:!0}),d=new CustomEvent("sliderstart",{detail:{},bubbles:!0}),f=new CustomEvent("sliderdrag",{detail:{},bubbles:!0}),p=function(e,t){return e<0&&(e=0),e>1&&(e=1),t||(t=this.thumb.view.dom),this.vertical?t.style.bottom=100*e+"%":t.style.left=100*e+"%",e}.bind(this),h=function(e){return this.vertical?(e.dom.offsetHeight-(this.thumb.view.dom.offsetTop+this.thumb.view.dom.offsetHeight/2))/e.dom.offsetHeight:(this.thumb.view.dom.offsetLeft+this.thumb.view.dom.offsetWidth/2)/e.dom.offsetWidth}.bind(this),m=function(e,t){return this.vertical?(e.dom.offsetHeight-o.getPointerPos(t,e.dom).y)/e.dom.offsetHeight:o.getPointerPos(t,e.dom).x/e.dom.offsetWidth}.bind(this)}var i=n(26),o=n(21),a=n(176);r.prototype=Object.create(i.prototype),e.exports=r},function(e,t,n){function r(e,t,n){for(var r=-1,i=a(t),o=i.length;++r<o;){var s=i[r],c=e[s],u=n(c,t[s],s,e,t);(u===u?u===c:c!==c)&&(void 0!==c||s in e)||(e[s]=u)}return e}var i=n(13),o=n(177),a=n(15),s=o(function(e,t,n){return n?r(e,t,n):i(e,t)});e.exports=s},function(e,t,n){function r(e){return a(function(t,n){var r=-1,a=null==t?0:n.length,s=a>2?n[a-2]:void 0,c=a>2?n[2]:void 0,u=a>1?n[a-1]:void 0;for("function"==typeof s?(s=i(s,u,5),a-=2):(s="function"==typeof u?u:void 0,a-=s?1:0),c&&o(n[0],n[1],c)&&(s=a<3?void 0:s,a=1);++r<a;){var l=n[r];l&&e(t,l,s)}return t})}var i=n(20),o=n(178),a=n(179);e.exports=r},function(e,t){function n(e){return function(t){return null==t?void 0:t[e]}}function r(e){return null!=e&&a(l(e))}function i(e,t){return e="number"==typeof e||c.test(e)?+e:-1,t=null==t?u:t,e>-1&&e%1==0&&e<t}function o(e,t,n){if(!s(n))return!1;var o=typeof t;if("number"==o?r(n)&&i(t,n.length):"string"==o&&t in n){var a=n[t];return e===e?e===a:a!==a}return!1}function a(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=u}function s(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}var c=/^\d+$/,u=9007199254740991,l=n("length");e.exports=o},function(e,t){function n(e,t){if("function"!=typeof e)throw new TypeError(r);return t=i(void 0===t?e.length-1:+t||0,0),function(){for(var n=arguments,r=-1,o=i(n.length-t,0),a=Array(o);++r<o;)a[r]=n[t+r];switch(t){case 0:return e.call(this,a);case 1:return e.call(this,n[0],a);case 2:return e.call(this,n[0],n[1],a)}var s=Array(t+1);for(r=-1;++r<t;)s[r]=n[r];return s[t]=a,e.apply(this,s)}}var r="Expected a function",i=Math.max;e.exports=n},function(e,t,n){"use strict";function r(e){c.call(this,e),this.addClass("timeline"),this.position=0,this.liveTime=0,this.duration=e.videoData&&e.videoData.duration?e.videoData.duration:1,this.timeZoneOffset=e.videoData&&e.videoData.timeZoneOffset,this.startPosition=e.videoData&&e.videoData.startPosition?e.videoData.startPosition:0,this.isAtLivePosition=!1,this.markerTypes=[],this.addSubWidgets({progress:new s({id:"timeline",className:"timeline-progressbar"}),slider:new a({id:"timeline",className:"timeline-slider"})}),this.addSubWidgets({markers:new i({videoData:e.videoData,container:this.view.dom})}),this.markerTypes.push(this.markers),e.videoData&&e.videoData.markers&&e.videoData.markers.length>0&&this.markers.addMarkers(e.videoData.markers),this.addCustomMarkers=function(t,n,r){var o={};o[r]=new i({videoData:e.videoData,container:this.view.dom,className:r}),this.addSubWidgets(o),this[r].addMarkers(t,n),this.markerTypes.push(this[r])},this.addMarkers=function(e){this.markers.addMarkers(e)},this.clearMarkers=function(){this.markers.clearMarkers()},this.addSubWidget({timeindicator:new o(this.duration,this.isLive,this.timeZoneOffset,this.view.dom,e.displayTimeshiftOffset)}),this.setDuration=function(e){this.duration=e,this.timeindicator&&(this.timeindicator.duration=e),this.markerTypes.forEach(function(t){t.updateDuration(e)})},this.setPosition=function(e){this.position=e,this.timeindicator&&(this.timeindicator.position=e)},this.setLiveTime=function(e){this.liveTime=e,this.timeindicator&&(this.timeindicator.liveTime=e)},this.setIsAtLivePosition=function(e){this.isAtLivePosition=e},this.setTimeZoneOffset=function(e){this.timeZoneOffset=e,this.timeindicator&&this.timeindicator.setTimeZoneOffset(e)},this.getCorrectedRelativePosition=function(e){var t=this.duration-e<30;return"livedvr"===this.playMode&&this.isAtLivePosition&&t?this.duration:e/this.duration},this.setProgress=function(e){this.progress&&this.progress.setProgress(this.getCorrectedRelativePosition(e))},this.setSlider=function(e){this.slider.setThumbPos(this.getCorrectedRelativePosition(e))},this.init=function(){this.duration>1&&this.setProgress(this.startPosition)};var t;e.videoModel&&(e.videoModel.observe("playMode",function(t){switch(this.playMode=t,t){case"livedvr":this.isLive=!0,this.timeindicator&&(this.timeindicator.isLive=!0),this.slider.reattach(),this.setProgress(e.videoModel.duration);break;case"live":this.isLive=!0,this.timeindicator&&(this.timeindicator.isLive=!0),this.slider.detach(),this.setProgress(e.videoModel.duration);break;case"ondemand":this.isLive=!1,this.timeindicator&&(this.timeindicator.isLive=!1),this.slider.reattach(),this.setProgress(0)}}.bind(this)),e.videoModel.observe("position",function(t){this.slider.isDragging||"live"==this.playMode||(this.setSlider(t),this.setProgress(t),this.setPosition(t)),"live"==this.playMode&&this.setProgress(e.videoModel.duration)}.bind(this)),e.videoModel.observe("absolutePosition",function(e){this.isLive&&(this.setLiveTime(e),this.timeindicator&&this.timeindicator.updateLiveTimeIndicator(e))}.bind(this)),e.videoModel.observe("isAtLivePosition",this.setIsAtLivePosition.bind(this)),e.videoModel.observe("duration",function(t){t>0&&t!==1/0&&!isNaN(t)&&(this.setDuration(t),this.setProgress(e.videoModel.position))}.bind(this)),this.listen({sliderchange:function(t){e.videoModel.setPosition(t.detail.positionPercent*e.videoModel.duration)},"sliderstart, sliderdrag":function(n){t&&t.setProgress(n.detail.positionPercent*e.videoModel.duration),this.setProgress(n.detail.positionPercent*e.videoModel.duration)},"marker.click":function(t){e.videoModel.setPosition(t.detail.marker.timeBegin)}})),this.setTimedisplay=function(e){t=e}}var i=n(181),o=n(183),a=n(175),s=n(174),c=n(26);r.prototype=Object.create(c.prototype),e.exports=r},function(e,t,n){"use strict";function r(e){function t(e,t,n){var r,i=e.offsetLeft,o=t.offsetWidth,a=n.offsetWidth;return r=i<o/2?i:i+o/2>a?o-(a-i):o/2,-r}this.container=e.container,o.call(this,{className:e.className&&e.className+" timeline-markers"||"chapters timeline-markers"}),this.duration=e.videoData&&e.videoData.duration?e.videoData.duration:1,this.markers=[],this.addMarkers=function(e,t){e.forEach(function(e){var n=t||i,r=new n({model:e});this.addSubWidgets(r),this.markers.push(r);var o=this.markers.length-1;r.listen({click:function(e){this.click(o,e)}.bind(this),mouseenter:function(e){this.mouseover(o,e.target)}.bind(this)})},this),this.updateDuration(this.duration)},this.clearMarkers=function(){this.removeAllSubWidgets(),this.markers.length=0},this.removeMarker=function(e){e.removeAllListeners(),this.removeSubWidget(e),this.markers.splice(this.markers.indexOf(e),1)};var n=new CustomEvent("marker.click",{detail:{},bubbles:!0});this.container.addEventListener("sliderdrag",function(e){this.displayClosestMarker(e)}.bind(this)),this.container.addEventListener("sliderchange",function(){this.hideTouchMarkers()}.bind(this)),this.displayClosestMarker=function(e){if("touchmove"===e.detail.type){var t=0,n=0,r=0,i=100;for(var o in this.markers){var a=this.markers[o].timeBegin/this.duration;a<e.detail.positionPercent&&a>n?(t=o,n=a):a>e.detail.positionPercent&&a<i&&(r=o,i=a)}e.detail.positionPercent-n>.05&&(t=null),i-e.detail.positionPercent>.05&&(r=null),t&&r?e.detail.positionPercent-n<i-e.detail.positionPercent?this.showTouchMarker(this.markers[t]):this.showTouchMarker(this.markers[r]):t?this.showTouchMarker(this.markers[t]):r?this.showTouchMarker(this.markers[r]):this.hideTouchMarkers()}},this.showTouchMarker=function(e){if(e)for(var t in this.markers)this.markers[t]===e?(this.markers[t].addClass("showing"),this.addClass("active"),this.mouseover(t,e)):this.markers[t].removeClass("showing")},this.hideTouchMarkers=function(){for(var e in this.markers)this.markers[e].removeClass("showing");this.removeClass("active")},this.click=function(e,t){n.detail.marker=this.markers[e],this.isBeingSelected=!1,this.view.dom.dispatchEvent(n),t.stopPropagation()},this.mouseover=function(e,n){var r=n&&n.firstChild,i=r&&r.firstChild;r&&(r.style.marginLeft=t(n,r,this.container)+"px",i&&(i.style.left=n.getBoundingClientRect().left-r.getBoundingClientRect().left-n.offsetWidth/2+"px"))},this.updateDuration=function(e){this.duration=e,this.markers&&this.markers.forEach(function(e,t){var n=e.timeBegin/this.duration;n>1?e.view.dom.style.display="none":(e.view.dom.style.display="",e.view.dom.style.left=100*n+"%")},this)},e.videoData&&e.videoData.markers&&this.addMarkers(e.videoData.markers),this.init=function(){this.updateDuration(this.duration)}}var i=n(182),o=n(26);r.prototype=Object.create(o.prototype),e.exports=r},function(e,t,n){"use strict";function r(e){i.call(this,e),this.setClassName("chapter marker"),this.addSubWidgets({content:new i({className:"chapter-content marker-content",children:{arrow:new i({className:"marker-content-arrow arrow",type:"div"}),img:new i({className:"chapter-content-image",type:"img",properties:{src:e.model.imageUrl,onerror:function(){this.style.display="none"}}}),time:new i({className:"chapter-content-startTime",type:"span",properties:{textContent:o.formatTimeFromSeconds(e.model.timeBegin)}}),title:new i({className:"chapter-content-title",type:"h6",properties:{textContent:e.model.title}})}})}),e.model.text&&this.content.addSubWidget(new i({className:"chapter-content-title",type:"p",properties:{textContent:e.model.text}})),this.content.addSubWidget(new i({className:"bottom-hover-area",type:"div"})),this.timeBegin=e.model.timeBegin}var i=n(26),o=n(21);r.prototype=Object.create(i.prototype),e.exports=r},function(e,t,n){"use strict";function r(e,t,n,r,s){function c(e){var t=this.mouseXPosition=o.getPointerPos(e,r).x/r.offsetWidth;this.setPos(t)}function u(e,t,n,r){var i=1e3*(t-n),o=1e3*t-r*t*1e3,a=e-o+i;return l(a)}function l(e){var t=new Date;return t.setTime(e),null==n?o.formatTime(t):a.formatTimeWithTimeZone(t,n)}i.call(this,{className:"timeindicator timeline-timeindicator",type:"span"}),this.duration=e,this.isLive=t,this.mouseXPosition=0,this.position=0,this.liveTime=0,r.addEventListener("mousemove",c.bind(this)),r.addEventListener("touchmove",c.bind(this)),this.setPos=function(e){e<0&&(e=0),e>1&&(e=1),this.view.dom.style.left=Math.max(Math.min(e*r.offsetWidth-this.view.dom.offsetWidth/2,r.offsetWidth-this.view.dom.offsetWidth),0)+"px",this.isLive?s?this.view.dom.textContent=o.formatTimeFromSeconds((e-1)*this.duration):this.view.dom.textContent=u(this.liveTime,this.duration,this.position,e):this.view.dom.textContent=o.formatTimeFromSeconds(e*this.duration)},this.updateLiveTimeIndicator=function(){this.setPos(this.mouseXPosition)},this.setTimeZoneOffset=function(e){n=e}}var i=n(26),o=n(21),a=n(69);r.prototype=Object.create(i.prototype),e.exports=r},function(e,t,n){"use strict";function r(e){i.call(this,e),this.addClass("timedisplay"),this.addSubWidgets({ondemandtimedisplay:new i({className:"timedisplay-ondemand",children:{progress:new i({className:"timedisplay-progress",type:"span"}),separator:new i({className:"timedisplay-separator",type:"span",properties:{textContent:"/"}}),duration:new i({className:"timedisplay-duration",type:"span"})}}),livetimedisplay:new i({className:"timedisplay-live",children:{progress:new i({className:"timedisplay-progress",type:"span"})}})}),this.durationValue=e.duration?e.duration:0,this.startPositionValue=e.startPosition?e.startPosition:0,this.init=function(){this.setDuration(this.durationValue),this.setProgress(this.startPositionValue);var e=new Date;this.setLiveTime(e)},this.setProgress=function(t){this.ondemandtimedisplay.progress.view.dom.textContent=o.formatTimeFromSeconds(Math.max(t,0)),e.displayTimeshiftOffset&&(this.livetimedisplay.progress.view.dom.textContent=this.isAtLivePosition?"":o.formatTimeFromSeconds(t-this.duration,!0))},this.setDuration=function(e){this.duration=e,this.ondemandtimedisplay.duration.view.dom.textContent=e===1/0||isNaN(e)?"---":o.formatTimeFromSeconds(Math.max(e,0))},this.setTimeZoneOffset=function(t){e.timeZoneOffset=t},this.setLiveTime=function(t){e.displayTimeshiftOffset||(this.livetimedisplay.progress.view.dom.textContent=null==e.timeZoneOffset?o.formatTime(t):a.formatTimeWithTimeZone(t,e.timeZoneOffset))};var t;e.videoModel&&(e.videoModel.observe("position",function(e){t&&t.slider.isDragging||this.setProgress(e)}.bind(this)),e.videoModel.observe("absolutePosition",function(e){this.setLiveTime(e)}.bind(this)),e.displayTimeshiftOffset&&e.videoModel.observe("isAtLivePosition",function(e){this.isAtLivePosition=e}.bind(this)),e.videoModel.observe("duration",function(e){e>0&&e!==1/0&&!isNaN(e)&&this.setDuration(e)}.bind(this))),this.setTimeline=function(e){t=e}}var i=n(26),o=n(21),a=n(69);r.prototype=Object.create(i.prototype),e.exports=r},function(e,t,n){"use strict";function r(e){function t(e){return e.language&&e.kind?e.kind+"_"+e.language:e.language||e.kind}function n(e,t){if(e.kind&&t.kind){if(e.kind<t.kind)return-1;if(e.kind>t.kind)return 1}if(e.language&&t.language){if(e.language<t.language)return-1;if(e.language>t.language)return 1}return 0}function r(r){var i={};return i.none={label:e.strings.subtitles.no_subtitles||"No subtitles"},r.concat().sort(n).forEach(function(n){var r=t(n);i[r]={label:n.label||e.strings.subtitles[n.language]||"["+n.language+"]",kind:n.kind,language:n.language,track:n}}),i}o.call(this,e||{});var c={};this.addClass("subtitles-selector"),this.updateState=function(e){e&&e.length>0&&(""!==e[0].language||""!==e[0].label)?this.addClass("visible"):this.removeClass("visible")},this.addSubWidgets({toggle:new i({className:"subtitles-selector-toggle",titles:{on:e.strings.label,off:e.strings.label},classes:{on:"open",off:"closed"}}),choices:new a({className:"subtitle",choices:{none:"No subtitles"}})}),this.setItems=function(e){c=r(e),this.choices.updateChoices(c),this.updateState(e)},this.setSelected=function(e,n){var r=n?t({language:e,kind:n}):e;this.choices.setSelected(r)},e.videoModel&&(e.videoModel.observe("textTracks",function(t){this.setItems(t);try{for(var n,r=e.userSettings?e.userSettings.get("subtitlesLanguage")||"none":"en",i=e.userSettings?e.userSettings.get("subtitlesKind"):"",o=0;o<t.length;o++){var a=t[o];if("none"===r&&a.language===r){n=a;break}if(i){if(r===a.language&&i===a.kind){n=a;break}r===a.language?n=a:n||i!==a.kind||(n=a)}else if(a.language===r){n=a;break}}n&&(n.select(),this.setSelected(n.language,n.kind))}catch(c){s.error("Failed applying stored subtitles settings.",c)}}.bind(this)),this.listen({"subtitle.change":function(t){var n=t.detail&&t.detail.choice;if(n&&"none"===n.id)e.videoModel.textTracks.forEach(function(e){e.unselect()});else{var r=c[n.id]&&c[n.id].track;r&&r.select()}if(e.userSettings)if("none"===n.id)e.userSettings.set("subtitlesLanguage","none");else{var r=c[n.id]&&c[n.id].track;r&&(r.language&&e.userSettings.set("subtitlesLanguage",r.language),r.kind&&e.userSettings.set("subtitlesKind",r.kind))}}}))}var i=n(132),o=n(26),a=n(186),s=n(7).get("subtitleSelector");r.prototype=Object.create(o.prototype),e.exports=r},function(e,t,n){"use strict";
function r(e){e.children&&(this.children=e.children),this.choices=e.choices,this.chosen_id=e["default"]?e["default"]:Object.keys(this.choices)[0],this.enableMultipleSelection=!1,this.maximumSelectionCount=1/0,this.selectedChoices=[],o.call(this,e),this.addClass("choices");var t=new CustomEvent(e.className+".change",{detail:{},bubbles:!0});this.setChoices=function(e){this.removeAllSubWidgets(),this.choices={},this.selectedChoices.length=0,Object.getOwnPropertyNames(e).forEach(function(t){var n=i(e[t]);this.choices[t]=n,this.addSubWidget(n),e[t].isSelected&&(n.addClass("chosen"),this.setSelectedHtml(n),this.enableMultipleSelection&&this.selectedChoices.push(n))}.bind(this)),this.setSelectionHandlers()},this.click=function(e){var n=this.choices[e];if(n&&this.enableMultipleSelection)if(n.hasClass("chosen")){if(this.selectedChoices.length>1){var r=this.selectedChoices.indexOf(n);r>-1&&this.selectedChoices.splice(r,1),n.isSelected=!1,n.removeClass("chosen"),n.tick&&n.removeSubWidget(n.tick)}}else this.selectedChoices.length<this.maximumSelectionCount&&(n.addClass("chosen"),this.setSelectedHtml(n),this.selectedChoices.push(n),n.isSelected=!0,this.chosen_id=e);else this.choices[this.chosen_id].removeClass("chosen"),this.choices[e].addClass("chosen"),this.chosen_id=e;t.detail.choice={id:e,detail:this.choices[e]},this.view.dom.dispatchEvent(t)},this.setSelectedHtml=function(t){t&&e.content&&e.content.html&&t.addSubWidgets({tick:new o({type:"span",className:"selected-html",html:e.content.html})})},this.updateChoices=function(e){this.choices=e,this.setChoices(e),this.choices[this.chosen_id]&&this.choices[this.chosen_id].addClass("chosen"),this.setSelectionHandlers()},this.setSelected=function(e){this.choices[this.chosen_id].removeClass("chosen"),this.chosen_id=e,this.choices[this.chosen_id].addClass("chosen"),this.choices[this.chosen_id].isSelected=!0,this.enableMultipleSelection&&this.selectedChoices.indexOf(this.choices[this.chosen_id])<0&&this.selectedChoices.push(this.choices[this.chosen_id])},this.setSelectionHandlers=function(){Object.getOwnPropertyNames(this.choices).forEach(function(e){var t=this.choices[e];t.listen({click:function(t){this.click(e,t)}.bind(this)})}.bind(this))},this.init=function(){this.setSelectionHandlers(),this.chosen_id&&this.click(this.chosen_id)},this.setChoices(this.choices)}function i(e){var t=e.label||e,n=new o({properties:{textContent:t,title:e.description||""}});return"object"==typeof e&&Object.getOwnPropertyNames(e).forEach(function(t){n[t]=e[t]}),n}var o=n(26);r.prototype=Object.create(o.prototype),e.exports=r},function(e,t,n){"use strict";function r(e){return e instanceof Date?isNaN(e.getTime())?e:e.toISOString():"number"==typeof e&&e%1!==0?e.toFixed(2):e}function i(e,t){function n(e,t){c.textContent=r(e),u.textContent=r(t)}function i(){e.unobserve(t,n)}function o(){e.observe(t,n)}var a=document.createElement("tr"),s=document.createElement("th"),c=document.createElement("td"),u=document.createElement("td");return s.textContent=t,a.appendChild(s),a.appendChild(c),a.appendChild(u),{dom:a,observe:o,unobserve:i}}function o(e){a.call(this,e||{}),this.isVisible=!1;var t=this,n=[];if(window.addEventListener("keydown",function(e){e.ctrlKey&&e.altKey&&86===e.keyCode&&t.toggleInfoOverlay(e.target.className)}),this.addSubWidgets({propertyBoard:new a({className:"playback-props",type:"div",children:{table:new a({className:"playback-props-table",type:"table"})}}),closeButton:new a({className:"playbackinfo-close-button",type:"button",properties:{title:"Close",innerText:"Close",textContent:"Close"}})}),e.videoModel){var r=this.propertyBoard.table.view.dom,o=document.createElement("tr"),s=document.createElement("th"),c=document.createElement("th"),u=document.createElement("th");s.textContent="Property",c.textContent="Current value",u.textContent="Previous value",o.appendChild(s),o.appendChild(c),o.appendChild(u),r.appendChild(o),Object.getOwnPropertyNames(e.videoModel.props).forEach(function(t){var o=i(e.videoModel,t);n.push(o),r.appendChild(o.dom)})}this.addClass(e.className||"playbackinfo"),this.closeButton.view.dom.addEventListener("click",function(e){t.toggleInfoOverlay()}),this.toggleInfoOverlay=function(){var e=!this.isVisible,t=e?"visible":"hidden",r=e?"hidden":"visible";this.addClass(t),this.removeClass(r);var i=e?"observe":"unobserve";n.forEach(function(e){e[i]()}),this.isVisible=e}}var a=n(26);n(7).get("playbackInfoOverlay");o.prototype=Object.create(a.prototype),e.exports=o},function(e,t,n){"use strict";function r(e){i.call(this,e||{}),this.isVisible=!1;var t=this,n=e.framework&&e.framework.name||"N/A",r=e.framework&&e.framework.build||"N/A",a=e.framework&&e.framework.sdk||"N/A";window.addEventListener("keydown",function(e){e.ctrlKey&&e.altKey&&73===e.keyCode&&t.toggleInfoOverlay(e.target.className)}),this.addSubWidgets({titleAndId:new i({className:"video-props",type:"span"}),frameworkInfo:new o({template:"<p>Player: <%= data.playerName %> <br> Build: <%= data.playerBuild %> <br> SDK version: <%= data.sdkVersion %></p>",data:{playerName:n,playerBuild:r,sdkVersion:a}}),closeButton:new i({className:"videoinfo-close-button",type:"button",properties:{title:e.title||"Close",innerText:e.title||"Close",textContent:e.title||"Close"}})}),this.closeButton.view.dom.addEventListener("click",function(e){t.toggleInfoOverlay()}),this.toggleInfoOverlay=function(){var e=this.isVisible?"visible":"hidden",t=this.isVisible?"hidden":"visible";this.addClass(t),this.removeClass(e),this.isVisible=!this.isVisible},this.setProperty=function(e,t){this.titleAndId.view.dom.innerText+=e+": "+t+"\n"},this.addClass(e.className||"videoinfo")}var i=n(26),o=n(189);n(7);r.prototype=Object.create(i.prototype),e.exports=r},function(e,t,n){"use strict";function r(e){this.data=e.data?e.data:null,this.view=new i(e.tag),o.call(this,e),this.addClass("template-element"),e.template?(this.setTemplate=function(e){this.template=a(e,null,{variable:"data"})},this.update=function(e){this.view.dom.innerHTML=this.template(e?e:this.data)},this.init=function(){this.data&&this.update(this.data)},"function"==typeof e.template?this.template=e.template:this.setTemplate(e.template)):e.content&&(this.view.dom.innerHTML=e.content,this.setContent=function(e){this.view.dom.innerHTML=e}),this._setPrefix=this.setPrefix,this.setPrefix=function(e,t){this._setPrefix(e,t)}}function i(e){var t=e?e:"div";this.dom=document.createElement(t)}var o=n(26),a=n(190);r.prototype=Object.create(o.prototype),e.exports=r},function(e,t,n){function r(e){return"\\"+A[e]}function i(e){return!!e&&"object"==typeof e}function o(e,t,n,r){return void 0!==e&&x.call(r,n)?e:t}function a(e,t,n){for(var r=-1,i=m(t),o=i.length;++r<o;){var a=i[r],s=e[a],c=n(s,t[a],a,e,t);(c===c?c===s:s!==s)&&(void 0!==s||a in e)||(e[a]=c)}return e}function s(e,t){return null==t?e:l(t,m(t),e)}function c(e){return i(e)&&"string"==typeof e.message&&C.call(e)==y}function u(e,t,n){var i=g.imports._.templateSettings||g;n&&p(e,t,n)&&(t=n=void 0),e=d(e),t=a(s({},n||t),i,o);var u,l,v=a(s({},t.imports),i.imports,o),y=m(v),A=f(v,y),P=0,x=t.interpolate||S,C="__p += '",O=RegExp((t.escape||S).source+"|"+x.source+"|"+(x===h?k:S).source+"|"+(t.evaluate||S).source+"|$","g"),M="sourceURL"in t?"//# sourceURL="+t.sourceURL+"\n":"";e.replace(O,function(t,n,i,o,a,s){return i||(i=o),C+=e.slice(P,s).replace(T,r),n&&(u=!0,C+="' +\n__e("+n+") +\n'"),a&&(l=!0,C+="';\n"+a+";\n__p += '"),i&&(C+="' +\n((__t = ("+i+")) == null ? '' : __t) +\n'"),P=s+t.length,t}),C+="';\n";var L=t.variable;L||(C="with (obj) {\n"+C+"\n}\n"),C=(l?C.replace(b,""):C).replace(w,"$1").replace(E,"$1;"),C="function("+(L||"obj")+") {\n"+(L?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(u?", __e = _.escape":"")+(l?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+C+"return __p\n}";var _=R(function(){return Function(y,M+"return "+C).apply(void 0,A)});if(_.source=C,c(_))throw _;return _}var l=n(14),d=n(191),f=n(192),p=n(178),h=n(193),m=n(15),v=n(179),g=n(194),y="[object Error]",b=/\b__p \+= '';/g,w=/\b(__p \+=) '' \+/g,E=/(__e\(.*?\)|\b__t\)) \+\n'';/g,k=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,S=/($^)/,T=/['\n\r\u2028\u2029\\]/g,A={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},P=Object.prototype,x=P.hasOwnProperty,C=P.toString,R=v(function(e,t){try{return e.apply(void 0,t)}catch(n){return c(n)?n:new Error(n)}});e.exports=u},function(e,t){function n(e){return null==e?"":e+""}e.exports=n},function(e,t){function n(e,t){for(var n=-1,r=t.length,i=Array(r);++n<r;)i[n]=e[t[n]];return i}e.exports=n},function(e,t){var n=/<%=([\s\S]+?)%>/g;e.exports=n},function(e,t,n){var r=n(195),i=n(193),o=/<%-([\s\S]+?)%>/g,a=/<%([\s\S]+?)%>/g,s={escape:o,evaluate:a,interpolate:i,variable:"",imports:{_:{escape:r}}};e.exports=s},function(e,t,n){function r(e){return p[e]}function i(e){return!!e&&"object"==typeof e}function o(e){return"symbol"==typeof e||i(e)&&m.call(e)==l}function a(e){if("string"==typeof e)return e;if(null==e)return"";if(o(e))return v?y.call(e):"";var t=e+"";return"0"==t&&1/e==-u?"-0":t}function s(e){return e=a(e),e&&f.test(e)?e.replace(d,r):e}var c=n(196),u=1/0,l="[object Symbol]",d=/[&<>"'`]/g,f=RegExp(d.source),p={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"},h=Object.prototype,m=h.toString,v=c.Symbol,g=v?v.prototype:void 0,y=v?g.toString:void 0;e.exports=s},function(e,t,n){(function(e,n){function r(e){return e&&e.Object===Object?e:null}var i={"function":!0,object:!0},o=i[typeof t]&&t&&!t.nodeType?t:void 0,a=i[typeof e]&&e&&!e.nodeType?e:void 0,s=r(o&&a&&"object"==typeof n&&n),c=r(i[typeof self]&&self),u=r(i[typeof window]&&window),l=r(i[typeof this]&&this),d=s||u!==(l&&l.window)&&u||c||l||Function("return this")();e.exports=d}).call(t,n(197)(e),function(){return this}())},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children=[],e.webpackPolyfill=1),e}},function(e,t,n){"use strict";var r="youbora-tracker",i=n(33).scheduleEventTypes,o=n(59),a=n(7),s=a.get(r),c={moduleName:r,dependencies:{appContainer:null,videoEngine:null,model:null,configuration:"all",playbackSchedule:null},init:function(e){function t(){s.debug("initSilverlightYoubora()"),null!=C.videoEngine.silverlight.core.plugins.youbora.pluginVersion&&(x.pluginVersion=C.videoEngine.silverlight.core.plugins.youbora.pluginVersion,_="Silverlight_"+x.pluginVersion)}function n(){null!=C.videoEngine.flash.core.plugins.youbora.pluginVersion&&(x.pluginVersion=C.videoEngine.flash.core.plugins.youbora.pluginVersion,_="Flash_"+x.pluginVersion)}function r(){"shaka"==C.videoEngine.dash.dashImpl.toLowerCase()?(s.debug("initShakaYoubora()"),null!=C.videoEngine.dash.shaka.youbora.pluginVersion&&(x.pluginVersion=C.videoEngine.dash.shaka.youbora.pluginVersion,_="Shaka_"+x.pluginVersion)):(s.debug("initDashjsYoubora()"),null!=C.videoEngine.dash.dashjs.youbora.pluginVersion&&(x.pluginVersion=C.videoEngine.dash.dashjs.youbora.pluginVersion,_="Dashjs_"+x.pluginVersion))}function a(e){var t=(new DOMParser).parseFromString(e.responseText,"text/xml");s.debug("responseXml : "+t),t.getElementsByTagName("h")[0]?(x.serviceUrl=t.getElementsByTagName("h")[0].innerHTML,x.serviceUrl.indexOf("http")<0&&(x.serviceUrl="http://"+x.serviceUrl),s.debug("serviceUrl from /data response : "+x.serviceUrl)):s.error("Cannot find <h></h> from /data response"),t.getElementsByTagName("pt")[0]?(x.pingInterval=t.getElementsByTagName("pt")[0].innerHTML||5,s.debug("pingInterval from /data response : "+x.pingInterval)):s.error("Cannot find <pt></pt> from /data response"),t.getElementsByTagName("c")[0]?(x.viewCode=t.getElementsByTagName("c")[0].innerHTML,s.debug("viewCode from /data response : "+x.viewCode)):s.error("Cannot find <c></c> from /data response"),q=!0}function c(e,t,n){var r={Accept:"application/xml"};s.debug("Youbora Get request URL : "+x.serviceUrl+e+"?"+t),o.doRequest(x.serviceUrl+e+"?"+t,"GET","",r,null).then(function(e){200==e.status?(s.debug("Youbora log was sent successfully"),n&&a(e)):s.error("Youbora get request returned with: "+e.status)},function(e){s.debug("Could not send Youbora get request",e)})}function u(e){s.debug("onBitrateUpdated : "+e),L=e}function l(e){s.debug("onIsPlayerLoaded : "+e),g()}function d(e){U.absolutePosition=e}function f(e){U.position=e}function p(e){s.debug("onPlayStateChanged")}function h(e){s.debug("onIsPausedChanged"),e?w():E()}function m(e){switch(e.event){case i.playlistEntryStarted:s.debug("playlistEntryStarted"),y(),z=!0;break;case i.adStarted:s.debug("adStarted"),y();break;case i.mainContentStarted:s.debug("mainContentStarted"),y();break;case i.mainContentEnded:case i.stopped:T();break;case i.mainContentInterrupted:break;case i.mainContentResumed:break;case i.bufferingEnded:s.debug("bufferingEnded"),b();break;case i.bufferingStarted:V=new Date,k(!1)}}function v(e,t){if(t&&O)return s.debug("Cached getParams = "+O),O;e||(e={});var n={filename:"",content_id:e.contentId||"",content_metadata:{title:e.title||"",genre:e.genre||"",language:e["original-language"]||e["spoken-languages"]||"",year:e["production-year"]||"",cast:e.actors||"",director:e.director||"",owner:e.publisher||"",duration:e.duration||"",parental:e["parental-guidance"]||"",price:"",rating:"",audioType:"",audioChannels:""},transaction_type:"",quality:e.hd||"",content_type:e.assetTypeName||"",device:{manufacturer:"",type:"web",year:"",firmware:""}};return O="code="+x.viewCode+"_"+x.videoIndex+"&resource="+encodeURIComponent(Y.streamUrl)+"&system="+x.system,O+="&live="+Y.isLive+"&properties="+JSON.stringify(n)+"&user="+D.user+"&referer="+encodeURIComponent(D.referer),O+="&totalBytes="+D.totalBytes+"&pingTime="+x.pingInterval+"&pluginVersion="+x.pluginVersion,O+="&randomNumber="+D.randomNumber+"&duration="+Y.duration,s.debug("New getParams = "+O),O}function g(){if(null!=x.serviceUrl&&null!=x.system){var e="system="+x.system+"&pluginVersion="+x.pluginVersion,t=!0;s.debug("/data request sent with getParams : "+e),c("/data",e,t)}else s.error("Youbora serviceUrl or system is null")}function y(){return q?(N&&(window.clearInterval(N),N=null),z?(s.debug("skip startSession()"),void(z=!1)):(x.videoIndex++,j=!0,F=new Date,null!=x.serviceUrl&&null!=x.system?e.model.getResources(Y).then(function(e){var t=!1,n=v(e.youboraMetadata,t),r=!1;s.debug("/start request sent"),c("/start",n,r),H=!0}):s.error("Youbora serviceUrl or system is null"),void 0)):void(N||(N=window.setInterval(y,200)))}function b(){if(!q||!H)return void(I||(I=window.setInterval(b,200)));if(I&&(window.clearInterval(I),I=null),null!=x.serviceUrl&&null!=x.system){var e,t,n=!1;if(j)e=(new Date).getTime()-F.getTime(),t="time="+e+"&code="+x.viewCode+"_"+x.videoIndex,s.debug("/joinTime request sent"),c("/joinTime",t,n),j=!1,k(!0);else{var r=0;r=Y.isLive?U.absolutePosition:U.position,e=(new Date).getTime()-V.getTime(),t="time="+r+"&duration="+e+"&code="+x.viewCode+"_"+x.videoIndex,s.debug("/bufferUnderrun request sent"),c("/bufferUnderrun",t,n),k(!0)}}else s.error("Youbora serviceUrl or system is null")}function w(){if(q){var e="code="+x.viewCode+"_"+x.videoIndex,t=!1;s.debug("/pause request sent"),c("/pause",e,t),W=!0,k(!1)}}function E(){if(q&&W){var e="code="+x.viewCode+"_"+x.videoIndex,t=!1;s.debug("/resume request sent"),c("/resume",e,t),W=!1,k(!0)}}function k(e){M&&(window.clearInterval(M),M=null),e&&(M||(M=window.setInterval(S,1e3*x.pingInterval)))}function S(){var e=new Date,t=e.getTime()-B.getTime();B=e;var n=0;n=Y.isLive?U.absolutePosition:U.position;var r="code="+x.viewCode+"_"+x.videoIndex;r+="&pingTime="+t+"&bitrate="+L,r+="&time="+n;var i=!1;s.debug("/ping request sent"),c("/ping",r,i)}function T(){var e="code="+x.viewCode+"_"+x.videoIndex,t=!1;s.debug("/stop request sent"),c("/stop",e,t),k(!1)}function A(e){if(e){s.debug("onError");var t,n,r=!0,i=v(null,r);if(e&&e.code)switch(t=e.code){case e.MEDIA_ERR_ABORTED:n="MEDIA_ERR_ABORTED";break;case e.MEDIA_ERR_NETWORK:n="MEDIA_ERR_NETWORK";break;case e.MEDIA_ERR_DECODE:n="MEDIA_ERR_DECODE";break;case e.MEDIA_ERR_SRC_NOT_SUPPORTED:n="MEDIA_ERR_SRC_NOT_SUPPORTED";break;default:n="MEDIA_ERR_UNKNOWN"}else t="unknown",n="unknown";i+="&player="+_+"&errorCode="+t+"&message="+n;var o=!1;s.debug("/error request sent"),c("/error",i,o)}}s.debug("init",e);var P={api:{},cleanup:function(){s.debug("destroy"),e.videoEngine.videoModel.unobserve("bitrate",u),e.videoEngine.videoModel.unobserve("playState",p),e.videoEngine.videoModel.unobserve("isPaused",h),e.videoEngine.videoModel.unobserve("position",f),e.videoEngine.videoModel.unobserve("absolutePosition",d),e.videoEngine.videoModel.unobserve("error",A)}},x={serviceUrl:null,system:null,outputFormat:"XML",pluginVersion:"1.3.0",pingInterval:1e3,viewCode:null,videoIndex:0},C=e.configuration;try{switch(e.videoEngine.technologyName){case"silverlight":t();break;case"flash":n();break;case"html":case"dash":r()}}catch(R){return s.warn("Failed initializing Youbora tracking for "+e.videoEngine.technologyName+" playback : "+R.message),P}try{x.serviceUrl=C.tracking.youbora.serviceUrl,x.system=C.tracking.youbora.system,x.outputFormat=C.tracking.youbora.outputFormat}catch(R){return s.warn("Failed retrieving basic Youbora settings : "+R.message),P}l();var O,M,L,_,N,I,D={user:"",referer:window.location.href,totalBytes:0,randomNumber:Math.floor(1e6*Math.random()+1)},U={position:0,absolutePosition:0},j=!0,F=new Date,V=new Date,B=new Date,q=!1,H=!1,W=!1,z=!1;e.videoEngine.videoModel.observe("bitrate",u),e.videoEngine.videoModel.observe("playState",p),e.videoEngine.videoModel.observe("isPaused",h),e.videoEngine.videoModel.observe("position",f),e.videoEngine.videoModel.observe("absolutePosition",d),e.videoEngine.videoModel.observe("error",A),e.playbackSchedule.then(function(e){s.debug("playbackSchedule done")},function(e){s.debug("playbackSchedule failed"),A(e)},function(e){s.debug("playbackSchedule progress"),m(e)});var Y={youboraMetadata:null};return P}};e.exports=c},function(e,t){!function(){"use strict";function e(e,t){t=t||{bubbles:!1,cancelable:!1,detail:void 0};var n=document.createEvent("CustomEvent");return n.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),n}e.prototype=window.Event.prototype;var t="CustomEvent"in window;if(t)try{new window.CustomEvent("")}catch(n){t=!1}t||(window.CustomEvent=e)}()},function(e,t){"use strict";e.exports={summaryBarPublished:"Published: ",summaryBarLive:"Live ",startPosterLive:"Live",startPosterCountdownLead:"Countdown to start",startPosterAt:" ",summaryBarDuration:"Duration: ",summaryBarViews:"Views: ",recommendationsHeader:"Watch more videos",resumePrompt:"Would you like to continue watching this video where you left?",resumeStartOver:"Start over",resumeResume:"Resume from {time}",startupError:"The player failed.",generalError:"The player failed.",userKicked:"You have been logged out because your account was used for login on another device.",playbackError:"The playback failed.","continue":"Continue",adSkip:"Skip this ad",starttime:"Start time",global:{close:"Close"},widgets:{play:"Play",pause:"Pause",gotolive:"Go live",live:"Live",mute:"Mute",unmute:"Unmute",enterfullscreen:"Enter fullscreen",exitfullscreen:"Exit fullscreen",enableComments:"Show comments",disableComments:"Hide comments",subtitles:"Subtitles",timeline:"Timeline",volume:"Volume"},templates:{adPlaybackMessage:"Ad <%= data.adNumber %> of <%= data.adCount %>: Your video starts in <%= data.countdown %> seconds.",adPostrollPlaybackMessage:"Ad <%= data.adNumber %> of <%= data.adCount %>: Completed in <%= data.countdown %> seconds."},errorMessages:{VIDEO_NOT_FOUND:"The video was not found.",VIDEO_NOT_PUBLISHED:"The video is not published.",NOT_STARTED:"The transmission has not startet yet.",VIDEO_FORMAT_NOT_FOUND:"No available streams for this video.",SESSION_NOT_AUTHENTICATED:"The video is restricted an cannot be shown.",UNAUTHORIZED:"The video is restricted an cannot be shown.",INVALID_GEO_LOCATION:"The video cannot be played in your geographical area.",asset:"The video was not found.",playback:"The video was not available for playback.",notechnology:"This type of stream can't be played in this setup."}}},function(e,t,n){"use strict";e.exports={framework:{name:"Vimond.UniPlayer",build:{sdk:"5.6.795",build:"1.0.0"}.build||"NA",sdk:{sdk:"5.6.795",build:"1.0.0"}.sdk||"NA"},classNamePrefix:"vimond-player",tracking:{youbora:{serviceUrl:"http://nqs.nice264.com",system:"vimond"}},videoEngine:{dash:{dashjs:{libraryUrl:"resources/dashjs-1.5.1/dash.debug.js",domClassName:"vimond-player-video vimond-player-video-html",config:{logToBrowserConsole:!1},youbora:{pluginVersion:"1.6.7"}},shaka:{libraryUrl:"resources/shaka-151105/shaka-player.compiled.debug.js",logLevel:"NONE",domClassName:"vimond-player-video vimond-player-video-html",youbora:{pluginVersion:"1.6.7"},enableWithCredentialsOnHTTPAndMatchedCookie:!0,enableWithCredentialsOnHTTPAndMatchedCookieRegExpString:"(^|;)s*userId=",enableWithCredentialsOnHTTPAndMatchedCookieRegExpOption:""},dashImpl:"shaka"},silverlight:{core:{xapUrl:"resources/silverlight/Vimond.Player.Core.xap",domClassName:"vimond-player-video vimond-player-video-silverlight",plugins:{subtitles:{file:"Vimond.Player.Subtitles"},youbora:{pluginVersion:"1.3.0"}}}},flash:{core:{swfUrl:"resources/flash/Vimond.Player.Core.swf",domClassName:"vimond-player-video vimond-player-video-flash",plugins:{conviva:{swfUrl:"http://livepassdl.conviva.com/OSMF/ConvivaOSMFPlugin_OSMF2_0_FP10_1.swf",namespace:"http://www.conviva.com",serviceUrl:"https://testonly.conviva.com",customerId:"c3.TV2-Test"},youbora:{pluginVersion:"1.3.0"}}}},html:{supportsAutoplay:!0,domClassName:"vimond-player-video vimond-player-video-html",youbora:{pluginVersion:"1.3.0"}},subtitles:{contentTypeMappings:{ttml:["xml","ttml"],vtt:["vtt"]}},htmlAdOverlay:{activeClassName:"ads-active",inactiveClassName:"ads-inactive"}},responsivity:{responsiveSize:{small:{max:600},medium:{min:600,max:900},large:{min:900}}},userInactivityInterval:2e3,streamLookup:{profiles:{hls:{platform:"web",protocol:"HLS",videoFormat:"SMIL ISM",drmTypes:["com.apple.fps.1_0"]},mpd:{platform:"web",protocol:"DASH",appName:"epl-web",drmTypes:{"com.widevine.alpha":"widevine_modular","com.microsoft.playready":"playready"}},ism:{platform:"web",drmTypes:["com.microsoft.playready"]},hds:{platform:"web",protocol:"HDS",videoFormat:"SMIL ISM",drmTypes:[]}},contexts:[{match:"Android.*Chrome",canplay:[{profile:"hls",playbackTechnology:"html"}],platform:"web"},{match:"Chrome",canplay:[{profile:"mpd",playbackTechnology:"dash"},{profile:"hds",playbackTechnology:"flash"}],platform:"web"},{match:"(iPad|iPhone|iPod)",canplay:[{profile:"hls",playbackTechnology:"html"}],platform:"web"},{match:"(Android [5-9]|Android 4\\.[4-9]\\.)",canplay:[{profile:"hls",playbackTechnology:"html"}],platform:"web"},{match:"Safari",canplay:[{profile:"hls",playbackTechnology:"html"},{profile:"hds",playbackTechnology:"flash"},{profile:"ism",playbackTechnology:"silverlight"}],platform:"web"},{match:".*",canplay:[{profile:"hds",playbackTechnology:"flash"},{profile:"ism",playbackTechnology:"silverlight"}],platform:"web"}]},autoplaySupport:[{match:"Android|iPad|iPhone|iPod",supportsAutoplay:!1},{match:".*",supportsAutoplay:!1}],rest:{apiServer:"",resourceParameters:{asset:{externalSystems:"EPG",expand:"items"}},deviceRegistration:{enabled:!0,udid:"1-1-1",label:"Browser"},enableCentralTimeOffsetRetrieval:!0,markerImageUrlBuilder:{urlPattern:"http://www.tv2.no/tvid/{picture}"}},technologyResolution:{availablePlaybackTechnologies:["dash","silverlight","flash","html"]},settingsStoragePolicy:{keyPrefix:"vup",audioLanguage:{policy:"persistent",defaultValue:"en"},subtitlesLanguage:{policy:"persistent",defaultValue:"en"},volume:{policy:"session",defaultValue:.8}},ads:{libraryUrl:"https://imasdk.googleapis.com/js/sdkloader/ima3.js",doNotEncodeParams:["iu","cust_params"],cmsid:964,adTagUrl:"https://pubads.g.doubleclick.net/gampad/ads?sz=640x480&iu=/5374/TV2video/sumo&impl=s&gdfp_req=1&env=vp&output=xml_vast2&unviewed_position_start=1&correlator=[timestamp]",locale:"nb",enabled:!1},playbackKeyboardShortcuts:{scope:"document",eventName:"keydown",reserveEscapeDuringFullscreen:!0,playback:{playpause:[32,13],fullscreen:[70],decreasevolume:[109,189],increasevolume:[107,187],togglemute:[77],exit:[27]}}}}]);